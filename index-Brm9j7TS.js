(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const s of n.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function i(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerPolicy&&(n.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?n.credentials="include":o.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(o){if(o.ep)return;o.ep=!0;const n=i(o);fetch(o.href,n)}})();var xs={},q=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof xs<"u"?xs:typeof self<"u"?self:{};function ir(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var i=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};i.prototype=t.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var o=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(i,r,o.get?o:{enumerable:!0,get:function(){return e[r]}})}),i}var Pn={};(function(e){var t={};/*!
 *  howler.js v2.2.4
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(){var i=function(){this.init()};i.prototype={init:function(){var a=this||r;return a._counter=1e3,a._html5AudioPool=[],a.html5PoolSize=10,a._codecs={},a._howls=[],a._muted=!1,a._volume=1,a._canPlayEvent="canplaythrough",a._navigator=typeof window<"u"&&window.navigator?window.navigator:null,a.masterGain=null,a.noAudio=!1,a.usingWebAudio=!0,a.autoSuspend=!0,a.ctx=null,a.autoUnlock=!0,a._setup(),a},volume:function(a){var u=this||r;if(a=parseFloat(a),u.ctx||g(),typeof a<"u"&&a>=0&&a<=1){if(u._volume=a,u._muted)return u;u.usingWebAudio&&u.masterGain.gain.setValueAtTime(a,r.ctx.currentTime);for(var d=0;d<u._howls.length;d++)if(!u._howls[d]._webAudio)for(var y=u._howls[d]._getSoundIds(),b=0;b<y.length;b++){var E=u._howls[d]._soundById(y[b]);E&&E._node&&(E._node.volume=E._volume*a)}return u}return u._volume},mute:function(a){var u=this||r;u.ctx||g(),u._muted=a,u.usingWebAudio&&u.masterGain.gain.setValueAtTime(a?0:u._volume,r.ctx.currentTime);for(var d=0;d<u._howls.length;d++)if(!u._howls[d]._webAudio)for(var y=u._howls[d]._getSoundIds(),b=0;b<y.length;b++){var E=u._howls[d]._soundById(y[b]);E&&E._node&&(E._node.muted=a?!0:E._muted)}return u},stop:function(){for(var a=this||r,u=0;u<a._howls.length;u++)a._howls[u].stop();return a},unload:function(){for(var a=this||r,u=a._howls.length-1;u>=0;u--)a._howls[u].unload();return a.usingWebAudio&&a.ctx&&typeof a.ctx.close<"u"&&(a.ctx.close(),a.ctx=null,g()),a},codecs:function(a){return(this||r)._codecs[a.replace(/^x-/,"")]},_setup:function(){var a=this||r;if(a.state=a.ctx&&a.ctx.state||"suspended",a._autoSuspend(),!a.usingWebAudio)if(typeof Audio<"u")try{var u=new Audio;typeof u.oncanplaythrough>"u"&&(a._canPlayEvent="canplay")}catch{a.noAudio=!0}else a.noAudio=!0;try{var u=new Audio;u.muted&&(a.noAudio=!0)}catch{}return a.noAudio||a._setupCodecs(),a},_setupCodecs:function(){var a=this||r,u=null;try{u=typeof Audio<"u"?new Audio:null}catch{return a}if(!u||typeof u.canPlayType!="function")return a;var d=u.canPlayType("audio/mpeg;").replace(/^no$/,""),y=a._navigator?a._navigator.userAgent:"",b=y.match(/OPR\/(\d+)/g),E=b&&parseInt(b[0].split("/")[1],10)<33,v=y.indexOf("Safari")!==-1&&y.indexOf("Chrome")===-1,_=y.match(/Version\/(.*?) /),x=v&&_&&parseInt(_[1],10)<15;return a._codecs={mp3:!!(!E&&(d||u.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!d,opus:!!u.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!u.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!u.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(u.canPlayType('audio/wav; codecs="1"')||u.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!u.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!u.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(u.canPlayType("audio/x-m4a;")||u.canPlayType("audio/m4a;")||u.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(u.canPlayType("audio/x-m4b;")||u.canPlayType("audio/m4b;")||u.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(u.canPlayType("audio/x-mp4;")||u.canPlayType("audio/mp4;")||u.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!x&&u.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!x&&u.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!u.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(u.canPlayType("audio/x-flac;")||u.canPlayType("audio/flac;")).replace(/^no$/,"")},a},_unlockAudio:function(){var a=this||r;if(!(a._audioUnlocked||!a.ctx)){a._audioUnlocked=!1,a.autoUnlock=!1,!a._mobileUnloaded&&a.ctx.sampleRate!==44100&&(a._mobileUnloaded=!0,a.unload()),a._scratchBuffer=a.ctx.createBuffer(1,1,22050);var u=function(d){for(;a._html5AudioPool.length<a.html5PoolSize;)try{var y=new Audio;y._unlocked=!0,a._releaseHtml5Audio(y)}catch{a.noAudio=!0;break}for(var b=0;b<a._howls.length;b++)if(!a._howls[b]._webAudio)for(var E=a._howls[b]._getSoundIds(),v=0;v<E.length;v++){var _=a._howls[b]._soundById(E[v]);_&&_._node&&!_._node._unlocked&&(_._node._unlocked=!0,_._node.load())}a._autoResume();var x=a.ctx.createBufferSource();x.buffer=a._scratchBuffer,x.connect(a.ctx.destination),typeof x.start>"u"?x.noteOn(0):x.start(0),typeof a.ctx.resume=="function"&&a.ctx.resume(),x.onended=function(){x.disconnect(0),a._audioUnlocked=!0,document.removeEventListener("touchstart",u,!0),document.removeEventListener("touchend",u,!0),document.removeEventListener("click",u,!0),document.removeEventListener("keydown",u,!0);for(var A=0;A<a._howls.length;A++)a._howls[A]._emit("unlock")}};return document.addEventListener("touchstart",u,!0),document.addEventListener("touchend",u,!0),document.addEventListener("click",u,!0),document.addEventListener("keydown",u,!0),a}},_obtainHtml5Audio:function(){var a=this||r;if(a._html5AudioPool.length)return a._html5AudioPool.pop();var u=new Audio().play();return u&&typeof Promise<"u"&&(u instanceof Promise||typeof u.then=="function")&&u.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(a){var u=this||r;return a._unlocked&&u._html5AudioPool.push(a),u},_autoSuspend:function(){var a=this;if(!(!a.autoSuspend||!a.ctx||typeof a.ctx.suspend>"u"||!r.usingWebAudio)){for(var u=0;u<a._howls.length;u++)if(a._howls[u]._webAudio){for(var d=0;d<a._howls[u]._sounds.length;d++)if(!a._howls[u]._sounds[d]._paused)return a}return a._suspendTimer&&clearTimeout(a._suspendTimer),a._suspendTimer=setTimeout(function(){if(a.autoSuspend){a._suspendTimer=null,a.state="suspending";var y=function(){a.state="suspended",a._resumeAfterSuspend&&(delete a._resumeAfterSuspend,a._autoResume())};a.ctx.suspend().then(y,y)}},3e4),a}},_autoResume:function(){var a=this;if(!(!a.ctx||typeof a.ctx.resume>"u"||!r.usingWebAudio))return a.state==="running"&&a.ctx.state!=="interrupted"&&a._suspendTimer?(clearTimeout(a._suspendTimer),a._suspendTimer=null):a.state==="suspended"||a.state==="running"&&a.ctx.state==="interrupted"?(a.ctx.resume().then(function(){a.state="running";for(var u=0;u<a._howls.length;u++)a._howls[u]._emit("resume")}),a._suspendTimer&&(clearTimeout(a._suspendTimer),a._suspendTimer=null)):a.state==="suspending"&&(a._resumeAfterSuspend=!0),a}};var r=new i,o=function(a){var u=this;if(!a.src||a.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}u.init(a)};o.prototype={init:function(a){var u=this;return r.ctx||g(),u._autoplay=a.autoplay||!1,u._format=typeof a.format!="string"?a.format:[a.format],u._html5=a.html5||!1,u._muted=a.mute||!1,u._loop=a.loop||!1,u._pool=a.pool||5,u._preload=typeof a.preload=="boolean"||a.preload==="metadata"?a.preload:!0,u._rate=a.rate||1,u._sprite=a.sprite||{},u._src=typeof a.src!="string"?a.src:[a.src],u._volume=a.volume!==void 0?a.volume:1,u._xhr={method:a.xhr&&a.xhr.method?a.xhr.method:"GET",headers:a.xhr&&a.xhr.headers?a.xhr.headers:null,withCredentials:a.xhr&&a.xhr.withCredentials?a.xhr.withCredentials:!1},u._duration=0,u._state="unloaded",u._sounds=[],u._endTimers={},u._queue=[],u._playLock=!1,u._onend=a.onend?[{fn:a.onend}]:[],u._onfade=a.onfade?[{fn:a.onfade}]:[],u._onload=a.onload?[{fn:a.onload}]:[],u._onloaderror=a.onloaderror?[{fn:a.onloaderror}]:[],u._onplayerror=a.onplayerror?[{fn:a.onplayerror}]:[],u._onpause=a.onpause?[{fn:a.onpause}]:[],u._onplay=a.onplay?[{fn:a.onplay}]:[],u._onstop=a.onstop?[{fn:a.onstop}]:[],u._onmute=a.onmute?[{fn:a.onmute}]:[],u._onvolume=a.onvolume?[{fn:a.onvolume}]:[],u._onrate=a.onrate?[{fn:a.onrate}]:[],u._onseek=a.onseek?[{fn:a.onseek}]:[],u._onunlock=a.onunlock?[{fn:a.onunlock}]:[],u._onresume=[],u._webAudio=r.usingWebAudio&&!u._html5,typeof r.ctx<"u"&&r.ctx&&r.autoUnlock&&r._unlockAudio(),r._howls.push(u),u._autoplay&&u._queue.push({event:"play",action:function(){u.play()}}),u._preload&&u._preload!=="none"&&u.load(),u},load:function(){var a=this,u=null;if(r.noAudio){a._emit("loaderror",null,"No audio support.");return}typeof a._src=="string"&&(a._src=[a._src]);for(var d=0;d<a._src.length;d++){var y,b;if(a._format&&a._format[d])y=a._format[d];else{if(b=a._src[d],typeof b!="string"){a._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}y=/^data:audio\/([^;,]+);/i.exec(b),y||(y=/\.([^.]+)$/.exec(b.split("?",1)[0])),y&&(y=y[1].toLowerCase())}if(y||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),y&&r.codecs(y)){u=a._src[d];break}}if(!u){a._emit("loaderror",null,"No codec support for selected audio sources.");return}return a._src=u,a._state="loading",window.location.protocol==="https:"&&u.slice(0,5)==="http:"&&(a._html5=!0,a._webAudio=!1),new n(a),a._webAudio&&l(a),a},play:function(a,u){var d=this,y=null;if(typeof a=="number")y=a,a=null;else{if(typeof a=="string"&&d._state==="loaded"&&!d._sprite[a])return null;if(typeof a>"u"&&(a="__default",!d._playLock)){for(var b=0,E=0;E<d._sounds.length;E++)d._sounds[E]._paused&&!d._sounds[E]._ended&&(b++,y=d._sounds[E]._id);b===1?a=null:y=null}}var v=y?d._soundById(y):d._inactiveSound();if(!v)return null;if(y&&!a&&(a=v._sprite||"__default"),d._state!=="loaded"){v._sprite=a,v._ended=!1;var _=v._id;return d._queue.push({event:"play",action:function(){d.play(_)}}),_}if(y&&!v._paused)return u||d._loadQueue("play"),v._id;d._webAudio&&r._autoResume();var x=Math.max(0,v._seek>0?v._seek:d._sprite[a][0]/1e3),A=Math.max(0,(d._sprite[a][0]+d._sprite[a][1])/1e3-x),C=A*1e3/Math.abs(v._rate),O=d._sprite[a][0]/1e3,I=(d._sprite[a][0]+d._sprite[a][1])/1e3;v._sprite=a,v._ended=!1;var p=function(){v._paused=!1,v._seek=x,v._start=O,v._stop=I,v._loop=!!(v._loop||d._sprite[a][2])};if(x>=I){d._ended(v);return}var S=v._node;if(d._webAudio){var R=function(){d._playLock=!1,p(),d._refreshBuffer(v);var Y=v._muted||d._muted?0:v._volume;S.gain.setValueAtTime(Y,r.ctx.currentTime),v._playStart=r.ctx.currentTime,typeof S.bufferSource.start>"u"?v._loop?S.bufferSource.noteGrainOn(0,x,86400):S.bufferSource.noteGrainOn(0,x,A):v._loop?S.bufferSource.start(0,x,86400):S.bufferSource.start(0,x,A),C!==1/0&&(d._endTimers[v._id]=setTimeout(d._ended.bind(d,v),C)),u||setTimeout(function(){d._emit("play",v._id),d._loadQueue()},0)};r.state==="running"&&r.ctx.state!=="interrupted"?R():(d._playLock=!0,d.once("resume",R),d._clearTimer(v._id))}else{var F=function(){S.currentTime=x,S.muted=v._muted||d._muted||r._muted||S.muted,S.volume=v._volume*r.volume(),S.playbackRate=v._rate;try{var Y=S.play();if(Y&&typeof Promise<"u"&&(Y instanceof Promise||typeof Y.then=="function")?(d._playLock=!0,p(),Y.then(function(){d._playLock=!1,S._unlocked=!0,u?d._loadQueue():d._emit("play",v._id)}).catch(function(){d._playLock=!1,d._emit("playerror",v._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),v._ended=!0,v._paused=!0})):u||(d._playLock=!1,p(),d._emit("play",v._id)),S.playbackRate=v._rate,S.paused){d._emit("playerror",v._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}a!=="__default"||v._loop?d._endTimers[v._id]=setTimeout(d._ended.bind(d,v),C):(d._endTimers[v._id]=function(){d._ended(v),S.removeEventListener("ended",d._endTimers[v._id],!1)},S.addEventListener("ended",d._endTimers[v._id],!1))}catch(V){d._emit("playerror",v._id,V)}};S.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(S.src=d._src,S.load());var X=window&&window.ejecta||!S.readyState&&r._navigator.isCocoonJS;if(S.readyState>=3||X)F();else{d._playLock=!0,d._state="loading";var j=function(){d._state="loaded",F(),S.removeEventListener(r._canPlayEvent,j,!1)};S.addEventListener(r._canPlayEvent,j,!1),d._clearTimer(v._id)}}return v._id},pause:function(a){var u=this;if(u._state!=="loaded"||u._playLock)return u._queue.push({event:"pause",action:function(){u.pause(a)}}),u;for(var d=u._getSoundIds(a),y=0;y<d.length;y++){u._clearTimer(d[y]);var b=u._soundById(d[y]);if(b&&!b._paused&&(b._seek=u.seek(d[y]),b._rateSeek=0,b._paused=!0,u._stopFade(d[y]),b._node))if(u._webAudio){if(!b._node.bufferSource)continue;typeof b._node.bufferSource.stop>"u"?b._node.bufferSource.noteOff(0):b._node.bufferSource.stop(0),u._cleanBuffer(b._node)}else(!isNaN(b._node.duration)||b._node.duration===1/0)&&b._node.pause();arguments[1]||u._emit("pause",b?b._id:null)}return u},stop:function(a,u){var d=this;if(d._state!=="loaded"||d._playLock)return d._queue.push({event:"stop",action:function(){d.stop(a)}}),d;for(var y=d._getSoundIds(a),b=0;b<y.length;b++){d._clearTimer(y[b]);var E=d._soundById(y[b]);E&&(E._seek=E._start||0,E._rateSeek=0,E._paused=!0,E._ended=!0,d._stopFade(y[b]),E._node&&(d._webAudio?E._node.bufferSource&&(typeof E._node.bufferSource.stop>"u"?E._node.bufferSource.noteOff(0):E._node.bufferSource.stop(0),d._cleanBuffer(E._node)):(!isNaN(E._node.duration)||E._node.duration===1/0)&&(E._node.currentTime=E._start||0,E._node.pause(),E._node.duration===1/0&&d._clearSound(E._node))),u||d._emit("stop",E._id))}return d},mute:function(a,u){var d=this;if(d._state!=="loaded"||d._playLock)return d._queue.push({event:"mute",action:function(){d.mute(a,u)}}),d;if(typeof u>"u")if(typeof a=="boolean")d._muted=a;else return d._muted;for(var y=d._getSoundIds(u),b=0;b<y.length;b++){var E=d._soundById(y[b]);E&&(E._muted=a,E._interval&&d._stopFade(E._id),d._webAudio&&E._node?E._node.gain.setValueAtTime(a?0:E._volume,r.ctx.currentTime):E._node&&(E._node.muted=r._muted?!0:a),d._emit("mute",E._id))}return d},volume:function(){var a=this,u=arguments,d,y;if(u.length===0)return a._volume;if(u.length===1||u.length===2&&typeof u[1]>"u"){var b=a._getSoundIds(),E=b.indexOf(u[0]);E>=0?y=parseInt(u[0],10):d=parseFloat(u[0])}else u.length>=2&&(d=parseFloat(u[0]),y=parseInt(u[1],10));var v;if(typeof d<"u"&&d>=0&&d<=1){if(a._state!=="loaded"||a._playLock)return a._queue.push({event:"volume",action:function(){a.volume.apply(a,u)}}),a;typeof y>"u"&&(a._volume=d),y=a._getSoundIds(y);for(var _=0;_<y.length;_++)v=a._soundById(y[_]),v&&(v._volume=d,u[2]||a._stopFade(y[_]),a._webAudio&&v._node&&!v._muted?v._node.gain.setValueAtTime(d,r.ctx.currentTime):v._node&&!v._muted&&(v._node.volume=d*r.volume()),a._emit("volume",v._id))}else return v=y?a._soundById(y):a._sounds[0],v?v._volume:0;return a},fade:function(a,u,d,y){var b=this;if(b._state!=="loaded"||b._playLock)return b._queue.push({event:"fade",action:function(){b.fade(a,u,d,y)}}),b;a=Math.min(Math.max(0,parseFloat(a)),1),u=Math.min(Math.max(0,parseFloat(u)),1),d=parseFloat(d),b.volume(a,y);for(var E=b._getSoundIds(y),v=0;v<E.length;v++){var _=b._soundById(E[v]);if(_){if(y||b._stopFade(E[v]),b._webAudio&&!_._muted){var x=r.ctx.currentTime,A=x+d/1e3;_._volume=a,_._node.gain.setValueAtTime(a,x),_._node.gain.linearRampToValueAtTime(u,A)}b._startFadeInterval(_,a,u,d,E[v],typeof y>"u")}}return b},_startFadeInterval:function(a,u,d,y,b,E){var v=this,_=u,x=d-u,A=Math.abs(x/.01),C=Math.max(4,A>0?y/A:y),O=Date.now();a._fadeTo=d,a._interval=setInterval(function(){var I=(Date.now()-O)/y;O=Date.now(),_+=x*I,_=Math.round(_*100)/100,x<0?_=Math.max(d,_):_=Math.min(d,_),v._webAudio?a._volume=_:v.volume(_,a._id,!0),E&&(v._volume=_),(d<u&&_<=d||d>u&&_>=d)&&(clearInterval(a._interval),a._interval=null,a._fadeTo=null,v.volume(d,a._id),v._emit("fade",a._id))},C)},_stopFade:function(a){var u=this,d=u._soundById(a);return d&&d._interval&&(u._webAudio&&d._node.gain.cancelScheduledValues(r.ctx.currentTime),clearInterval(d._interval),d._interval=null,u.volume(d._fadeTo,a),d._fadeTo=null,u._emit("fade",a)),u},loop:function(){var a=this,u=arguments,d,y,b;if(u.length===0)return a._loop;if(u.length===1)if(typeof u[0]=="boolean")d=u[0],a._loop=d;else return b=a._soundById(parseInt(u[0],10)),b?b._loop:!1;else u.length===2&&(d=u[0],y=parseInt(u[1],10));for(var E=a._getSoundIds(y),v=0;v<E.length;v++)b=a._soundById(E[v]),b&&(b._loop=d,a._webAudio&&b._node&&b._node.bufferSource&&(b._node.bufferSource.loop=d,d&&(b._node.bufferSource.loopStart=b._start||0,b._node.bufferSource.loopEnd=b._stop,a.playing(E[v])&&(a.pause(E[v],!0),a.play(E[v],!0)))));return a},rate:function(){var a=this,u=arguments,d,y;if(u.length===0)y=a._sounds[0]._id;else if(u.length===1){var b=a._getSoundIds(),E=b.indexOf(u[0]);E>=0?y=parseInt(u[0],10):d=parseFloat(u[0])}else u.length===2&&(d=parseFloat(u[0]),y=parseInt(u[1],10));var v;if(typeof d=="number"){if(a._state!=="loaded"||a._playLock)return a._queue.push({event:"rate",action:function(){a.rate.apply(a,u)}}),a;typeof y>"u"&&(a._rate=d),y=a._getSoundIds(y);for(var _=0;_<y.length;_++)if(v=a._soundById(y[_]),v){a.playing(y[_])&&(v._rateSeek=a.seek(y[_]),v._playStart=a._webAudio?r.ctx.currentTime:v._playStart),v._rate=d,a._webAudio&&v._node&&v._node.bufferSource?v._node.bufferSource.playbackRate.setValueAtTime(d,r.ctx.currentTime):v._node&&(v._node.playbackRate=d);var x=a.seek(y[_]),A=(a._sprite[v._sprite][0]+a._sprite[v._sprite][1])/1e3-x,C=A*1e3/Math.abs(v._rate);(a._endTimers[y[_]]||!v._paused)&&(a._clearTimer(y[_]),a._endTimers[y[_]]=setTimeout(a._ended.bind(a,v),C)),a._emit("rate",v._id)}}else return v=a._soundById(y),v?v._rate:a._rate;return a},seek:function(){var a=this,u=arguments,d,y;if(u.length===0)a._sounds.length&&(y=a._sounds[0]._id);else if(u.length===1){var b=a._getSoundIds(),E=b.indexOf(u[0]);E>=0?y=parseInt(u[0],10):a._sounds.length&&(y=a._sounds[0]._id,d=parseFloat(u[0]))}else u.length===2&&(d=parseFloat(u[0]),y=parseInt(u[1],10));if(typeof y>"u")return 0;if(typeof d=="number"&&(a._state!=="loaded"||a._playLock))return a._queue.push({event:"seek",action:function(){a.seek.apply(a,u)}}),a;var v=a._soundById(y);if(v)if(typeof d=="number"&&d>=0){var _=a.playing(y);_&&a.pause(y,!0),v._seek=d,v._ended=!1,a._clearTimer(y),!a._webAudio&&v._node&&!isNaN(v._node.duration)&&(v._node.currentTime=d);var x=function(){_&&a.play(y,!0),a._emit("seek",y)};if(_&&!a._webAudio){var A=function(){a._playLock?setTimeout(A,0):x()};setTimeout(A,0)}else x()}else if(a._webAudio){var C=a.playing(y)?r.ctx.currentTime-v._playStart:0,O=v._rateSeek?v._rateSeek-v._seek:0;return v._seek+(O+C*Math.abs(v._rate))}else return v._node.currentTime;return a},playing:function(a){var u=this;if(typeof a=="number"){var d=u._soundById(a);return d?!d._paused:!1}for(var y=0;y<u._sounds.length;y++)if(!u._sounds[y]._paused)return!0;return!1},duration:function(a){var u=this,d=u._duration,y=u._soundById(a);return y&&(d=u._sprite[y._sprite][1]/1e3),d},state:function(){return this._state},unload:function(){for(var a=this,u=a._sounds,d=0;d<u.length;d++)u[d]._paused||a.stop(u[d]._id),a._webAudio||(a._clearSound(u[d]._node),u[d]._node.removeEventListener("error",u[d]._errorFn,!1),u[d]._node.removeEventListener(r._canPlayEvent,u[d]._loadFn,!1),u[d]._node.removeEventListener("ended",u[d]._endFn,!1),r._releaseHtml5Audio(u[d]._node)),delete u[d]._node,a._clearTimer(u[d]._id);var y=r._howls.indexOf(a);y>=0&&r._howls.splice(y,1);var b=!0;for(d=0;d<r._howls.length;d++)if(r._howls[d]._src===a._src||a._src.indexOf(r._howls[d]._src)>=0){b=!1;break}return s&&b&&delete s[a._src],r.noAudio=!1,a._state="unloaded",a._sounds=[],a=null,null},on:function(a,u,d,y){var b=this,E=b["_on"+a];return typeof u=="function"&&E.push(y?{id:d,fn:u,once:y}:{id:d,fn:u}),b},off:function(a,u,d){var y=this,b=y["_on"+a],E=0;if(typeof u=="number"&&(d=u,u=null),u||d)for(E=0;E<b.length;E++){var v=d===b[E].id;if(u===b[E].fn&&v||!u&&v){b.splice(E,1);break}}else if(a)y["_on"+a]=[];else{var _=Object.keys(y);for(E=0;E<_.length;E++)_[E].indexOf("_on")===0&&Array.isArray(y[_[E]])&&(y[_[E]]=[])}return y},once:function(a,u,d){var y=this;return y.on(a,u,d,1),y},_emit:function(a,u,d){for(var y=this,b=y["_on"+a],E=b.length-1;E>=0;E--)(!b[E].id||b[E].id===u||a==="load")&&(setTimeout(function(v){v.call(this,u,d)}.bind(y,b[E].fn),0),b[E].once&&y.off(a,b[E].fn,b[E].id));return y._loadQueue(a),y},_loadQueue:function(a){var u=this;if(u._queue.length>0){var d=u._queue[0];d.event===a&&(u._queue.shift(),u._loadQueue()),a||d.action()}return u},_ended:function(a){var u=this,d=a._sprite;if(!u._webAudio&&a._node&&!a._node.paused&&!a._node.ended&&a._node.currentTime<a._stop)return setTimeout(u._ended.bind(u,a),100),u;var y=!!(a._loop||u._sprite[d][2]);if(u._emit("end",a._id),!u._webAudio&&y&&u.stop(a._id,!0).play(a._id),u._webAudio&&y){u._emit("play",a._id),a._seek=a._start||0,a._rateSeek=0,a._playStart=r.ctx.currentTime;var b=(a._stop-a._start)*1e3/Math.abs(a._rate);u._endTimers[a._id]=setTimeout(u._ended.bind(u,a),b)}return u._webAudio&&!y&&(a._paused=!0,a._ended=!0,a._seek=a._start||0,a._rateSeek=0,u._clearTimer(a._id),u._cleanBuffer(a._node),r._autoSuspend()),!u._webAudio&&!y&&u.stop(a._id,!0),u},_clearTimer:function(a){var u=this;if(u._endTimers[a]){if(typeof u._endTimers[a]!="function")clearTimeout(u._endTimers[a]);else{var d=u._soundById(a);d&&d._node&&d._node.removeEventListener("ended",u._endTimers[a],!1)}delete u._endTimers[a]}return u},_soundById:function(a){for(var u=this,d=0;d<u._sounds.length;d++)if(a===u._sounds[d]._id)return u._sounds[d];return null},_inactiveSound:function(){var a=this;a._drain();for(var u=0;u<a._sounds.length;u++)if(a._sounds[u]._ended)return a._sounds[u].reset();return new n(a)},_drain:function(){var a=this,u=a._pool,d=0,y=0;if(!(a._sounds.length<u)){for(y=0;y<a._sounds.length;y++)a._sounds[y]._ended&&d++;for(y=a._sounds.length-1;y>=0;y--){if(d<=u)return;a._sounds[y]._ended&&(a._webAudio&&a._sounds[y]._node&&a._sounds[y]._node.disconnect(0),a._sounds.splice(y,1),d--)}}},_getSoundIds:function(a){var u=this;if(typeof a>"u"){for(var d=[],y=0;y<u._sounds.length;y++)d.push(u._sounds[y]._id);return d}else return[a]},_refreshBuffer:function(a){var u=this;return a._node.bufferSource=r.ctx.createBufferSource(),a._node.bufferSource.buffer=s[u._src],a._panner?a._node.bufferSource.connect(a._panner):a._node.bufferSource.connect(a._node),a._node.bufferSource.loop=a._loop,a._loop&&(a._node.bufferSource.loopStart=a._start||0,a._node.bufferSource.loopEnd=a._stop||0),a._node.bufferSource.playbackRate.setValueAtTime(a._rate,r.ctx.currentTime),u},_cleanBuffer:function(a){var u=this,d=r._navigator&&r._navigator.vendor.indexOf("Apple")>=0;if(!a.bufferSource)return u;if(r._scratchBuffer&&a.bufferSource&&(a.bufferSource.onended=null,a.bufferSource.disconnect(0),d))try{a.bufferSource.buffer=r._scratchBuffer}catch{}return a.bufferSource=null,u},_clearSound:function(a){var u=/MSIE |Trident\//.test(r._navigator&&r._navigator.userAgent);u||(a.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var n=function(a){this._parent=a,this.init()};n.prototype={init:function(){var a=this,u=a._parent;return a._muted=u._muted,a._loop=u._loop,a._volume=u._volume,a._rate=u._rate,a._seek=0,a._paused=!0,a._ended=!0,a._sprite="__default",a._id=++r._counter,u._sounds.push(a),a.create(),a},create:function(){var a=this,u=a._parent,d=r._muted||a._muted||a._parent._muted?0:a._volume;return u._webAudio?(a._node=typeof r.ctx.createGain>"u"?r.ctx.createGainNode():r.ctx.createGain(),a._node.gain.setValueAtTime(d,r.ctx.currentTime),a._node.paused=!0,a._node.connect(r.masterGain)):r.noAudio||(a._node=r._obtainHtml5Audio(),a._errorFn=a._errorListener.bind(a),a._node.addEventListener("error",a._errorFn,!1),a._loadFn=a._loadListener.bind(a),a._node.addEventListener(r._canPlayEvent,a._loadFn,!1),a._endFn=a._endListener.bind(a),a._node.addEventListener("ended",a._endFn,!1),a._node.src=u._src,a._node.preload=u._preload===!0?"auto":u._preload,a._node.volume=d*r.volume(),a._node.load()),a},reset:function(){var a=this,u=a._parent;return a._muted=u._muted,a._loop=u._loop,a._volume=u._volume,a._rate=u._rate,a._seek=0,a._rateSeek=0,a._paused=!0,a._ended=!0,a._sprite="__default",a._id=++r._counter,a},_errorListener:function(){var a=this;a._parent._emit("loaderror",a._id,a._node.error?a._node.error.code:0),a._node.removeEventListener("error",a._errorFn,!1)},_loadListener:function(){var a=this,u=a._parent;u._duration=Math.ceil(a._node.duration*10)/10,Object.keys(u._sprite).length===0&&(u._sprite={__default:[0,u._duration*1e3]}),u._state!=="loaded"&&(u._state="loaded",u._emit("load"),u._loadQueue()),a._node.removeEventListener(r._canPlayEvent,a._loadFn,!1)},_endListener:function(){var a=this,u=a._parent;u._duration===1/0&&(u._duration=Math.ceil(a._node.duration*10)/10,u._sprite.__default[1]===1/0&&(u._sprite.__default[1]=u._duration*1e3),u._ended(a)),a._node.removeEventListener("ended",a._endFn,!1)}};var s={},l=function(a){var u=a._src;if(s[u]){a._duration=s[u].duration,c(a);return}if(/^data:[^;]+;base64,/.test(u)){for(var d=atob(u.split(",")[1]),y=new Uint8Array(d.length),b=0;b<d.length;++b)y[b]=d.charCodeAt(b);h(y.buffer,a)}else{var E=new XMLHttpRequest;E.open(a._xhr.method,u,!0),E.withCredentials=a._xhr.withCredentials,E.responseType="arraybuffer",a._xhr.headers&&Object.keys(a._xhr.headers).forEach(function(v){E.setRequestHeader(v,a._xhr.headers[v])}),E.onload=function(){var v=(E.status+"")[0];if(v!=="0"&&v!=="2"&&v!=="3"){a._emit("loaderror",null,"Failed loading audio file with status: "+E.status+".");return}h(E.response,a)},E.onerror=function(){a._webAudio&&(a._html5=!0,a._webAudio=!1,a._sounds=[],delete s[u],a.load())},f(E)}},f=function(a){try{a.send()}catch{a.onerror()}},h=function(a,u){var d=function(){u._emit("loaderror",null,"Decoding audio data failed.")},y=function(b){b&&u._sounds.length>0?(s[u._src]=b,c(u,b)):d()};typeof Promise<"u"&&r.ctx.decodeAudioData.length===1?r.ctx.decodeAudioData(a).then(y).catch(d):r.ctx.decodeAudioData(a,y,d)},c=function(a,u){u&&!a._duration&&(a._duration=u.duration),Object.keys(a._sprite).length===0&&(a._sprite={__default:[0,a._duration*1e3]}),a._state!=="loaded"&&(a._state="loaded",a._emit("load"),a._loadQueue())},g=function(){if(r.usingWebAudio){try{typeof AudioContext<"u"?r.ctx=new AudioContext:typeof webkitAudioContext<"u"?r.ctx=new webkitAudioContext:r.usingWebAudio=!1}catch{r.usingWebAudio=!1}r.ctx||(r.usingWebAudio=!1);var a=/iP(hone|od|ad)/.test(r._navigator&&r._navigator.platform),u=r._navigator&&r._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),d=u?parseInt(u[1],10):null;if(a&&d&&d<9){var y=/safari/.test(r._navigator&&r._navigator.userAgent.toLowerCase());r._navigator&&!y&&(r.usingWebAudio=!1)}r.usingWebAudio&&(r.masterGain=typeof r.ctx.createGain>"u"?r.ctx.createGainNode():r.ctx.createGain(),r.masterGain.gain.setValueAtTime(r._muted?0:r._volume,r.ctx.currentTime),r.masterGain.connect(r.ctx.destination)),r._setup()}};e.Howler=r,e.Howl=o,typeof t<"u"?(t.HowlerGlobal=i,t.Howler=r,t.Howl=o,t.Sound=n):typeof window<"u"&&(window.HowlerGlobal=i,window.Howler=r,window.Howl=o,window.Sound=n)})();/*!
 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
 *  
 *  howler.js v2.2.4
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(){HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(r){var o=this;if(!o.ctx||!o.ctx.listener)return o;for(var n=o._howls.length-1;n>=0;n--)o._howls[n].stereo(r);return o},HowlerGlobal.prototype.pos=function(r,o,n){var s=this;if(!s.ctx||!s.ctx.listener)return s;if(o=typeof o!="number"?s._pos[1]:o,n=typeof n!="number"?s._pos[2]:n,typeof r=="number")s._pos=[r,o,n],typeof s.ctx.listener.positionX<"u"?(s.ctx.listener.positionX.setTargetAtTime(s._pos[0],Howler.ctx.currentTime,.1),s.ctx.listener.positionY.setTargetAtTime(s._pos[1],Howler.ctx.currentTime,.1),s.ctx.listener.positionZ.setTargetAtTime(s._pos[2],Howler.ctx.currentTime,.1)):s.ctx.listener.setPosition(s._pos[0],s._pos[1],s._pos[2]);else return s._pos;return s},HowlerGlobal.prototype.orientation=function(r,o,n,s,l,f){var h=this;if(!h.ctx||!h.ctx.listener)return h;var c=h._orientation;if(o=typeof o!="number"?c[1]:o,n=typeof n!="number"?c[2]:n,s=typeof s!="number"?c[3]:s,l=typeof l!="number"?c[4]:l,f=typeof f!="number"?c[5]:f,typeof r=="number")h._orientation=[r,o,n,s,l,f],typeof h.ctx.listener.forwardX<"u"?(h.ctx.listener.forwardX.setTargetAtTime(r,Howler.ctx.currentTime,.1),h.ctx.listener.forwardY.setTargetAtTime(o,Howler.ctx.currentTime,.1),h.ctx.listener.forwardZ.setTargetAtTime(n,Howler.ctx.currentTime,.1),h.ctx.listener.upX.setTargetAtTime(s,Howler.ctx.currentTime,.1),h.ctx.listener.upY.setTargetAtTime(l,Howler.ctx.currentTime,.1),h.ctx.listener.upZ.setTargetAtTime(f,Howler.ctx.currentTime,.1)):h.ctx.listener.setOrientation(r,o,n,s,l,f);else return c;return h},Howl.prototype.init=function(r){return function(o){var n=this;return n._orientation=o.orientation||[1,0,0],n._stereo=o.stereo||null,n._pos=o.pos||null,n._pannerAttr={coneInnerAngle:typeof o.coneInnerAngle<"u"?o.coneInnerAngle:360,coneOuterAngle:typeof o.coneOuterAngle<"u"?o.coneOuterAngle:360,coneOuterGain:typeof o.coneOuterGain<"u"?o.coneOuterGain:0,distanceModel:typeof o.distanceModel<"u"?o.distanceModel:"inverse",maxDistance:typeof o.maxDistance<"u"?o.maxDistance:1e4,panningModel:typeof o.panningModel<"u"?o.panningModel:"HRTF",refDistance:typeof o.refDistance<"u"?o.refDistance:1,rolloffFactor:typeof o.rolloffFactor<"u"?o.rolloffFactor:1},n._onstereo=o.onstereo?[{fn:o.onstereo}]:[],n._onpos=o.onpos?[{fn:o.onpos}]:[],n._onorientation=o.onorientation?[{fn:o.onorientation}]:[],r.call(this,o)}}(Howl.prototype.init),Howl.prototype.stereo=function(r,o){var n=this;if(!n._webAudio)return n;if(n._state!=="loaded")return n._queue.push({event:"stereo",action:function(){n.stereo(r,o)}}),n;var s=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof o>"u")if(typeof r=="number")n._stereo=r,n._pos=[r,0,0];else return n._stereo;for(var l=n._getSoundIds(o),f=0;f<l.length;f++){var h=n._soundById(l[f]);if(h)if(typeof r=="number")h._stereo=r,h._pos=[r,0,0],h._node&&(h._pannerAttr.panningModel="equalpower",(!h._panner||!h._panner.pan)&&i(h,s),s==="spatial"?typeof h._panner.positionX<"u"?(h._panner.positionX.setValueAtTime(r,Howler.ctx.currentTime),h._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),h._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):h._panner.setPosition(r,0,0):h._panner.pan.setValueAtTime(r,Howler.ctx.currentTime)),n._emit("stereo",h._id);else return h._stereo}return n},Howl.prototype.pos=function(r,o,n,s){var l=this;if(!l._webAudio)return l;if(l._state!=="loaded")return l._queue.push({event:"pos",action:function(){l.pos(r,o,n,s)}}),l;if(o=typeof o!="number"?0:o,n=typeof n!="number"?-.5:n,typeof s>"u")if(typeof r=="number")l._pos=[r,o,n];else return l._pos;for(var f=l._getSoundIds(s),h=0;h<f.length;h++){var c=l._soundById(f[h]);if(c)if(typeof r=="number")c._pos=[r,o,n],c._node&&((!c._panner||c._panner.pan)&&i(c,"spatial"),typeof c._panner.positionX<"u"?(c._panner.positionX.setValueAtTime(r,Howler.ctx.currentTime),c._panner.positionY.setValueAtTime(o,Howler.ctx.currentTime),c._panner.positionZ.setValueAtTime(n,Howler.ctx.currentTime)):c._panner.setPosition(r,o,n)),l._emit("pos",c._id);else return c._pos}return l},Howl.prototype.orientation=function(r,o,n,s){var l=this;if(!l._webAudio)return l;if(l._state!=="loaded")return l._queue.push({event:"orientation",action:function(){l.orientation(r,o,n,s)}}),l;if(o=typeof o!="number"?l._orientation[1]:o,n=typeof n!="number"?l._orientation[2]:n,typeof s>"u")if(typeof r=="number")l._orientation=[r,o,n];else return l._orientation;for(var f=l._getSoundIds(s),h=0;h<f.length;h++){var c=l._soundById(f[h]);if(c)if(typeof r=="number")c._orientation=[r,o,n],c._node&&(c._panner||(c._pos||(c._pos=l._pos||[0,0,-.5]),i(c,"spatial")),typeof c._panner.orientationX<"u"?(c._panner.orientationX.setValueAtTime(r,Howler.ctx.currentTime),c._panner.orientationY.setValueAtTime(o,Howler.ctx.currentTime),c._panner.orientationZ.setValueAtTime(n,Howler.ctx.currentTime)):c._panner.setOrientation(r,o,n)),l._emit("orientation",c._id);else return c._orientation}return l},Howl.prototype.pannerAttr=function(){var r=this,o=arguments,n,s,l;if(!r._webAudio)return r;if(o.length===0)return r._pannerAttr;if(o.length===1)if(typeof o[0]=="object")n=o[0],typeof s>"u"&&(n.pannerAttr||(n.pannerAttr={coneInnerAngle:n.coneInnerAngle,coneOuterAngle:n.coneOuterAngle,coneOuterGain:n.coneOuterGain,distanceModel:n.distanceModel,maxDistance:n.maxDistance,refDistance:n.refDistance,rolloffFactor:n.rolloffFactor,panningModel:n.panningModel}),r._pannerAttr={coneInnerAngle:typeof n.pannerAttr.coneInnerAngle<"u"?n.pannerAttr.coneInnerAngle:r._coneInnerAngle,coneOuterAngle:typeof n.pannerAttr.coneOuterAngle<"u"?n.pannerAttr.coneOuterAngle:r._coneOuterAngle,coneOuterGain:typeof n.pannerAttr.coneOuterGain<"u"?n.pannerAttr.coneOuterGain:r._coneOuterGain,distanceModel:typeof n.pannerAttr.distanceModel<"u"?n.pannerAttr.distanceModel:r._distanceModel,maxDistance:typeof n.pannerAttr.maxDistance<"u"?n.pannerAttr.maxDistance:r._maxDistance,refDistance:typeof n.pannerAttr.refDistance<"u"?n.pannerAttr.refDistance:r._refDistance,rolloffFactor:typeof n.pannerAttr.rolloffFactor<"u"?n.pannerAttr.rolloffFactor:r._rolloffFactor,panningModel:typeof n.pannerAttr.panningModel<"u"?n.pannerAttr.panningModel:r._panningModel});else return l=r._soundById(parseInt(o[0],10)),l?l._pannerAttr:r._pannerAttr;else o.length===2&&(n=o[0],s=parseInt(o[1],10));for(var f=r._getSoundIds(s),h=0;h<f.length;h++)if(l=r._soundById(f[h]),l){var c=l._pannerAttr;c={coneInnerAngle:typeof n.coneInnerAngle<"u"?n.coneInnerAngle:c.coneInnerAngle,coneOuterAngle:typeof n.coneOuterAngle<"u"?n.coneOuterAngle:c.coneOuterAngle,coneOuterGain:typeof n.coneOuterGain<"u"?n.coneOuterGain:c.coneOuterGain,distanceModel:typeof n.distanceModel<"u"?n.distanceModel:c.distanceModel,maxDistance:typeof n.maxDistance<"u"?n.maxDistance:c.maxDistance,refDistance:typeof n.refDistance<"u"?n.refDistance:c.refDistance,rolloffFactor:typeof n.rolloffFactor<"u"?n.rolloffFactor:c.rolloffFactor,panningModel:typeof n.panningModel<"u"?n.panningModel:c.panningModel};var g=l._panner;g||(l._pos||(l._pos=r._pos||[0,0,-.5]),i(l,"spatial"),g=l._panner),g.coneInnerAngle=c.coneInnerAngle,g.coneOuterAngle=c.coneOuterAngle,g.coneOuterGain=c.coneOuterGain,g.distanceModel=c.distanceModel,g.maxDistance=c.maxDistance,g.refDistance=c.refDistance,g.rolloffFactor=c.rolloffFactor,g.panningModel=c.panningModel}return r},Sound.prototype.init=function(r){return function(){var o=this,n=o._parent;o._orientation=n._orientation,o._stereo=n._stereo,o._pos=n._pos,o._pannerAttr=n._pannerAttr,r.call(this),o._stereo?n.stereo(o._stereo):o._pos&&n.pos(o._pos[0],o._pos[1],o._pos[2],o._id)}}(Sound.prototype.init),Sound.prototype.reset=function(r){return function(){var o=this,n=o._parent;return o._orientation=n._orientation,o._stereo=n._stereo,o._pos=n._pos,o._pannerAttr=n._pannerAttr,o._stereo?n.stereo(o._stereo):o._pos?n.pos(o._pos[0],o._pos[1],o._pos[2],o._id):o._panner&&(o._panner.disconnect(0),o._panner=void 0,n._refreshBuffer(o)),r.call(this)}}(Sound.prototype.reset);var i=function(r,o){o=o||"spatial",o==="spatial"?(r._panner=Howler.ctx.createPanner(),r._panner.coneInnerAngle=r._pannerAttr.coneInnerAngle,r._panner.coneOuterAngle=r._pannerAttr.coneOuterAngle,r._panner.coneOuterGain=r._pannerAttr.coneOuterGain,r._panner.distanceModel=r._pannerAttr.distanceModel,r._panner.maxDistance=r._pannerAttr.maxDistance,r._panner.refDistance=r._pannerAttr.refDistance,r._panner.rolloffFactor=r._pannerAttr.rolloffFactor,r._panner.panningModel=r._pannerAttr.panningModel,typeof r._panner.positionX<"u"?(r._panner.positionX.setValueAtTime(r._pos[0],Howler.ctx.currentTime),r._panner.positionY.setValueAtTime(r._pos[1],Howler.ctx.currentTime),r._panner.positionZ.setValueAtTime(r._pos[2],Howler.ctx.currentTime)):r._panner.setPosition(r._pos[0],r._pos[1],r._pos[2]),typeof r._panner.orientationX<"u"?(r._panner.orientationX.setValueAtTime(r._orientation[0],Howler.ctx.currentTime),r._panner.orientationY.setValueAtTime(r._orientation[1],Howler.ctx.currentTime),r._panner.orientationZ.setValueAtTime(r._orientation[2],Howler.ctx.currentTime)):r._panner.setOrientation(r._orientation[0],r._orientation[1],r._orientation[2])):(r._panner=Howler.ctx.createStereoPanner(),r._panner.pan.setValueAtTime(r._stereo,Howler.ctx.currentTime)),r._panner.connect(r._node),r._paused||r._parent.pause(r._id,!0).play(r._id,!0)}})()})(Pn);var $l;function ot(){}ot.prototype=Object.create(null);function Z(){Z.init.call(this)}Z.EventEmitter=Z;Z.usingDomains=!1;Z.prototype.domain=void 0;Z.prototype._events=void 0;Z.prototype._maxListeners=void 0;Z.defaultMaxListeners=10;Z.init=function(){this.domain=null,Z.usingDomains&&$l.active,(!this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=new ot,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Z.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||isNaN(t))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=t,this};function da(e){return e._maxListeners===void 0?Z.defaultMaxListeners:e._maxListeners}Z.prototype.getMaxListeners=function(){return da(this)};function Ql(e,t,i){if(t)e.call(i);else for(var r=e.length,o=Ai(e,r),n=0;n<r;++n)o[n].call(i)}function Jl(e,t,i,r){if(t)e.call(i,r);else for(var o=e.length,n=Ai(e,o),s=0;s<o;++s)n[s].call(i,r)}function eu(e,t,i,r,o){if(t)e.call(i,r,o);else for(var n=e.length,s=Ai(e,n),l=0;l<n;++l)s[l].call(i,r,o)}function tu(e,t,i,r,o,n){if(t)e.call(i,r,o,n);else for(var s=e.length,l=Ai(e,s),f=0;f<s;++f)l[f].call(i,r,o,n)}function iu(e,t,i,r){if(t)e.apply(i,r);else for(var o=e.length,n=Ai(e,o),s=0;s<o;++s)n[s].apply(i,r)}Z.prototype.emit=function(t){var i,r,o,n,s,l,f,h=t==="error";if(l=this._events,l)h=h&&l.error==null;else if(!h)return!1;if(f=this.domain,h){if(i=arguments[1],f)i||(i=new Error('Uncaught, unspecified "error" event')),i.domainEmitter=this,i.domain=f,i.domainThrown=!1,f.emit("error",i);else{if(i instanceof Error)throw i;var c=new Error('Uncaught, unspecified "error" event. ('+i+")");throw c.context=i,c}return!1}if(r=l[t],!r)return!1;var g=typeof r=="function";switch(o=arguments.length,o){case 1:Ql(r,g,this);break;case 2:Jl(r,g,this,arguments[1]);break;case 3:eu(r,g,this,arguments[1],arguments[2]);break;case 4:tu(r,g,this,arguments[1],arguments[2],arguments[3]);break;default:for(n=new Array(o-1),s=1;s<o;s++)n[s-1]=arguments[s];iu(r,g,this,n)}return!0};function pa(e,t,i,r){var o,n,s;if(typeof i!="function")throw new TypeError('"listener" argument must be a function');if(n=e._events,n?(n.newListener&&(e.emit("newListener",t,i.listener?i.listener:i),n=e._events),s=n[t]):(n=e._events=new ot,e._eventsCount=0),!s)s=n[t]=i,++e._eventsCount;else if(typeof s=="function"?s=n[t]=r?[i,s]:[s,i]:r?s.unshift(i):s.push(i),!s.warned&&(o=da(e),o&&o>0&&s.length>o)){s.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+t+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=s.length,ru(l)}return e}function ru(e){typeof console.warn=="function"?console.warn(e):console.log(e)}Z.prototype.addListener=function(t,i){return pa(this,t,i,!1)};Z.prototype.on=Z.prototype.addListener;Z.prototype.prependListener=function(t,i){return pa(this,t,i,!0)};function _a(e,t,i){var r=!1;function o(){e.removeListener(t,o),r||(r=!0,i.apply(e,arguments))}return o.listener=i,o}Z.prototype.once=function(t,i){if(typeof i!="function")throw new TypeError('"listener" argument must be a function');return this.on(t,_a(this,t,i)),this};Z.prototype.prependOnceListener=function(t,i){if(typeof i!="function")throw new TypeError('"listener" argument must be a function');return this.prependListener(t,_a(this,t,i)),this};Z.prototype.removeListener=function(t,i){var r,o,n,s,l;if(typeof i!="function")throw new TypeError('"listener" argument must be a function');if(o=this._events,!o)return this;if(r=o[t],!r)return this;if(r===i||r.listener&&r.listener===i)--this._eventsCount===0?this._events=new ot:(delete o[t],o.removeListener&&this.emit("removeListener",t,r.listener||i));else if(typeof r!="function"){for(n=-1,s=r.length;s-- >0;)if(r[s]===i||r[s].listener&&r[s].listener===i){l=r[s].listener,n=s;break}if(n<0)return this;if(r.length===1){if(r[0]=void 0,--this._eventsCount===0)return this._events=new ot,this;delete o[t]}else nu(r,n);o.removeListener&&this.emit("removeListener",t,l||i)}return this};Z.prototype.removeAllListeners=function(t){var i,r;if(r=this._events,!r)return this;if(!r.removeListener)return arguments.length===0?(this._events=new ot,this._eventsCount=0):r[t]&&(--this._eventsCount===0?this._events=new ot:delete r[t]),this;if(arguments.length===0){for(var o=Object.keys(r),n=0,s;n<o.length;++n)s=o[n],s!=="removeListener"&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=new ot,this._eventsCount=0,this}if(i=r[t],typeof i=="function")this.removeListener(t,i);else if(i)do this.removeListener(t,i[i.length-1]);while(i[0]);return this};Z.prototype.listeners=function(t){var i,r,o=this._events;return o?(i=o[t],i?typeof i=="function"?r=[i.listener||i]:r=su(i):r=[]):r=[],r};Z.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):ga.call(e,t)};Z.prototype.listenerCount=ga;function ga(e){var t=this._events;if(t){var i=t[e];if(typeof i=="function")return 1;if(i)return i.length}return 0}Z.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};function nu(e,t){for(var i=t,r=i+1,o=e.length;r<o;i+=1,r+=1)e[i]=e[r];e.pop()}function Ai(e,t){for(var i=new Array(t);t--;)i[t]=e[t];return i}function su(e){for(var t=new Array(e.length),i=0;i<t.length;++i)t[i]=e[i].listener||e[i];return t}const ou=Object.freeze(Object.defineProperty({__proto__:null,EventEmitter:Z,default:Z},Symbol.toStringTag,{value:"Module"}));var kn={};function ma(){throw new Error("setTimeout has not been defined")}function ya(){throw new Error("clearTimeout has not been defined")}var Ke=ma,$e=ya;typeof kn.setTimeout=="function"&&(Ke=setTimeout);typeof kn.clearTimeout=="function"&&($e=clearTimeout);function va(e){if(Ke===setTimeout)return setTimeout(e,0);if((Ke===ma||!Ke)&&setTimeout)return Ke=setTimeout,setTimeout(e,0);try{return Ke(e,0)}catch{try{return Ke.call(null,e,0)}catch{return Ke.call(this,e,0)}}}function au(e){if($e===clearTimeout)return clearTimeout(e);if(($e===ya||!$e)&&clearTimeout)return $e=clearTimeout,clearTimeout(e);try{return $e(e)}catch{try{return $e.call(null,e)}catch{return $e.call(this,e)}}}var Ge=[],Zt=!1,vt,Ui=-1;function lu(){!Zt||!vt||(Zt=!1,vt.length?Ge=vt.concat(Ge):Ui=-1,Ge.length&&wa())}function wa(){if(!Zt){var e=va(lu);Zt=!0;for(var t=Ge.length;t;){for(vt=Ge,Ge=[];++Ui<t;)vt&&vt[Ui].run();Ui=-1,t=Ge.length}vt=null,Zt=!1,au(e)}}function Ee(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)t[i-1]=arguments[i];Ge.push(new ba(e,t)),Ge.length===1&&!Zt&&va(wa)}function ba(e,t){this.fun=e,this.array=t}ba.prototype.run=function(){this.fun.apply(null,this.array)};var uu="browser",hu="browser",fu=!0,cu={},du=[],pu="",_u={},gu={},mu={};function Rt(){}var yu=Rt,vu=Rt,wu=Rt,bu=Rt,xu=Rt,Eu=Rt,Tu=Rt;function Au(e){throw new Error("process.binding is not supported")}function Su(){return"/"}function Du(e){throw new Error("process.chdir is not supported")}function Ou(){return 0}var jt=kn.performance||{},Cu=jt.now||jt.mozNow||jt.msNow||jt.oNow||jt.webkitNow||function(){return new Date().getTime()};function Iu(e){var t=Cu.call(jt)*.001,i=Math.floor(t),r=Math.floor(t%1*1e9);return e&&(i=i-e[0],r=r-e[1],r<0&&(i--,r+=1e9)),[i,r]}var Lu=new Date;function Ru(){var e=new Date,t=e-Lu;return t/1e3}var zi={nextTick:Ee,title:uu,browser:fu,env:cu,argv:du,version:pu,versions:_u,on:yu,addListener:vu,once:wu,off:bu,removeListener:xu,removeAllListeners:Eu,emit:Tu,binding:Au,cwd:Su,chdir:Du,umask:Ou,hrtime:Iu,platform:hu,release:gu,config:mu,uptime:Ru},xn;typeof Object.create=="function"?xn=function(t,i){t.super_=i,t.prototype=Object.create(i.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:xn=function(t,i){t.super_=i;var r=function(){};r.prototype=i.prototype,t.prototype=new r,t.prototype.constructor=t};const me=xn;var Nu={},Mu=/%[sdj%]/g;function Pu(e){if(!Bn(e)){for(var t=[],i=0;i<arguments.length;i++)t.push(at(arguments[i]));return t.join(" ")}for(var i=1,r=arguments,o=r.length,n=String(e).replace(Mu,function(l){if(l==="%%")return"%";if(i>=o)return l;switch(l){case"%s":return String(r[i++]);case"%d":return Number(r[i++]);case"%j":try{return JSON.stringify(r[i++])}catch{return"[Circular]"}default:return l}}),s=r[i];i<o;s=r[++i])Fn(s)||!Si(s)?n+=" "+s:n+=" "+at(s);return n}function xa(e,t){if(it(Nu.process))return function(){return xa(e,t).apply(this,arguments)};if(zi.noDeprecation===!0)return e;var i=!1;function r(){if(!i){if(zi.throwDeprecation)throw new Error(t);zi.traceDeprecation?console.trace(t):console.error(t),i=!0}return e.apply(this,arguments)}return r}var Li={},pr;function ku(e){if(it(pr)&&(pr=zi.env.NODE_DEBUG||""),e=e.toUpperCase(),!Li[e])if(new RegExp("\\b"+e+"\\b","i").test(pr)){var t=0;Li[e]=function(){var i=Pu.apply(null,arguments);console.error("%s %d: %s",e,t,i)}}else Li[e]=function(){};return Li[e]}function at(e,t){var i={seen:[],stylize:Bu};return arguments.length>=3&&(i.depth=arguments[2]),arguments.length>=4&&(i.colors=arguments[3]),Ea(t)?i.showHidden=t:t&&Gu(i,t),it(i.showHidden)&&(i.showHidden=!1),it(i.depth)&&(i.depth=2),it(i.colors)&&(i.colors=!1),it(i.customInspect)&&(i.customInspect=!0),i.colors&&(i.stylize=Fu),Wi(i,e,i.depth)}at.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};at.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function Fu(e,t){var i=at.styles[t];return i?"\x1B["+at.colors[i][0]+"m"+e+"\x1B["+at.colors[i][1]+"m":e}function Bu(e,t){return e}function Uu(e){var t={};return e.forEach(function(i,r){t[i]=!0}),t}function Wi(e,t,i){if(e.customInspect&&t&&yr(t.inspect)&&t.inspect!==at&&!(t.constructor&&t.constructor.prototype===t)){var r=t.inspect(i,e);return Bn(r)||(r=Wi(e,r,i)),r}var o=zu(e,t);if(o)return o;var n=Object.keys(t),s=Uu(n);if(e.showHidden&&(n=Object.getOwnPropertyNames(t)),mr(t)&&(n.indexOf("message")>=0||n.indexOf("description")>=0))return _r(t);if(n.length===0){if(yr(t)){var l=t.name?": "+t.name:"";return e.stylize("[Function"+l+"]","special")}if(gr(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(Es(t))return e.stylize(Date.prototype.toString.call(t),"date");if(mr(t))return _r(t)}var f="",h=!1,c=["{","}"];if(Hu(t)&&(h=!0,c=["[","]"]),yr(t)){var g=t.name?": "+t.name:"";f=" [Function"+g+"]"}if(gr(t)&&(f=" "+RegExp.prototype.toString.call(t)),Es(t)&&(f=" "+Date.prototype.toUTCString.call(t)),mr(t)&&(f=" "+_r(t)),n.length===0&&(!h||t.length==0))return c[0]+f+c[1];if(i<0)return gr(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");e.seen.push(t);var a;return h?a=Xu(e,t,i,s,n):a=n.map(function(u){return En(e,t,i,s,u,h)}),e.seen.pop(),ju(a,f,c)}function zu(e,t){if(it(t))return e.stylize("undefined","undefined");if(Bn(t)){var i="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(i,"string")}if(Vu(t))return e.stylize(""+t,"number");if(Ea(t))return e.stylize(""+t,"boolean");if(Fn(t))return e.stylize("null","null")}function _r(e){return"["+Error.prototype.toString.call(e)+"]"}function Xu(e,t,i,r,o){for(var n=[],s=0,l=t.length;s<l;++s)Ta(t,String(s))?n.push(En(e,t,i,r,String(s),!0)):n.push("");return o.forEach(function(f){f.match(/^\d+$/)||n.push(En(e,t,i,r,f,!0))}),n}function En(e,t,i,r,o,n){var s,l,f;if(f=Object.getOwnPropertyDescriptor(t,o)||{value:t[o]},f.get?f.set?l=e.stylize("[Getter/Setter]","special"):l=e.stylize("[Getter]","special"):f.set&&(l=e.stylize("[Setter]","special")),Ta(r,o)||(s="["+o+"]"),l||(e.seen.indexOf(f.value)<0?(Fn(i)?l=Wi(e,f.value,null):l=Wi(e,f.value,i-1),l.indexOf(`
`)>-1&&(n?l=l.split(`
`).map(function(h){return"  "+h}).join(`
`).substr(2):l=`
`+l.split(`
`).map(function(h){return"   "+h}).join(`
`))):l=e.stylize("[Circular]","special")),it(s)){if(n&&o.match(/^\d+$/))return l;s=JSON.stringify(""+o),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+l}function ju(e,t,i){var r=e.reduce(function(o,n){return n.indexOf(`
`)>=0,o+n.replace(/\u001b\[\d\d?m/g,"").length+1},0);return r>60?i[0]+(t===""?"":t+`
 `)+" "+e.join(`,
  `)+" "+i[1]:i[0]+t+" "+e.join(", ")+" "+i[1]}function Hu(e){return Array.isArray(e)}function Ea(e){return typeof e=="boolean"}function Fn(e){return e===null}function Vu(e){return typeof e=="number"}function Bn(e){return typeof e=="string"}function it(e){return e===void 0}function gr(e){return Si(e)&&Un(e)==="[object RegExp]"}function Si(e){return typeof e=="object"&&e!==null}function Es(e){return Si(e)&&Un(e)==="[object Date]"}function mr(e){return Si(e)&&(Un(e)==="[object Error]"||e instanceof Error)}function yr(e){return typeof e=="function"}function Un(e){return Object.prototype.toString.call(e)}function Gu(e,t){if(!t||!Si(t))return e;for(var i=Object.keys(t),r=i.length;r--;)e[i[r]]=t[i[r]];return e}function Ta(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var Ts={},Me=[],Te=[],Wu=typeof Uint8Array<"u"?Uint8Array:Array,zn=!1;function Aa(){zn=!0;for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0,i=e.length;t<i;++t)Me[t]=e[t],Te[e.charCodeAt(t)]=t;Te[45]=62,Te[95]=63}function qu(e){zn||Aa();var t,i,r,o,n,s,l=e.length;if(l%4>0)throw new Error("Invalid string. Length must be a multiple of 4");n=e[l-2]==="="?2:e[l-1]==="="?1:0,s=new Wu(l*3/4-n),r=n>0?l-4:l;var f=0;for(t=0,i=0;t<r;t+=4,i+=3)o=Te[e.charCodeAt(t)]<<18|Te[e.charCodeAt(t+1)]<<12|Te[e.charCodeAt(t+2)]<<6|Te[e.charCodeAt(t+3)],s[f++]=o>>16&255,s[f++]=o>>8&255,s[f++]=o&255;return n===2?(o=Te[e.charCodeAt(t)]<<2|Te[e.charCodeAt(t+1)]>>4,s[f++]=o&255):n===1&&(o=Te[e.charCodeAt(t)]<<10|Te[e.charCodeAt(t+1)]<<4|Te[e.charCodeAt(t+2)]>>2,s[f++]=o>>8&255,s[f++]=o&255),s}function Zu(e){return Me[e>>18&63]+Me[e>>12&63]+Me[e>>6&63]+Me[e&63]}function Yu(e,t,i){for(var r,o=[],n=t;n<i;n+=3)r=(e[n]<<16)+(e[n+1]<<8)+e[n+2],o.push(Zu(r));return o.join("")}function As(e){zn||Aa();for(var t,i=e.length,r=i%3,o="",n=[],s=16383,l=0,f=i-r;l<f;l+=s)n.push(Yu(e,l,l+s>f?f:l+s));return r===1?(t=e[i-1],o+=Me[t>>2],o+=Me[t<<4&63],o+="=="):r===2&&(t=(e[i-2]<<8)+e[i-1],o+=Me[t>>10],o+=Me[t>>4&63],o+=Me[t<<2&63],o+="="),n.push(o),n.join("")}function rr(e,t,i,r,o){var n,s,l=o*8-r-1,f=(1<<l)-1,h=f>>1,c=-7,g=i?o-1:0,a=i?-1:1,u=e[t+g];for(g+=a,n=u&(1<<-c)-1,u>>=-c,c+=l;c>0;n=n*256+e[t+g],g+=a,c-=8);for(s=n&(1<<-c)-1,n>>=-c,c+=r;c>0;s=s*256+e[t+g],g+=a,c-=8);if(n===0)n=1-h;else{if(n===f)return s?NaN:(u?-1:1)*(1/0);s=s+Math.pow(2,r),n=n-h}return(u?-1:1)*s*Math.pow(2,n-r)}function Sa(e,t,i,r,o,n){var s,l,f,h=n*8-o-1,c=(1<<h)-1,g=c>>1,a=o===23?Math.pow(2,-24)-Math.pow(2,-77):0,u=r?0:n-1,d=r?1:-1,y=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(l=isNaN(t)?1:0,s=c):(s=Math.floor(Math.log(t)/Math.LN2),t*(f=Math.pow(2,-s))<1&&(s--,f*=2),s+g>=1?t+=a/f:t+=a*Math.pow(2,1-g),t*f>=2&&(s++,f/=2),s+g>=c?(l=0,s=c):s+g>=1?(l=(t*f-1)*Math.pow(2,o),s=s+g):(l=t*Math.pow(2,g-1)*Math.pow(2,o),s=0));o>=8;e[i+u]=l&255,u+=d,l/=256,o-=8);for(s=s<<o|l,h+=o;h>0;e[i+u]=s&255,u+=d,s/=256,h-=8);e[i+u-d]|=y*128}var Ku={}.toString,Da=Array.isArray||function(e){return Ku.call(e)=="[object Array]"};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */var $u=50;M.TYPED_ARRAY_SUPPORT=Ts.TYPED_ARRAY_SUPPORT!==void 0?Ts.TYPED_ARRAY_SUPPORT:!0;qi();function qi(){return M.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function We(e,t){if(qi()<t)throw new RangeError("Invalid typed array length");return M.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=M.prototype):(e===null&&(e=new M(t)),e.length=t),e}function M(e,t,i){if(!M.TYPED_ARRAY_SUPPORT&&!(this instanceof M))return new M(e,t,i);if(typeof e=="number"){if(typeof t=="string")throw new Error("If encoding is specified then the first argument must be a string");return Xn(this,e)}return Oa(this,e,t,i)}M.poolSize=8192;M._augment=function(e){return e.__proto__=M.prototype,e};function Oa(e,t,i,r){if(typeof t=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer?eh(e,t,i,r):typeof t=="string"?Ju(e,t,i):th(e,t)}M.from=function(e,t,i){return Oa(null,e,t,i)};M.TYPED_ARRAY_SUPPORT&&(M.prototype.__proto__=Uint8Array.prototype,M.__proto__=Uint8Array);function Ca(e){if(typeof e!="number")throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function Qu(e,t,i,r){return Ca(t),t<=0?We(e,t):i!==void 0?typeof r=="string"?We(e,t).fill(i,r):We(e,t).fill(i):We(e,t)}M.alloc=function(e,t,i){return Qu(null,e,t,i)};function Xn(e,t){if(Ca(t),e=We(e,t<0?0:jn(t)|0),!M.TYPED_ARRAY_SUPPORT)for(var i=0;i<t;++i)e[i]=0;return e}M.allocUnsafe=function(e){return Xn(null,e)};M.allocUnsafeSlow=function(e){return Xn(null,e)};function Ju(e,t,i){if((typeof i!="string"||i==="")&&(i="utf8"),!M.isEncoding(i))throw new TypeError('"encoding" must be a valid string encoding');var r=Ia(t,i)|0;e=We(e,r);var o=e.write(t,i);return o!==r&&(e=e.slice(0,o)),e}function Tn(e,t){var i=t.length<0?0:jn(t.length)|0;e=We(e,i);for(var r=0;r<i;r+=1)e[r]=t[r]&255;return e}function eh(e,t,i,r){if(t.byteLength,i<0||t.byteLength<i)throw new RangeError("'offset' is out of bounds");if(t.byteLength<i+(r||0))throw new RangeError("'length' is out of bounds");return i===void 0&&r===void 0?t=new Uint8Array(t):r===void 0?t=new Uint8Array(t,i):t=new Uint8Array(t,i,r),M.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=M.prototype):e=Tn(e,t),e}function th(e,t){if(Fe(t)){var i=jn(t.length)|0;return e=We(e,i),e.length===0||t.copy(e,0,0,i),e}if(t){if(typeof ArrayBuffer<"u"&&t.buffer instanceof ArrayBuffer||"length"in t)return typeof t.length!="number"||wh(t.length)?We(e,0):Tn(e,t);if(t.type==="Buffer"&&Da(t.data))return Tn(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function jn(e){if(e>=qi())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+qi().toString(16)+" bytes");return e|0}M.isBuffer=bh;function Fe(e){return!!(e!=null&&e._isBuffer)}M.compare=function(t,i){if(!Fe(t)||!Fe(i))throw new TypeError("Arguments must be Buffers");if(t===i)return 0;for(var r=t.length,o=i.length,n=0,s=Math.min(r,o);n<s;++n)if(t[n]!==i[n]){r=t[n],o=i[n];break}return r<o?-1:o<r?1:0};M.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};M.concat=function(t,i){if(!Da(t))throw new TypeError('"list" argument must be an Array of Buffers');if(t.length===0)return M.alloc(0);var r;if(i===void 0)for(i=0,r=0;r<t.length;++r)i+=t[r].length;var o=M.allocUnsafe(i),n=0;for(r=0;r<t.length;++r){var s=t[r];if(!Fe(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(o,n),n+=s.length}return o};function Ia(e,t){if(Fe(e))return e.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;typeof e!="string"&&(e=""+e);var i=e.length;if(i===0)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":case void 0:return Zi(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return i*2;case"hex":return i>>>1;case"base64":return Fa(e).length;default:if(r)return Zi(e).length;t=(""+t).toLowerCase(),r=!0}}M.byteLength=Ia;function ih(e,t,i){var r=!1;if((t===void 0||t<0)&&(t=0),t>this.length||((i===void 0||i>this.length)&&(i=this.length),i<=0)||(i>>>=0,t>>>=0,i<=t))return"";for(e||(e="utf8");;)switch(e){case"hex":return ch(this,t,i);case"utf8":case"utf-8":return Na(this,t,i);case"ascii":return hh(this,t,i);case"latin1":case"binary":return fh(this,t,i);case"base64":return lh(this,t,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return dh(this,t,i);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}M.prototype._isBuffer=!0;function wt(e,t,i){var r=e[t];e[t]=e[i],e[i]=r}M.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var i=0;i<t;i+=2)wt(this,i,i+1);return this};M.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var i=0;i<t;i+=4)wt(this,i,i+3),wt(this,i+1,i+2);return this};M.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var i=0;i<t;i+=8)wt(this,i,i+7),wt(this,i+1,i+6),wt(this,i+2,i+5),wt(this,i+3,i+4);return this};M.prototype.toString=function(){var t=this.length|0;return t===0?"":arguments.length===0?Na(this,0,t):ih.apply(this,arguments)};M.prototype.equals=function(t){if(!Fe(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:M.compare(this,t)===0};M.prototype.inspect=function(){var t="",i=$u;return this.length>0&&(t=this.toString("hex",0,i).match(/.{2}/g).join(" "),this.length>i&&(t+=" ... ")),"<Buffer "+t+">"};M.prototype.compare=function(t,i,r,o,n){if(!Fe(t))throw new TypeError("Argument must be a Buffer");if(i===void 0&&(i=0),r===void 0&&(r=t?t.length:0),o===void 0&&(o=0),n===void 0&&(n=this.length),i<0||r>t.length||o<0||n>this.length)throw new RangeError("out of range index");if(o>=n&&i>=r)return 0;if(o>=n)return-1;if(i>=r)return 1;if(i>>>=0,r>>>=0,o>>>=0,n>>>=0,this===t)return 0;for(var s=n-o,l=r-i,f=Math.min(s,l),h=this.slice(o,n),c=t.slice(i,r),g=0;g<f;++g)if(h[g]!==c[g]){s=h[g],l=c[g];break}return s<l?-1:l<s?1:0};function La(e,t,i,r,o){if(e.length===0)return-1;if(typeof i=="string"?(r=i,i=0):i>2147483647?i=2147483647:i<-2147483648&&(i=-2147483648),i=+i,isNaN(i)&&(i=o?0:e.length-1),i<0&&(i=e.length+i),i>=e.length){if(o)return-1;i=e.length-1}else if(i<0)if(o)i=0;else return-1;if(typeof t=="string"&&(t=M.from(t,r)),Fe(t))return t.length===0?-1:Ss(e,t,i,r,o);if(typeof t=="number")return t=t&255,M.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?o?Uint8Array.prototype.indexOf.call(e,t,i):Uint8Array.prototype.lastIndexOf.call(e,t,i):Ss(e,[t],i,r,o);throw new TypeError("val must be string, number or Buffer")}function Ss(e,t,i,r,o){var n=1,s=e.length,l=t.length;if(r!==void 0&&(r=String(r).toLowerCase(),r==="ucs2"||r==="ucs-2"||r==="utf16le"||r==="utf-16le")){if(e.length<2||t.length<2)return-1;n=2,s/=2,l/=2,i/=2}function f(u,d){return n===1?u[d]:u.readUInt16BE(d*n)}var h;if(o){var c=-1;for(h=i;h<s;h++)if(f(e,h)===f(t,c===-1?0:h-c)){if(c===-1&&(c=h),h-c+1===l)return c*n}else c!==-1&&(h-=h-c),c=-1}else for(i+l>s&&(i=s-l),h=i;h>=0;h--){for(var g=!0,a=0;a<l;a++)if(f(e,h+a)!==f(t,a)){g=!1;break}if(g)return h}return-1}M.prototype.includes=function(t,i,r){return this.indexOf(t,i,r)!==-1};M.prototype.indexOf=function(t,i,r){return La(this,t,i,r,!0)};M.prototype.lastIndexOf=function(t,i,r){return La(this,t,i,r,!1)};function rh(e,t,i,r){i=Number(i)||0;var o=e.length-i;r?(r=Number(r),r>o&&(r=o)):r=o;var n=t.length;if(n%2!==0)throw new TypeError("Invalid hex string");r>n/2&&(r=n/2);for(var s=0;s<r;++s){var l=parseInt(t.substr(s*2,2),16);if(isNaN(l))return s;e[i+s]=l}return s}function nh(e,t,i,r){return or(Zi(t,e.length-i),e,i,r)}function Ra(e,t,i,r){return or(yh(t),e,i,r)}function sh(e,t,i,r){return Ra(e,t,i,r)}function oh(e,t,i,r){return or(Fa(t),e,i,r)}function ah(e,t,i,r){return or(vh(t,e.length-i),e,i,r)}M.prototype.write=function(t,i,r,o){if(i===void 0)o="utf8",r=this.length,i=0;else if(r===void 0&&typeof i=="string")o=i,r=this.length,i=0;else if(isFinite(i))i=i|0,isFinite(r)?(r=r|0,o===void 0&&(o="utf8")):(o=r,r=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var n=this.length-i;if((r===void 0||r>n)&&(r=n),t.length>0&&(r<0||i<0)||i>this.length)throw new RangeError("Attempt to write outside buffer bounds");o||(o="utf8");for(var s=!1;;)switch(o){case"hex":return rh(this,t,i,r);case"utf8":case"utf-8":return nh(this,t,i,r);case"ascii":return Ra(this,t,i,r);case"latin1":case"binary":return sh(this,t,i,r);case"base64":return oh(this,t,i,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ah(this,t,i,r);default:if(s)throw new TypeError("Unknown encoding: "+o);o=(""+o).toLowerCase(),s=!0}};M.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function lh(e,t,i){return t===0&&i===e.length?As(e):As(e.slice(t,i))}function Na(e,t,i){i=Math.min(e.length,i);for(var r=[],o=t;o<i;){var n=e[o],s=null,l=n>239?4:n>223?3:n>191?2:1;if(o+l<=i){var f,h,c,g;switch(l){case 1:n<128&&(s=n);break;case 2:f=e[o+1],(f&192)===128&&(g=(n&31)<<6|f&63,g>127&&(s=g));break;case 3:f=e[o+1],h=e[o+2],(f&192)===128&&(h&192)===128&&(g=(n&15)<<12|(f&63)<<6|h&63,g>2047&&(g<55296||g>57343)&&(s=g));break;case 4:f=e[o+1],h=e[o+2],c=e[o+3],(f&192)===128&&(h&192)===128&&(c&192)===128&&(g=(n&15)<<18|(f&63)<<12|(h&63)<<6|c&63,g>65535&&g<1114112&&(s=g))}}s===null?(s=65533,l=1):s>65535&&(s-=65536,r.push(s>>>10&1023|55296),s=56320|s&1023),r.push(s),o+=l}return uh(r)}var Ds=4096;function uh(e){var t=e.length;if(t<=Ds)return String.fromCharCode.apply(String,e);for(var i="",r=0;r<t;)i+=String.fromCharCode.apply(String,e.slice(r,r+=Ds));return i}function hh(e,t,i){var r="";i=Math.min(e.length,i);for(var o=t;o<i;++o)r+=String.fromCharCode(e[o]&127);return r}function fh(e,t,i){var r="";i=Math.min(e.length,i);for(var o=t;o<i;++o)r+=String.fromCharCode(e[o]);return r}function ch(e,t,i){var r=e.length;(!t||t<0)&&(t=0),(!i||i<0||i>r)&&(i=r);for(var o="",n=t;n<i;++n)o+=mh(e[n]);return o}function dh(e,t,i){for(var r=e.slice(t,i),o="",n=0;n<r.length;n+=2)o+=String.fromCharCode(r[n]+r[n+1]*256);return o}M.prototype.slice=function(t,i){var r=this.length;t=~~t,i=i===void 0?r:~~i,t<0?(t+=r,t<0&&(t=0)):t>r&&(t=r),i<0?(i+=r,i<0&&(i=0)):i>r&&(i=r),i<t&&(i=t);var o;if(M.TYPED_ARRAY_SUPPORT)o=this.subarray(t,i),o.__proto__=M.prototype;else{var n=i-t;o=new M(n,void 0);for(var s=0;s<n;++s)o[s]=this[s+t]}return o};function ue(e,t,i){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>i)throw new RangeError("Trying to access beyond buffer length")}M.prototype.readUIntLE=function(t,i,r){t=t|0,i=i|0,r||ue(t,i,this.length);for(var o=this[t],n=1,s=0;++s<i&&(n*=256);)o+=this[t+s]*n;return o};M.prototype.readUIntBE=function(t,i,r){t=t|0,i=i|0,r||ue(t,i,this.length);for(var o=this[t+--i],n=1;i>0&&(n*=256);)o+=this[t+--i]*n;return o};M.prototype.readUInt8=function(t,i){return i||ue(t,1,this.length),this[t]};M.prototype.readUInt16LE=function(t,i){return i||ue(t,2,this.length),this[t]|this[t+1]<<8};M.prototype.readUInt16BE=function(t,i){return i||ue(t,2,this.length),this[t]<<8|this[t+1]};M.prototype.readUInt32LE=function(t,i){return i||ue(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+this[t+3]*16777216};M.prototype.readUInt32BE=function(t,i){return i||ue(t,4,this.length),this[t]*16777216+(this[t+1]<<16|this[t+2]<<8|this[t+3])};M.prototype.readIntLE=function(t,i,r){t=t|0,i=i|0,r||ue(t,i,this.length);for(var o=this[t],n=1,s=0;++s<i&&(n*=256);)o+=this[t+s]*n;return n*=128,o>=n&&(o-=Math.pow(2,8*i)),o};M.prototype.readIntBE=function(t,i,r){t=t|0,i=i|0,r||ue(t,i,this.length);for(var o=i,n=1,s=this[t+--o];o>0&&(n*=256);)s+=this[t+--o]*n;return n*=128,s>=n&&(s-=Math.pow(2,8*i)),s};M.prototype.readInt8=function(t,i){return i||ue(t,1,this.length),this[t]&128?(255-this[t]+1)*-1:this[t]};M.prototype.readInt16LE=function(t,i){i||ue(t,2,this.length);var r=this[t]|this[t+1]<<8;return r&32768?r|4294901760:r};M.prototype.readInt16BE=function(t,i){i||ue(t,2,this.length);var r=this[t+1]|this[t]<<8;return r&32768?r|4294901760:r};M.prototype.readInt32LE=function(t,i){return i||ue(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24};M.prototype.readInt32BE=function(t,i){return i||ue(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]};M.prototype.readFloatLE=function(t,i){return i||ue(t,4,this.length),rr(this,t,!0,23,4)};M.prototype.readFloatBE=function(t,i){return i||ue(t,4,this.length),rr(this,t,!1,23,4)};M.prototype.readDoubleLE=function(t,i){return i||ue(t,8,this.length),rr(this,t,!0,52,8)};M.prototype.readDoubleBE=function(t,i){return i||ue(t,8,this.length),rr(this,t,!1,52,8)};function ye(e,t,i,r,o,n){if(!Fe(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<n)throw new RangeError('"value" argument is out of bounds');if(i+r>e.length)throw new RangeError("Index out of range")}M.prototype.writeUIntLE=function(t,i,r,o){if(t=+t,i=i|0,r=r|0,!o){var n=Math.pow(2,8*r)-1;ye(this,t,i,r,n,0)}var s=1,l=0;for(this[i]=t&255;++l<r&&(s*=256);)this[i+l]=t/s&255;return i+r};M.prototype.writeUIntBE=function(t,i,r,o){if(t=+t,i=i|0,r=r|0,!o){var n=Math.pow(2,8*r)-1;ye(this,t,i,r,n,0)}var s=r-1,l=1;for(this[i+s]=t&255;--s>=0&&(l*=256);)this[i+s]=t/l&255;return i+r};M.prototype.writeUInt8=function(t,i,r){return t=+t,i=i|0,r||ye(this,t,i,1,255,0),M.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[i]=t&255,i+1};function nr(e,t,i,r){t<0&&(t=65535+t+1);for(var o=0,n=Math.min(e.length-i,2);o<n;++o)e[i+o]=(t&255<<8*(r?o:1-o))>>>(r?o:1-o)*8}M.prototype.writeUInt16LE=function(t,i,r){return t=+t,i=i|0,r||ye(this,t,i,2,65535,0),M.TYPED_ARRAY_SUPPORT?(this[i]=t&255,this[i+1]=t>>>8):nr(this,t,i,!0),i+2};M.prototype.writeUInt16BE=function(t,i,r){return t=+t,i=i|0,r||ye(this,t,i,2,65535,0),M.TYPED_ARRAY_SUPPORT?(this[i]=t>>>8,this[i+1]=t&255):nr(this,t,i,!1),i+2};function sr(e,t,i,r){t<0&&(t=4294967295+t+1);for(var o=0,n=Math.min(e.length-i,4);o<n;++o)e[i+o]=t>>>(r?o:3-o)*8&255}M.prototype.writeUInt32LE=function(t,i,r){return t=+t,i=i|0,r||ye(this,t,i,4,4294967295,0),M.TYPED_ARRAY_SUPPORT?(this[i+3]=t>>>24,this[i+2]=t>>>16,this[i+1]=t>>>8,this[i]=t&255):sr(this,t,i,!0),i+4};M.prototype.writeUInt32BE=function(t,i,r){return t=+t,i=i|0,r||ye(this,t,i,4,4294967295,0),M.TYPED_ARRAY_SUPPORT?(this[i]=t>>>24,this[i+1]=t>>>16,this[i+2]=t>>>8,this[i+3]=t&255):sr(this,t,i,!1),i+4};M.prototype.writeIntLE=function(t,i,r,o){if(t=+t,i=i|0,!o){var n=Math.pow(2,8*r-1);ye(this,t,i,r,n-1,-n)}var s=0,l=1,f=0;for(this[i]=t&255;++s<r&&(l*=256);)t<0&&f===0&&this[i+s-1]!==0&&(f=1),this[i+s]=(t/l>>0)-f&255;return i+r};M.prototype.writeIntBE=function(t,i,r,o){if(t=+t,i=i|0,!o){var n=Math.pow(2,8*r-1);ye(this,t,i,r,n-1,-n)}var s=r-1,l=1,f=0;for(this[i+s]=t&255;--s>=0&&(l*=256);)t<0&&f===0&&this[i+s+1]!==0&&(f=1),this[i+s]=(t/l>>0)-f&255;return i+r};M.prototype.writeInt8=function(t,i,r){return t=+t,i=i|0,r||ye(this,t,i,1,127,-128),M.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[i]=t&255,i+1};M.prototype.writeInt16LE=function(t,i,r){return t=+t,i=i|0,r||ye(this,t,i,2,32767,-32768),M.TYPED_ARRAY_SUPPORT?(this[i]=t&255,this[i+1]=t>>>8):nr(this,t,i,!0),i+2};M.prototype.writeInt16BE=function(t,i,r){return t=+t,i=i|0,r||ye(this,t,i,2,32767,-32768),M.TYPED_ARRAY_SUPPORT?(this[i]=t>>>8,this[i+1]=t&255):nr(this,t,i,!1),i+2};M.prototype.writeInt32LE=function(t,i,r){return t=+t,i=i|0,r||ye(this,t,i,4,2147483647,-2147483648),M.TYPED_ARRAY_SUPPORT?(this[i]=t&255,this[i+1]=t>>>8,this[i+2]=t>>>16,this[i+3]=t>>>24):sr(this,t,i,!0),i+4};M.prototype.writeInt32BE=function(t,i,r){return t=+t,i=i|0,r||ye(this,t,i,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),M.TYPED_ARRAY_SUPPORT?(this[i]=t>>>24,this[i+1]=t>>>16,this[i+2]=t>>>8,this[i+3]=t&255):sr(this,t,i,!1),i+4};function Ma(e,t,i,r,o,n){if(i+r>e.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function Pa(e,t,i,r,o){return o||Ma(e,t,i,4),Sa(e,t,i,r,23,4),i+4}M.prototype.writeFloatLE=function(t,i,r){return Pa(this,t,i,!0,r)};M.prototype.writeFloatBE=function(t,i,r){return Pa(this,t,i,!1,r)};function ka(e,t,i,r,o){return o||Ma(e,t,i,8),Sa(e,t,i,r,52,8),i+8}M.prototype.writeDoubleLE=function(t,i,r){return ka(this,t,i,!0,r)};M.prototype.writeDoubleBE=function(t,i,r){return ka(this,t,i,!1,r)};M.prototype.copy=function(t,i,r,o){if(r||(r=0),!o&&o!==0&&(o=this.length),i>=t.length&&(i=t.length),i||(i=0),o>0&&o<r&&(o=r),o===r||t.length===0||this.length===0)return 0;if(i<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(o<0)throw new RangeError("sourceEnd out of bounds");o>this.length&&(o=this.length),t.length-i<o-r&&(o=t.length-i+r);var n=o-r,s;if(this===t&&r<i&&i<o)for(s=n-1;s>=0;--s)t[s+i]=this[s+r];else if(n<1e3||!M.TYPED_ARRAY_SUPPORT)for(s=0;s<n;++s)t[s+i]=this[s+r];else Uint8Array.prototype.set.call(t,this.subarray(r,r+n),i);return n};M.prototype.fill=function(t,i,r,o){if(typeof t=="string"){if(typeof i=="string"?(o=i,i=0,r=this.length):typeof r=="string"&&(o=r,r=this.length),t.length===1){var n=t.charCodeAt(0);n<256&&(t=n)}if(o!==void 0&&typeof o!="string")throw new TypeError("encoding must be a string");if(typeof o=="string"&&!M.isEncoding(o))throw new TypeError("Unknown encoding: "+o)}else typeof t=="number"&&(t=t&255);if(i<0||this.length<i||this.length<r)throw new RangeError("Out of range index");if(r<=i)return this;i=i>>>0,r=r===void 0?this.length:r>>>0,t||(t=0);var s;if(typeof t=="number")for(s=i;s<r;++s)this[s]=t;else{var l=Fe(t)?t:Zi(new M(t,o).toString()),f=l.length;for(s=0;s<r-i;++s)this[s+i]=l[s%f]}return this};var ph=/[^+\/0-9A-Za-z-_]/g;function _h(e){if(e=gh(e).replace(ph,""),e.length<2)return"";for(;e.length%4!==0;)e=e+"=";return e}function gh(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function mh(e){return e<16?"0"+e.toString(16):e.toString(16)}function Zi(e,t){t=t||1/0;for(var i,r=e.length,o=null,n=[],s=0;s<r;++s){if(i=e.charCodeAt(s),i>55295&&i<57344){if(!o){if(i>56319){(t-=3)>-1&&n.push(239,191,189);continue}else if(s+1===r){(t-=3)>-1&&n.push(239,191,189);continue}o=i;continue}if(i<56320){(t-=3)>-1&&n.push(239,191,189),o=i;continue}i=(o-55296<<10|i-56320)+65536}else o&&(t-=3)>-1&&n.push(239,191,189);if(o=null,i<128){if((t-=1)<0)break;n.push(i)}else if(i<2048){if((t-=2)<0)break;n.push(i>>6|192,i&63|128)}else if(i<65536){if((t-=3)<0)break;n.push(i>>12|224,i>>6&63|128,i&63|128)}else if(i<1114112){if((t-=4)<0)break;n.push(i>>18|240,i>>12&63|128,i>>6&63|128,i&63|128)}else throw new Error("Invalid code point")}return n}function yh(e){for(var t=[],i=0;i<e.length;++i)t.push(e.charCodeAt(i)&255);return t}function vh(e,t){for(var i,r,o,n=[],s=0;s<e.length&&!((t-=2)<0);++s)i=e.charCodeAt(s),r=i>>8,o=i%256,n.push(o),n.push(r);return n}function Fa(e){return qu(_h(e))}function or(e,t,i,r){for(var o=0;o<r&&!(o+i>=t.length||o>=e.length);++o)t[o+i]=e[o];return o}function wh(e){return e!==e}function bh(e){return e!=null&&(!!e._isBuffer||Ba(e)||xh(e))}function Ba(e){return!!e.constructor&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function xh(e){return typeof e.readFloatLE=="function"&&typeof e.slice=="function"&&Ba(e.slice(0,0))}function Nt(){this.head=null,this.tail=null,this.length=0}Nt.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length};Nt.prototype.unshift=function(e){var t={data:e,next:this.head};this.length===0&&(this.tail=t),this.head=t,++this.length};Nt.prototype.shift=function(){if(this.length!==0){var e=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,e}};Nt.prototype.clear=function(){this.head=this.tail=null,this.length=0};Nt.prototype.join=function(e){if(this.length===0)return"";for(var t=this.head,i=""+t.data;t=t.next;)i+=e+t.data;return i};Nt.prototype.concat=function(e){if(this.length===0)return M.alloc(0);if(this.length===1)return this.head.data;for(var t=M.allocUnsafe(e>>>0),i=this.head,r=0;i;)i.data.copy(t,r),r+=i.data.length,i=i.next;return t};var Eh=M.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function Th(e){if(e&&!Eh(e))throw new Error("Unknown encoding: "+e)}function ei(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),Th(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=Sh;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=Dh;break;default:this.write=Ah;return}this.charBuffer=new M(6),this.charReceived=0,this.charLength=0}ei.prototype.write=function(e){for(var t="";this.charLength;){var i=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,0,i),this.charReceived+=i,this.charReceived<this.charLength)return"";e=e.slice(i,e.length),t=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var o=t.charCodeAt(t.length-1);if(o>=55296&&o<=56319){this.charLength+=this.surrogateSize,t="";continue}if(this.charReceived=this.charLength=0,e.length===0)return t;break}this.detectIncompleteChar(e);var r=e.length;this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,r),r-=this.charReceived),t+=e.toString(this.encoding,0,r);var r=t.length-1,o=t.charCodeAt(r);if(o>=55296&&o<=56319){var n=this.surrogateSize;return this.charLength+=n,this.charReceived+=n,this.charBuffer.copy(this.charBuffer,n,0,n),e.copy(this.charBuffer,0,0,n),t.substring(0,r)}return t};ei.prototype.detectIncompleteChar=function(e){for(var t=e.length>=3?3:e.length;t>0;t--){var i=e[e.length-t];if(t==1&&i>>5==6){this.charLength=2;break}if(t<=2&&i>>4==14){this.charLength=3;break}if(t<=3&&i>>3==30){this.charLength=4;break}}this.charReceived=t};ei.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var i=this.charReceived,r=this.charBuffer,o=this.encoding;t+=r.slice(0,i).toString(o)}return t};function Ah(e){return e.toString(this.encoding)}function Sh(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0}function Dh(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0}const Oh=Object.freeze(Object.defineProperty({__proto__:null,StringDecoder:ei},Symbol.toStringTag,{value:"Module"}));re.ReadableState=Ua;var ee=ku("stream");me(re,Z);function Ch(e,t,i){if(typeof e.prependListener=="function")return e.prependListener(t,i);!e._events||!e._events[t]?e.on(t,i):Array.isArray(e._events[t])?e._events[t].unshift(i):e._events[t]=[i,e._events[t]]}function Ih(e,t){return e.listeners(t).length}function Ua(e,t){e=e||{},this.objectMode=!!e.objectMode,t instanceof be&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var i=e.highWaterMark,r=this.objectMode?16:16*1024;this.highWaterMark=i||i===0?i:r,this.highWaterMark=~~this.highWaterMark,this.buffer=new Nt,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(this.decoder=new ei(e.encoding),this.encoding=e.encoding)}function re(e){if(!(this instanceof re))return new re(e);this._readableState=new Ua(e,this),this.readable=!0,e&&typeof e.read=="function"&&(this._read=e.read),Z.call(this)}re.prototype.push=function(e,t){var i=this._readableState;return!i.objectMode&&typeof e=="string"&&(t=t||i.defaultEncoding,t!==i.encoding&&(e=Buffer.from(e,t),t="")),za(this,i,e,t,!1)};re.prototype.unshift=function(e){var t=this._readableState;return za(this,t,e,"",!0)};re.prototype.isPaused=function(){return this._readableState.flowing===!1};function za(e,t,i,r,o){var n=Nh(t,i);if(n)e.emit("error",n);else if(i===null)t.reading=!1,Mh(e,t);else if(t.objectMode||i&&i.length>0)if(t.ended&&!o){var s=new Error("stream.push() after EOF");e.emit("error",s)}else if(t.endEmitted&&o){var l=new Error("stream.unshift() after end event");e.emit("error",l)}else{var f;t.decoder&&!o&&!r&&(i=t.decoder.write(i),f=!t.objectMode&&i.length===0),o||(t.reading=!1),f||(t.flowing&&t.length===0&&!t.sync?(e.emit("data",i),e.read(0)):(t.length+=t.objectMode?1:i.length,o?t.buffer.unshift(i):t.buffer.push(i),t.needReadable&&ar(e))),Ph(e,t)}else o||(t.reading=!1);return Lh(t)}function Lh(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||e.length===0)}re.prototype.setEncoding=function(e){return this._readableState.decoder=new ei(e),this._readableState.encoding=e,this};var Os=8388608;function Rh(e){return e>=Os?e=Os:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function Cs(e,t){return e<=0||t.length===0&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=Rh(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}re.prototype.read=function(e){ee("read",e),e=parseInt(e,10);var t=this._readableState,i=e;if(e!==0&&(t.emittedReadable=!1),e===0&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return ee("read: emitReadable",t.length,t.ended),t.length===0&&t.ended?vr(this):ar(this),null;if(e=Cs(e,t),e===0&&t.ended)return t.length===0&&vr(this),null;var r=t.needReadable;ee("need readable",r),(t.length===0||t.length-e<t.highWaterMark)&&(r=!0,ee("length less than watermark",r)),t.ended||t.reading?(r=!1,ee("reading or ended",r)):r&&(ee("do read"),t.reading=!0,t.sync=!0,t.length===0&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=Cs(i,t)));var o;return e>0?o=Xa(e,t):o=null,o===null?(t.needReadable=!0,e=0):t.length-=e,t.length===0&&(t.ended||(t.needReadable=!0),i!==e&&t.ended&&vr(this)),o!==null&&this.emit("data",o),o};function Nh(e,t){var i=null;return!Buffer.isBuffer(t)&&typeof t!="string"&&t!==null&&t!==void 0&&!e.objectMode&&(i=new TypeError("Invalid non-string/buffer chunk")),i}function Mh(e,t){if(!t.ended){if(t.decoder){var i=t.decoder.end();i&&i.length&&(t.buffer.push(i),t.length+=t.objectMode?1:i.length)}t.ended=!0,ar(e)}}function ar(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(ee("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?Ee(Is,e):Is(e))}function Is(e){ee("emit readable"),e.emit("readable"),Hn(e)}function Ph(e,t){t.readingMore||(t.readingMore=!0,Ee(kh,e,t))}function kh(e,t){for(var i=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(ee("maybeReadMore read 0"),e.read(0),i!==t.length);)i=t.length;t.readingMore=!1}re.prototype._read=function(e){this.emit("error",new Error("not implemented"))};re.prototype.pipe=function(e,t){var i=this,r=this._readableState;switch(r.pipesCount){case 0:r.pipes=e;break;case 1:r.pipes=[r.pipes,e];break;default:r.pipes.push(e);break}r.pipesCount+=1,ee("pipe count=%d opts=%j",r.pipesCount,t);var o=!t||t.end!==!1,n=o?l:c;r.endEmitted?Ee(n):i.once("end",n),e.on("unpipe",s);function s(E){ee("onunpipe"),E===i&&c()}function l(){ee("onend"),e.end()}var f=Fh(i);e.on("drain",f);var h=!1;function c(){ee("cleanup"),e.removeListener("close",d),e.removeListener("finish",y),e.removeListener("drain",f),e.removeListener("error",u),e.removeListener("unpipe",s),i.removeListener("end",l),i.removeListener("end",c),i.removeListener("data",a),h=!0,r.awaitDrain&&(!e._writableState||e._writableState.needDrain)&&f()}var g=!1;i.on("data",a);function a(E){ee("ondata"),g=!1;var v=e.write(E);v===!1&&!g&&((r.pipesCount===1&&r.pipes===e||r.pipesCount>1&&ja(r.pipes,e)!==-1)&&!h&&(ee("false write response, pause",i._readableState.awaitDrain),i._readableState.awaitDrain++,g=!0),i.pause())}function u(E){ee("onerror",E),b(),e.removeListener("error",u),Ih(e,"error")===0&&e.emit("error",E)}Ch(e,"error",u);function d(){e.removeListener("finish",y),b()}e.once("close",d);function y(){ee("onfinish"),e.removeListener("close",d),b()}e.once("finish",y);function b(){ee("unpipe"),i.unpipe(e)}return e.emit("pipe",i),r.flowing||(ee("pipe resume"),i.resume()),e};function Fh(e){return function(){var t=e._readableState;ee("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,t.awaitDrain===0&&e.listeners("data").length&&(t.flowing=!0,Hn(e))}}re.prototype.unpipe=function(e){var t=this._readableState;if(t.pipesCount===0)return this;if(t.pipesCount===1)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this),this);if(!e){var i=t.pipes,r=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<r;o++)i[o].emit("unpipe",this);return this}var n=ja(t.pipes,e);return n===-1?this:(t.pipes.splice(n,1),t.pipesCount-=1,t.pipesCount===1&&(t.pipes=t.pipes[0]),e.emit("unpipe",this),this)};re.prototype.on=function(e,t){var i=Z.prototype.on.call(this,e,t);if(e==="data")this._readableState.flowing!==!1&&this.resume();else if(e==="readable"){var r=this._readableState;!r.endEmitted&&!r.readableListening&&(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&ar(this):Ee(Bh,this))}return i};re.prototype.addListener=re.prototype.on;function Bh(e){ee("readable nexttick read 0"),e.read(0)}re.prototype.resume=function(){var e=this._readableState;return e.flowing||(ee("resume"),e.flowing=!0,Uh(this,e)),this};function Uh(e,t){t.resumeScheduled||(t.resumeScheduled=!0,Ee(zh,e,t))}function zh(e,t){t.reading||(ee("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),Hn(e),t.flowing&&!t.reading&&e.read(0)}re.prototype.pause=function(){return ee("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(ee("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function Hn(e){var t=e._readableState;for(ee("flow",t.flowing);t.flowing&&e.read()!==null;);}re.prototype.wrap=function(e){var t=this._readableState,i=!1,r=this;e.on("end",function(){if(ee("wrapped end"),t.decoder&&!t.ended){var s=t.decoder.end();s&&s.length&&r.push(s)}r.push(null)}),e.on("data",function(s){if(ee("wrapped data"),t.decoder&&(s=t.decoder.write(s)),!(t.objectMode&&s==null)&&!(!t.objectMode&&(!s||!s.length))){var l=r.push(s);l||(i=!0,e.pause())}});for(var o in e)this[o]===void 0&&typeof e[o]=="function"&&(this[o]=function(s){return function(){return e[s].apply(e,arguments)}}(o));var n=["error","close","destroy","pause","resume"];return Gh(n,function(s){e.on(s,r.emit.bind(r,s))}),r._read=function(s){ee("wrapped _read",s),i&&(i=!1,e.resume())},r};re._fromList=Xa;function Xa(e,t){if(t.length===0)return null;var i;return t.objectMode?i=t.buffer.shift():!e||e>=t.length?(t.decoder?i=t.buffer.join(""):t.buffer.length===1?i=t.buffer.head.data:i=t.buffer.concat(t.length),t.buffer.clear()):i=Xh(e,t.buffer,t.decoder),i}function Xh(e,t,i){var r;return e<t.head.data.length?(r=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):e===t.head.data.length?r=t.shift():r=i?jh(e,t):Hh(e,t),r}function jh(e,t){var i=t.head,r=1,o=i.data;for(e-=o.length;i=i.next;){var n=i.data,s=e>n.length?n.length:e;if(s===n.length?o+=n:o+=n.slice(0,e),e-=s,e===0){s===n.length?(++r,i.next?t.head=i.next:t.head=t.tail=null):(t.head=i,i.data=n.slice(s));break}++r}return t.length-=r,o}function Hh(e,t){var i=Buffer.allocUnsafe(e),r=t.head,o=1;for(r.data.copy(i),e-=r.data.length;r=r.next;){var n=r.data,s=e>n.length?n.length:e;if(n.copy(i,i.length-e,0,s),e-=s,e===0){s===n.length?(++o,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=n.slice(s));break}++o}return t.length-=o,i}function vr(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,Ee(Vh,t,e))}function Vh(e,t){!e.endEmitted&&e.length===0&&(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function Gh(e,t){for(var i=0,r=e.length;i<r;i++)t(e[i],i)}function ja(e,t){for(var i=0,r=e.length;i<r;i++)if(e[i]===t)return i;return-1}de.WritableState=Vn;me(de,Z);function Wh(){}function qh(e,t,i){this.chunk=e,this.encoding=t,this.callback=i,this.next=null}function Vn(e,t){Object.defineProperty(this,"buffer",{get:xa(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")}),e=e||{},this.objectMode=!!e.objectMode,t instanceof be&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var i=e.highWaterMark,r=this.objectMode?16:16*1024;this.highWaterMark=i||i===0?i:r,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var o=e.decodeStrings===!1;this.decodeStrings=!o,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(n){ef(t,n)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new Wa(this)}Vn.prototype.getBuffer=function(){for(var t=this.bufferedRequest,i=[];t;)i.push(t),t=t.next;return i};function de(e){if(!(this instanceof de)&&!(this instanceof be))return new de(e);this._writableState=new Vn(e,this),this.writable=!0,e&&(typeof e.write=="function"&&(this._write=e.write),typeof e.writev=="function"&&(this._writev=e.writev)),Z.call(this)}de.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function Zh(e,t){var i=new Error("write after end");e.emit("error",i),Ee(t,i)}function Yh(e,t,i,r){var o=!0,n=!1;return i===null?n=new TypeError("May not write null values to stream"):!M.isBuffer(i)&&typeof i!="string"&&i!==void 0&&!t.objectMode&&(n=new TypeError("Invalid non-string/buffer chunk")),n&&(e.emit("error",n),Ee(r,n),o=!1),o}de.prototype.write=function(e,t,i){var r=this._writableState,o=!1;return typeof t=="function"&&(i=t,t=null),M.isBuffer(e)?t="buffer":t||(t=r.defaultEncoding),typeof i!="function"&&(i=Wh),r.ended?Zh(this,i):Yh(this,r,e,i)&&(r.pendingcb++,o=$h(this,r,e,t,i)),o};de.prototype.cork=function(){var e=this._writableState;e.corked++};de.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,!e.writing&&!e.corked&&!e.finished&&!e.bufferProcessing&&e.bufferedRequest&&Ha(this,e))};de.prototype.setDefaultEncoding=function(t){if(typeof t=="string"&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this};function Kh(e,t,i){return!e.objectMode&&e.decodeStrings!==!1&&typeof t=="string"&&(t=M.from(t,i)),t}function $h(e,t,i,r,o){i=Kh(t,i,r),M.isBuffer(i)&&(r="buffer");var n=t.objectMode?1:i.length;t.length+=n;var s=t.length<t.highWaterMark;if(s||(t.needDrain=!0),t.writing||t.corked){var l=t.lastBufferedRequest;t.lastBufferedRequest=new qh(i,r,o),l?l.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else An(e,t,!1,n,i,r,o);return s}function An(e,t,i,r,o,n,s){t.writelen=r,t.writecb=s,t.writing=!0,t.sync=!0,i?e._writev(o,t.onwrite):e._write(o,n,t.onwrite),t.sync=!1}function Qh(e,t,i,r,o){--t.pendingcb,i?Ee(o,r):o(r),e._writableState.errorEmitted=!0,e.emit("error",r)}function Jh(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function ef(e,t){var i=e._writableState,r=i.sync,o=i.writecb;if(Jh(i),t)Qh(e,i,r,t,o);else{var n=Va(i);!n&&!i.corked&&!i.bufferProcessing&&i.bufferedRequest&&Ha(e,i),r?Ee(Ls,e,i,n,o):Ls(e,i,n,o)}}function Ls(e,t,i,r){i||tf(e,t),t.pendingcb--,r(),Ga(e,t)}function tf(e,t){t.length===0&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function Ha(e,t){t.bufferProcessing=!0;var i=t.bufferedRequest;if(e._writev&&i&&i.next){var r=t.bufferedRequestCount,o=new Array(r),n=t.corkedRequestsFree;n.entry=i;for(var s=0;i;)o[s]=i,i=i.next,s+=1;An(e,t,!0,t.length,o,"",n.finish),t.pendingcb++,t.lastBufferedRequest=null,n.next?(t.corkedRequestsFree=n.next,n.next=null):t.corkedRequestsFree=new Wa(t)}else{for(;i;){var l=i.chunk,f=i.encoding,h=i.callback,c=t.objectMode?1:l.length;if(An(e,t,!1,c,l,f,h),i=i.next,t.writing)break}i===null&&(t.lastBufferedRequest=null)}t.bufferedRequestCount=0,t.bufferedRequest=i,t.bufferProcessing=!1}de.prototype._write=function(e,t,i){i(new Error("not implemented"))};de.prototype._writev=null;de.prototype.end=function(e,t,i){var r=this._writableState;typeof e=="function"?(i=e,e=null,t=null):typeof t=="function"&&(i=t,t=null),e!=null&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),!r.ending&&!r.finished&&rf(this,r,i)};function Va(e){return e.ending&&e.length===0&&e.bufferedRequest===null&&!e.finished&&!e.writing}function Rs(e,t){t.prefinished||(t.prefinished=!0,e.emit("prefinish"))}function Ga(e,t){var i=Va(t);return i&&(t.pendingcb===0?(Rs(e,t),t.finished=!0,e.emit("finish")):Rs(e,t)),i}function rf(e,t,i){t.ending=!0,Ga(e,t),i&&(t.finished?Ee(i):e.once("finish",i)),t.ended=!0,e.writable=!1}function Wa(e){var t=this;this.next=null,this.entry=null,this.finish=function(i){var r=t.entry;for(t.entry=null;r;){var o=r.callback;e.pendingcb--,o(i),r=r.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}}me(be,re);var Ns=Object.keys(de.prototype);for(var wr=0;wr<Ns.length;wr++){var br=Ns[wr];be.prototype[br]||(be.prototype[br]=de.prototype[br])}function be(e){if(!(this instanceof be))return new be(e);re.call(this,e),de.call(this,e),e&&e.readable===!1&&(this.readable=!1),e&&e.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,e&&e.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",nf)}function nf(){this.allowHalfOpen||this._writableState.ended||Ee(sf,this)}function sf(e){e.end()}me(xe,be);function of(e){this.afterTransform=function(t,i){return af(e,t,i)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function af(e,t,i){var r=e._transformState;r.transforming=!1;var o=r.writecb;if(!o)return e.emit("error",new Error("no writecb in Transform class"));r.writechunk=null,r.writecb=null,i!=null&&e.push(i),o(t);var n=e._readableState;n.reading=!1,(n.needReadable||n.length<n.highWaterMark)&&e._read(n.highWaterMark)}function xe(e){if(!(this instanceof xe))return new xe(e);be.call(this,e),this._transformState=new of(this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,e&&(typeof e.transform=="function"&&(this._transform=e.transform),typeof e.flush=="function"&&(this._flush=e.flush)),this.once("prefinish",function(){typeof this._flush=="function"?this._flush(function(i){Ms(t,i)}):Ms(t)})}xe.prototype.push=function(e,t){return this._transformState.needTransform=!1,be.prototype.push.call(this,e,t)};xe.prototype._transform=function(e,t,i){throw new Error("Not implemented")};xe.prototype._write=function(e,t,i){var r=this._transformState;if(r.writecb=i,r.writechunk=e,r.writeencoding=t,!r.transforming){var o=this._readableState;(r.needTransform||o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}};xe.prototype._read=function(e){var t=this._transformState;t.writechunk!==null&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0};function Ms(e,t){if(t)return e.emit("error",t);var i=e._writableState,r=e._transformState;if(i.length)throw new Error("Calling transform done when ws.length != 0");if(r.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}me(Kt,xe);function Kt(e){if(!(this instanceof Kt))return new Kt(e);xe.call(this,e)}Kt.prototype._transform=function(e,t,i){i(null,e)};me(Le,Z);Le.Readable=re;Le.Writable=de;Le.Duplex=be;Le.Transform=xe;Le.PassThrough=Kt;Le.Stream=Le;function Le(){Z.call(this)}Le.prototype.pipe=function(e,t){var i=this;function r(c){e.writable&&e.write(c)===!1&&i.pause&&i.pause()}i.on("data",r);function o(){i.readable&&i.resume&&i.resume()}e.on("drain",o),!e._isStdio&&(!t||t.end!==!1)&&(i.on("end",s),i.on("close",l));var n=!1;function s(){n||(n=!0,e.end())}function l(){n||(n=!0,typeof e.destroy=="function"&&e.destroy())}function f(c){if(h(),Z.listenerCount(this,"error")===0)throw c}i.on("error",f),e.on("error",f);function h(){i.removeListener("data",r),e.removeListener("drain",o),i.removeListener("end",s),i.removeListener("close",l),i.removeListener("error",f),e.removeListener("error",f),i.removeListener("end",h),i.removeListener("close",h),e.removeListener("close",h)}return i.on("end",h),i.on("close",h),e.on("close",h),e.emit("pipe",i),e};const lf=Object.freeze(Object.defineProperty({__proto__:null,Duplex:be,PassThrough:Kt,Readable:re,Stream:Le,Transform:xe,Writable:de,default:Le},Symbol.toStringTag,{value:"Module"})),qa={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"};function uf(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}function qe(e,t,i,r,o){if(t.subarray&&e.subarray){e.set(t.subarray(i,i+r),o);return}for(var n=0;n<r;n++)e[o+n]=t[i+n]}var Yi=Uint8Array,Se=Uint16Array,Ki=Int32Array,hf=4,Ps=0,ks=1,ff=2;function ti(e){for(var t=e.length;--t>=0;)e[t]=0}var cf=0,Za=1,df=2,pf=3,_f=258,Gn=29,Di=256,_i=Di+1+Gn,Yt=30,Wn=19,Ya=2*_i+1,bt=15,xr=16,gf=7,qn=256,Ka=16,$a=17,Qa=18,Sn=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],Xi=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],mf=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Ja=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],yf=512,Ve=new Array((_i+2)*2);ti(Ve);var hi=new Array(Yt*2);ti(hi);var gi=new Array(yf);ti(gi);var mi=new Array(_f-pf+1);ti(mi);var Zn=new Array(Gn);ti(Zn);var $i=new Array(Yt);ti($i);function Er(e,t,i,r,o){this.static_tree=e,this.extra_bits=t,this.extra_base=i,this.elems=r,this.max_length=o,this.has_stree=e&&e.length}var el,tl,il;function Tr(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function rl(e){return e<256?gi[e]:gi[256+(e>>>7)]}function yi(e,t){e.pending_buf[e.pending++]=t&255,e.pending_buf[e.pending++]=t>>>8&255}function ge(e,t,i){e.bi_valid>xr-i?(e.bi_buf|=t<<e.bi_valid&65535,yi(e,e.bi_buf),e.bi_buf=t>>xr-e.bi_valid,e.bi_valid+=i-xr):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=i)}function Pe(e,t,i){ge(e,i[t*2],i[t*2+1])}function nl(e,t){var i=0;do i|=e&1,e>>>=1,i<<=1;while(--t>0);return i>>>1}function vf(e){e.bi_valid===16?(yi(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=e.bi_buf&255,e.bi_buf>>=8,e.bi_valid-=8)}function wf(e,t){var i=t.dyn_tree,r=t.max_code,o=t.stat_desc.static_tree,n=t.stat_desc.has_stree,s=t.stat_desc.extra_bits,l=t.stat_desc.extra_base,f=t.stat_desc.max_length,h,c,g,a,u,d,y=0;for(a=0;a<=bt;a++)e.bl_count[a]=0;for(i[e.heap[e.heap_max]*2+1]=0,h=e.heap_max+1;h<Ya;h++)c=e.heap[h],a=i[i[c*2+1]*2+1]+1,a>f&&(a=f,y++),i[c*2+1]=a,!(c>r)&&(e.bl_count[a]++,u=0,c>=l&&(u=s[c-l]),d=i[c*2],e.opt_len+=d*(a+u),n&&(e.static_len+=d*(o[c*2+1]+u)));if(y!==0){do{for(a=f-1;e.bl_count[a]===0;)a--;e.bl_count[a]--,e.bl_count[a+1]+=2,e.bl_count[f]--,y-=2}while(y>0);for(a=f;a!==0;a--)for(c=e.bl_count[a];c!==0;)g=e.heap[--h],!(g>r)&&(i[g*2+1]!==a&&(e.opt_len+=(a-i[g*2+1])*i[g*2],i[g*2+1]=a),c--)}}function sl(e,t,i){var r=new Array(bt+1),o=0,n,s;for(n=1;n<=bt;n++)r[n]=o=o+i[n-1]<<1;for(s=0;s<=t;s++){var l=e[s*2+1];l!==0&&(e[s*2]=nl(r[l]++,l))}}function bf(){var e,t,i,r,o,n=new Array(bt+1);for(i=0,r=0;r<Gn-1;r++)for(Zn[r]=i,e=0;e<1<<Sn[r];e++)mi[i++]=r;for(mi[i-1]=r,o=0,r=0;r<16;r++)for($i[r]=o,e=0;e<1<<Xi[r];e++)gi[o++]=r;for(o>>=7;r<Yt;r++)for($i[r]=o<<7,e=0;e<1<<Xi[r]-7;e++)gi[256+o++]=r;for(t=0;t<=bt;t++)n[t]=0;for(e=0;e<=143;)Ve[e*2+1]=8,e++,n[8]++;for(;e<=255;)Ve[e*2+1]=9,e++,n[9]++;for(;e<=279;)Ve[e*2+1]=7,e++,n[7]++;for(;e<=287;)Ve[e*2+1]=8,e++,n[8]++;for(sl(Ve,_i+1,n),e=0;e<Yt;e++)hi[e*2+1]=5,hi[e*2]=nl(e,5);el=new Er(Ve,Sn,Di+1,_i,bt),tl=new Er(hi,Xi,0,Yt,bt),il=new Er(new Array(0),mf,0,Wn,gf)}function ol(e){var t;for(t=0;t<_i;t++)e.dyn_ltree[t*2]=0;for(t=0;t<Yt;t++)e.dyn_dtree[t*2]=0;for(t=0;t<Wn;t++)e.bl_tree[t*2]=0;e.dyn_ltree[qn*2]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function al(e){e.bi_valid>8?yi(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function xf(e,t,i,r){al(e),yi(e,i),yi(e,~i),qe(e.pending_buf,e.window,t,i,e.pending),e.pending+=i}function Fs(e,t,i,r){var o=t*2,n=i*2;return e[o]<e[n]||e[o]===e[n]&&r[t]<=r[i]}function Ar(e,t,i){for(var r=e.heap[i],o=i<<1;o<=e.heap_len&&(o<e.heap_len&&Fs(t,e.heap[o+1],e.heap[o],e.depth)&&o++,!Fs(t,r,e.heap[o],e.depth));)e.heap[i]=e.heap[o],i=o,o<<=1;e.heap[i]=r}function Bs(e,t,i){var r,o,n=0,s,l;if(e.last_lit!==0)do r=e.pending_buf[e.d_buf+n*2]<<8|e.pending_buf[e.d_buf+n*2+1],o=e.pending_buf[e.l_buf+n],n++,r===0?Pe(e,o,t):(s=mi[o],Pe(e,s+Di+1,t),l=Sn[s],l!==0&&(o-=Zn[s],ge(e,o,l)),r--,s=rl(r),Pe(e,s,i),l=Xi[s],l!==0&&(r-=$i[s],ge(e,r,l)));while(n<e.last_lit);Pe(e,qn,t)}function Dn(e,t){var i=t.dyn_tree,r=t.stat_desc.static_tree,o=t.stat_desc.has_stree,n=t.stat_desc.elems,s,l,f=-1,h;for(e.heap_len=0,e.heap_max=Ya,s=0;s<n;s++)i[s*2]!==0?(e.heap[++e.heap_len]=f=s,e.depth[s]=0):i[s*2+1]=0;for(;e.heap_len<2;)h=e.heap[++e.heap_len]=f<2?++f:0,i[h*2]=1,e.depth[h]=0,e.opt_len--,o&&(e.static_len-=r[h*2+1]);for(t.max_code=f,s=e.heap_len>>1;s>=1;s--)Ar(e,i,s);h=n;do s=e.heap[1],e.heap[1]=e.heap[e.heap_len--],Ar(e,i,1),l=e.heap[1],e.heap[--e.heap_max]=s,e.heap[--e.heap_max]=l,i[h*2]=i[s*2]+i[l*2],e.depth[h]=(e.depth[s]>=e.depth[l]?e.depth[s]:e.depth[l])+1,i[s*2+1]=i[l*2+1]=h,e.heap[1]=h++,Ar(e,i,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],wf(e,t),sl(i,f,e.bl_count)}function Us(e,t,i){var r,o=-1,n,s=t[0*2+1],l=0,f=7,h=4;for(s===0&&(f=138,h=3),t[(i+1)*2+1]=65535,r=0;r<=i;r++)n=s,s=t[(r+1)*2+1],!(++l<f&&n===s)&&(l<h?e.bl_tree[n*2]+=l:n!==0?(n!==o&&e.bl_tree[n*2]++,e.bl_tree[Ka*2]++):l<=10?e.bl_tree[$a*2]++:e.bl_tree[Qa*2]++,l=0,o=n,s===0?(f=138,h=3):n===s?(f=6,h=3):(f=7,h=4))}function zs(e,t,i){var r,o=-1,n,s=t[0*2+1],l=0,f=7,h=4;for(s===0&&(f=138,h=3),r=0;r<=i;r++)if(n=s,s=t[(r+1)*2+1],!(++l<f&&n===s)){if(l<h)do Pe(e,n,e.bl_tree);while(--l!==0);else n!==0?(n!==o&&(Pe(e,n,e.bl_tree),l--),Pe(e,Ka,e.bl_tree),ge(e,l-3,2)):l<=10?(Pe(e,$a,e.bl_tree),ge(e,l-3,3)):(Pe(e,Qa,e.bl_tree),ge(e,l-11,7));l=0,o=n,s===0?(f=138,h=3):n===s?(f=6,h=3):(f=7,h=4)}}function Ef(e){var t;for(Us(e,e.dyn_ltree,e.l_desc.max_code),Us(e,e.dyn_dtree,e.d_desc.max_code),Dn(e,e.bl_desc),t=Wn-1;t>=3&&e.bl_tree[Ja[t]*2+1]===0;t--);return e.opt_len+=3*(t+1)+5+5+4,t}function Tf(e,t,i,r){var o;for(ge(e,t-257,5),ge(e,i-1,5),ge(e,r-4,4),o=0;o<r;o++)ge(e,e.bl_tree[Ja[o]*2+1],3);zs(e,e.dyn_ltree,t-1),zs(e,e.dyn_dtree,i-1)}function Af(e){var t=4093624447,i;for(i=0;i<=31;i++,t>>>=1)if(t&1&&e.dyn_ltree[i*2]!==0)return Ps;if(e.dyn_ltree[9*2]!==0||e.dyn_ltree[10*2]!==0||e.dyn_ltree[13*2]!==0)return ks;for(i=32;i<Di;i++)if(e.dyn_ltree[i*2]!==0)return ks;return Ps}var Xs=!1;function Sf(e){Xs||(bf(),Xs=!0),e.l_desc=new Tr(e.dyn_ltree,el),e.d_desc=new Tr(e.dyn_dtree,tl),e.bl_desc=new Tr(e.bl_tree,il),e.bi_buf=0,e.bi_valid=0,ol(e)}function ll(e,t,i,r){ge(e,(cf<<1)+(r?1:0),3),xf(e,t,i)}function Df(e){ge(e,Za<<1,3),Pe(e,qn,Ve),vf(e)}function Of(e,t,i,r){var o,n,s=0;e.level>0?(e.strm.data_type===ff&&(e.strm.data_type=Af(e)),Dn(e,e.l_desc),Dn(e,e.d_desc),s=Ef(e),o=e.opt_len+3+7>>>3,n=e.static_len+3+7>>>3,n<=o&&(o=n)):o=n=i+5,i+4<=o&&t!==-1?ll(e,t,i,r):e.strategy===hf||n===o?(ge(e,(Za<<1)+(r?1:0),3),Bs(e,Ve,hi)):(ge(e,(df<<1)+(r?1:0),3),Tf(e,e.l_desc.max_code+1,e.d_desc.max_code+1,s+1),Bs(e,e.dyn_ltree,e.dyn_dtree)),ol(e),r&&al(e)}function lt(e,t,i){return e.pending_buf[e.d_buf+e.last_lit*2]=t>>>8&255,e.pending_buf[e.d_buf+e.last_lit*2+1]=t&255,e.pending_buf[e.l_buf+e.last_lit]=i&255,e.last_lit++,t===0?e.dyn_ltree[i*2]++:(e.matches++,t--,e.dyn_ltree[(mi[i]+Di+1)*2]++,e.dyn_dtree[rl(t)*2]++),e.last_lit===e.lit_bufsize-1}function On(e,t,i,r){for(var o=e&65535|0,n=e>>>16&65535|0,s=0;i!==0;){s=i>2e3?2e3:i,i-=s;do o=o+t[r++]|0,n=n+o|0;while(--s);o%=65521,n%=65521}return o|n<<16|0}function Cf(){for(var e,t=[],i=0;i<256;i++){e=i;for(var r=0;r<8;r++)e=e&1?3988292384^e>>>1:e>>>1;t[i]=e}return t}var If=Cf();function le(e,t,i,r){var o=If,n=r+i;e^=-1;for(var s=r;s<n;s++)e=e>>>8^o[(e^t[s])&255];return e^-1}var Mt=0,Lf=1,Rf=3,ut=4,js=5,et=0,Hs=1,ht=-2,Nf=-3,Sr=-5,Mf=-1,Pf=1,Ri=2,kf=3,Ff=4,Bf=2,Yn=8,Uf=9,zf=29,Xf=256,Cn=Xf+1+zf,jf=30,Hf=19,Vf=2*Cn+1,Gf=15,J=3,rt=258,Ie=rt+J+1,Wf=32,Kn=42,In=69,ji=73,Hi=91,Vi=103,xt=113,li=666,ae=1,Oi=2,Tt=3,ii=4,qf=3;function nt(e,t){return e.msg=qa[t],t}function Vs(e){return(e<<1)-(e>4?9:0)}function mt(e){for(var t=e.length;--t>=0;)e[t]=0}function Qe(e){var t=e.state,i=t.pending;i>e.avail_out&&(i=e.avail_out),i!==0&&(qe(e.output,t.pending_buf,t.pending_out,i,e.next_out),e.next_out+=i,t.pending_out+=i,e.total_out+=i,e.avail_out-=i,t.pending-=i,t.pending===0&&(t.pending_out=0))}function ce(e,t){Of(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,Qe(e.strm)}function $(e,t){e.pending_buf[e.pending++]=t}function ai(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=t&255}function Zf(e,t,i,r){var o=e.avail_in;return o>r&&(o=r),o===0?0:(e.avail_in-=o,qe(t,e.input,e.next_in,o,i),e.state.wrap===1?e.adler=On(e.adler,t,o,i):e.state.wrap===2&&(e.adler=le(e.adler,t,o,i)),e.next_in+=o,e.total_in+=o,o)}function ul(e,t){var i=e.max_chain_length,r=e.strstart,o,n,s=e.prev_length,l=e.nice_match,f=e.strstart>e.w_size-Ie?e.strstart-(e.w_size-Ie):0,h=e.window,c=e.w_mask,g=e.prev,a=e.strstart+rt,u=h[r+s-1],d=h[r+s];e.prev_length>=e.good_match&&(i>>=2),l>e.lookahead&&(l=e.lookahead);do if(o=t,!(h[o+s]!==d||h[o+s-1]!==u||h[o]!==h[r]||h[++o]!==h[r+1])){r+=2,o++;do;while(h[++r]===h[++o]&&h[++r]===h[++o]&&h[++r]===h[++o]&&h[++r]===h[++o]&&h[++r]===h[++o]&&h[++r]===h[++o]&&h[++r]===h[++o]&&h[++r]===h[++o]&&r<a);if(n=rt-(a-r),r=a-rt,n>s){if(e.match_start=t,s=n,n>=l)break;u=h[r+s-1],d=h[r+s]}}while((t=g[t&c])>f&&--i!==0);return s<=e.lookahead?s:e.lookahead}function Ci(e){var t=e.w_size,i,r,o,n,s;do{if(n=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-Ie)){qe(e.window,e.window,t,t,0),e.match_start-=t,e.strstart-=t,e.block_start-=t,r=e.hash_size,i=r;do o=e.head[--i],e.head[i]=o>=t?o-t:0;while(--r);r=t,i=r;do o=e.prev[--i],e.prev[i]=o>=t?o-t:0;while(--r);n+=t}if(e.strm.avail_in===0)break;if(r=Zf(e.strm,e.window,e.strstart+e.lookahead,n),e.lookahead+=r,e.lookahead+e.insert>=J)for(s=e.strstart-e.insert,e.ins_h=e.window[s],e.ins_h=(e.ins_h<<e.hash_shift^e.window[s+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[s+J-1])&e.hash_mask,e.prev[s&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=s,s++,e.insert--,!(e.lookahead+e.insert<J)););}while(e.lookahead<Ie&&e.strm.avail_in!==0)}function Yf(e,t){var i=65535;for(i>e.pending_buf_size-5&&(i=e.pending_buf_size-5);;){if(e.lookahead<=1){if(Ci(e),e.lookahead===0&&t===Mt)return ae;if(e.lookahead===0)break}e.strstart+=e.lookahead,e.lookahead=0;var r=e.block_start+i;if((e.strstart===0||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,ce(e,!1),e.strm.avail_out===0)||e.strstart-e.block_start>=e.w_size-Ie&&(ce(e,!1),e.strm.avail_out===0))return ae}return e.insert=0,t===ut?(ce(e,!0),e.strm.avail_out===0?Tt:ii):(e.strstart>e.block_start&&(ce(e,!1),e.strm.avail_out===0),ae)}function Dr(e,t){for(var i,r;;){if(e.lookahead<Ie){if(Ci(e),e.lookahead<Ie&&t===Mt)return ae;if(e.lookahead===0)break}if(i=0,e.lookahead>=J&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+J-1])&e.hash_mask,i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),i!==0&&e.strstart-i<=e.w_size-Ie&&(e.match_length=ul(e,i)),e.match_length>=J)if(r=lt(e,e.strstart-e.match_start,e.match_length-J),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=J){e.match_length--;do e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+J-1])&e.hash_mask,i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!==0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else r=lt(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(ce(e,!1),e.strm.avail_out===0))return ae}return e.insert=e.strstart<J-1?e.strstart:J-1,t===ut?(ce(e,!0),e.strm.avail_out===0?Tt:ii):e.last_lit&&(ce(e,!1),e.strm.avail_out===0)?ae:Oi}function zt(e,t){for(var i,r,o;;){if(e.lookahead<Ie){if(Ci(e),e.lookahead<Ie&&t===Mt)return ae;if(e.lookahead===0)break}if(i=0,e.lookahead>=J&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+J-1])&e.hash_mask,i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=J-1,i!==0&&e.prev_length<e.max_lazy_match&&e.strstart-i<=e.w_size-Ie&&(e.match_length=ul(e,i),e.match_length<=5&&(e.strategy===Pf||e.match_length===J&&e.strstart-e.match_start>4096)&&(e.match_length=J-1)),e.prev_length>=J&&e.match_length<=e.prev_length){o=e.strstart+e.lookahead-J,r=lt(e,e.strstart-1-e.prev_match,e.prev_length-J),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=o&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+J-1])&e.hash_mask,i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!==0);if(e.match_available=0,e.match_length=J-1,e.strstart++,r&&(ce(e,!1),e.strm.avail_out===0))return ae}else if(e.match_available){if(r=lt(e,0,e.window[e.strstart-1]),r&&ce(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return ae}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=lt(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<J-1?e.strstart:J-1,t===ut?(ce(e,!0),e.strm.avail_out===0?Tt:ii):e.last_lit&&(ce(e,!1),e.strm.avail_out===0)?ae:Oi}function Kf(e,t){for(var i,r,o,n,s=e.window;;){if(e.lookahead<=rt){if(Ci(e),e.lookahead<=rt&&t===Mt)return ae;if(e.lookahead===0)break}if(e.match_length=0,e.lookahead>=J&&e.strstart>0&&(o=e.strstart-1,r=s[o],r===s[++o]&&r===s[++o]&&r===s[++o])){n=e.strstart+rt;do;while(r===s[++o]&&r===s[++o]&&r===s[++o]&&r===s[++o]&&r===s[++o]&&r===s[++o]&&r===s[++o]&&r===s[++o]&&o<n);e.match_length=rt-(n-o),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=J?(i=lt(e,1,e.match_length-J),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(i=lt(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),i&&(ce(e,!1),e.strm.avail_out===0))return ae}return e.insert=0,t===ut?(ce(e,!0),e.strm.avail_out===0?Tt:ii):e.last_lit&&(ce(e,!1),e.strm.avail_out===0)?ae:Oi}function $f(e,t){for(var i;;){if(e.lookahead===0&&(Ci(e),e.lookahead===0)){if(t===Mt)return ae;break}if(e.match_length=0,i=lt(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,i&&(ce(e,!1),e.strm.avail_out===0))return ae}return e.insert=0,t===ut?(ce(e,!0),e.strm.avail_out===0?Tt:ii):e.last_lit&&(ce(e,!1),e.strm.avail_out===0)?ae:Oi}function Ne(e,t,i,r,o){this.good_length=e,this.max_lazy=t,this.nice_length=i,this.max_chain=r,this.func=o}var Gt;Gt=[new Ne(0,0,0,0,Yf),new Ne(4,4,8,4,Dr),new Ne(4,5,16,8,Dr),new Ne(4,6,32,32,Dr),new Ne(4,4,16,16,zt),new Ne(8,16,32,32,zt),new Ne(8,16,128,128,zt),new Ne(8,32,128,256,zt),new Ne(32,128,258,1024,zt),new Ne(32,258,258,4096,zt)];function Qf(e){e.window_size=2*e.w_size,mt(e.head),e.max_lazy_match=Gt[e.level].max_lazy,e.good_match=Gt[e.level].good_length,e.nice_match=Gt[e.level].nice_length,e.max_chain_length=Gt[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=J-1,e.match_available=0,e.ins_h=0}function Jf(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Yn,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Se(Vf*2),this.dyn_dtree=new Se((2*jf+1)*2),this.bl_tree=new Se((2*Hf+1)*2),mt(this.dyn_ltree),mt(this.dyn_dtree),mt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Se(Gf+1),this.heap=new Se(2*Cn+1),mt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Se(2*Cn+1),mt(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ec(e){var t;return!e||!e.state?nt(e,ht):(e.total_in=e.total_out=0,e.data_type=Bf,t=e.state,t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?Kn:xt,e.adler=t.wrap===2?0:1,t.last_flush=Mt,Sf(t),et)}function hl(e){var t=ec(e);return t===et&&Qf(e.state),t}function tc(e,t,i,r,o,n){if(!e)return ht;var s=1;if(t===Mf&&(t=6),r<0?(s=0,r=-r):r>15&&(s=2,r-=16),o<1||o>Uf||i!==Yn||r<8||r>15||t<0||t>9||n<0||n>Ff)return nt(e,ht);r===8&&(r=9);var l=new Jf;return e.state=l,l.strm=e,l.wrap=s,l.gzhead=null,l.w_bits=r,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=o+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+J-1)/J),l.window=new Yi(l.w_size*2),l.head=new Se(l.hash_size),l.prev=new Se(l.w_size),l.lit_bufsize=1<<o+6,l.pending_buf_size=l.lit_bufsize*4,l.pending_buf=new Yi(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=t,l.strategy=n,l.method=i,hl(e)}function ic(e,t){var i,r,o,n;if(!e||!e.state||t>js||t<0)return e?nt(e,ht):ht;if(r=e.state,!e.output||!e.input&&e.avail_in!==0||r.status===li&&t!==ut)return nt(e,e.avail_out===0?Sr:ht);if(r.strm=e,i=r.last_flush,r.last_flush=t,r.status===Kn)if(r.wrap===2)e.adler=0,$(r,31),$(r,139),$(r,8),r.gzhead?($(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),$(r,r.gzhead.time&255),$(r,r.gzhead.time>>8&255),$(r,r.gzhead.time>>16&255),$(r,r.gzhead.time>>24&255),$(r,r.level===9?2:r.strategy>=Ri||r.level<2?4:0),$(r,r.gzhead.os&255),r.gzhead.extra&&r.gzhead.extra.length&&($(r,r.gzhead.extra.length&255),$(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(e.adler=le(e.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=In):($(r,0),$(r,0),$(r,0),$(r,0),$(r,0),$(r,r.level===9?2:r.strategy>=Ri||r.level<2?4:0),$(r,qf),r.status=xt);else{var s=Yn+(r.w_bits-8<<4)<<8,l=-1;r.strategy>=Ri||r.level<2?l=0:r.level<6?l=1:r.level===6?l=2:l=3,s|=l<<6,r.strstart!==0&&(s|=Wf),s+=31-s%31,r.status=xt,ai(r,s),r.strstart!==0&&(ai(r,e.adler>>>16),ai(r,e.adler&65535)),e.adler=1}if(r.status===In)if(r.gzhead.extra){for(o=r.pending;r.gzindex<(r.gzhead.extra.length&65535)&&!(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>o&&(e.adler=le(e.adler,r.pending_buf,r.pending-o,o)),Qe(e),o=r.pending,r.pending===r.pending_buf_size));)$(r,r.gzhead.extra[r.gzindex]&255),r.gzindex++;r.gzhead.hcrc&&r.pending>o&&(e.adler=le(e.adler,r.pending_buf,r.pending-o,o)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=ji)}else r.status=ji;if(r.status===ji)if(r.gzhead.name){o=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>o&&(e.adler=le(e.adler,r.pending_buf,r.pending-o,o)),Qe(e),o=r.pending,r.pending===r.pending_buf_size)){n=1;break}r.gzindex<r.gzhead.name.length?n=r.gzhead.name.charCodeAt(r.gzindex++)&255:n=0,$(r,n)}while(n!==0);r.gzhead.hcrc&&r.pending>o&&(e.adler=le(e.adler,r.pending_buf,r.pending-o,o)),n===0&&(r.gzindex=0,r.status=Hi)}else r.status=Hi;if(r.status===Hi)if(r.gzhead.comment){o=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>o&&(e.adler=le(e.adler,r.pending_buf,r.pending-o,o)),Qe(e),o=r.pending,r.pending===r.pending_buf_size)){n=1;break}r.gzindex<r.gzhead.comment.length?n=r.gzhead.comment.charCodeAt(r.gzindex++)&255:n=0,$(r,n)}while(n!==0);r.gzhead.hcrc&&r.pending>o&&(e.adler=le(e.adler,r.pending_buf,r.pending-o,o)),n===0&&(r.status=Vi)}else r.status=Vi;if(r.status===Vi&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&Qe(e),r.pending+2<=r.pending_buf_size&&($(r,e.adler&255),$(r,e.adler>>8&255),e.adler=0,r.status=xt)):r.status=xt),r.pending!==0){if(Qe(e),e.avail_out===0)return r.last_flush=-1,et}else if(e.avail_in===0&&Vs(t)<=Vs(i)&&t!==ut)return nt(e,Sr);if(r.status===li&&e.avail_in!==0)return nt(e,Sr);if(e.avail_in!==0||r.lookahead!==0||t!==Mt&&r.status!==li){var f=r.strategy===Ri?$f(r,t):r.strategy===kf?Kf(r,t):Gt[r.level].func(r,t);if((f===Tt||f===ii)&&(r.status=li),f===ae||f===Tt)return e.avail_out===0&&(r.last_flush=-1),et;if(f===Oi&&(t===Lf?Df(r):t!==js&&(ll(r,0,0,!1),t===Rf&&(mt(r.head),r.lookahead===0&&(r.strstart=0,r.block_start=0,r.insert=0))),Qe(e),e.avail_out===0))return r.last_flush=-1,et}return t!==ut?et:r.wrap<=0?Hs:(r.wrap===2?($(r,e.adler&255),$(r,e.adler>>8&255),$(r,e.adler>>16&255),$(r,e.adler>>24&255),$(r,e.total_in&255),$(r,e.total_in>>8&255),$(r,e.total_in>>16&255),$(r,e.total_in>>24&255)):(ai(r,e.adler>>>16),ai(r,e.adler&65535)),Qe(e),r.wrap>0&&(r.wrap=-r.wrap),r.pending!==0?et:Hs)}function rc(e){var t;return!e||!e.state?ht:(t=e.state.status,t!==Kn&&t!==In&&t!==ji&&t!==Hi&&t!==Vi&&t!==xt&&t!==li?nt(e,ht):(e.state=null,t===xt?nt(e,Nf):et))}var Ni=30,nc=12;function sc(e,t){var i,r,o,n,s,l,f,h,c,g,a,u,d,y,b,E,v,_,x,A,C,O,I,p,S;i=e.state,r=e.next_in,p=e.input,o=r+(e.avail_in-5),n=e.next_out,S=e.output,s=n-(t-e.avail_out),l=n+(e.avail_out-257),f=i.dmax,h=i.wsize,c=i.whave,g=i.wnext,a=i.window,u=i.hold,d=i.bits,y=i.lencode,b=i.distcode,E=(1<<i.lenbits)-1,v=(1<<i.distbits)-1;e:do{d<15&&(u+=p[r++]<<d,d+=8,u+=p[r++]<<d,d+=8),_=y[u&E];t:for(;;){if(x=_>>>24,u>>>=x,d-=x,x=_>>>16&255,x===0)S[n++]=_&65535;else if(x&16){A=_&65535,x&=15,x&&(d<x&&(u+=p[r++]<<d,d+=8),A+=u&(1<<x)-1,u>>>=x,d-=x),d<15&&(u+=p[r++]<<d,d+=8,u+=p[r++]<<d,d+=8),_=b[u&v];i:for(;;){if(x=_>>>24,u>>>=x,d-=x,x=_>>>16&255,x&16){if(C=_&65535,x&=15,d<x&&(u+=p[r++]<<d,d+=8,d<x&&(u+=p[r++]<<d,d+=8)),C+=u&(1<<x)-1,C>f){e.msg="invalid distance too far back",i.mode=Ni;break e}if(u>>>=x,d-=x,x=n-s,C>x){if(x=C-x,x>c&&i.sane){e.msg="invalid distance too far back",i.mode=Ni;break e}if(O=0,I=a,g===0){if(O+=h-x,x<A){A-=x;do S[n++]=a[O++];while(--x);O=n-C,I=S}}else if(g<x){if(O+=h+g-x,x-=g,x<A){A-=x;do S[n++]=a[O++];while(--x);if(O=0,g<A){x=g,A-=x;do S[n++]=a[O++];while(--x);O=n-C,I=S}}}else if(O+=g-x,x<A){A-=x;do S[n++]=a[O++];while(--x);O=n-C,I=S}for(;A>2;)S[n++]=I[O++],S[n++]=I[O++],S[n++]=I[O++],A-=3;A&&(S[n++]=I[O++],A>1&&(S[n++]=I[O++]))}else{O=n-C;do S[n++]=S[O++],S[n++]=S[O++],S[n++]=S[O++],A-=3;while(A>2);A&&(S[n++]=S[O++],A>1&&(S[n++]=S[O++]))}}else if(x&64){e.msg="invalid distance code",i.mode=Ni;break e}else{_=b[(_&65535)+(u&(1<<x)-1)];continue i}break}}else if(x&64)if(x&32){i.mode=nc;break e}else{e.msg="invalid literal/length code",i.mode=Ni;break e}else{_=y[(_&65535)+(u&(1<<x)-1)];continue t}break}}while(r<o&&n<l);A=d>>3,r-=A,d-=A<<3,u&=(1<<d)-1,e.next_in=r,e.next_out=n,e.avail_in=r<o?5+(o-r):5-(r-o),e.avail_out=n<l?257+(l-n):257-(n-l),i.hold=u,i.bits=d}var Xt=15,Gs=852,Ws=592,qs=0,Or=1,Zs=2,oc=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],ac=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],lc=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],uc=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];function fi(e,t,i,r,o,n,s,l){var f=l.bits,h=0,c=0,g=0,a=0,u=0,d=0,y=0,b=0,E=0,v=0,_,x,A,C,O,I=null,p=0,S,R=new Se(Xt+1),F=new Se(Xt+1),X=null,j=0,Y,V,H;for(h=0;h<=Xt;h++)R[h]=0;for(c=0;c<r;c++)R[t[i+c]]++;for(u=f,a=Xt;a>=1&&R[a]===0;a--);if(u>a&&(u=a),a===0)return o[n++]=1<<24|64<<16|0,o[n++]=1<<24|64<<16|0,l.bits=1,0;for(g=1;g<a&&R[g]===0;g++);for(u<g&&(u=g),b=1,h=1;h<=Xt;h++)if(b<<=1,b-=R[h],b<0)return-1;if(b>0&&(e===qs||a!==1))return-1;for(F[1]=0,h=1;h<Xt;h++)F[h+1]=F[h]+R[h];for(c=0;c<r;c++)t[i+c]!==0&&(s[F[t[i+c]]++]=c);if(e===qs?(I=X=s,S=19):e===Or?(I=oc,p-=257,X=ac,j-=257,S=256):(I=lc,X=uc,S=-1),v=0,c=0,h=g,O=n,d=u,y=0,A=-1,E=1<<u,C=E-1,e===Or&&E>Gs||e===Zs&&E>Ws)return 1;for(;;){Y=h-y,s[c]<S?(V=0,H=s[c]):s[c]>S?(V=X[j+s[c]],H=I[p+s[c]]):(V=96,H=0),_=1<<h-y,x=1<<d,g=x;do x-=_,o[O+(v>>y)+x]=Y<<24|V<<16|H|0;while(x!==0);for(_=1<<h-1;v&_;)_>>=1;if(_!==0?(v&=_-1,v+=_):v=0,c++,--R[h]===0){if(h===a)break;h=t[i+s[c]]}if(h>u&&(v&C)!==A){for(y===0&&(y=u),O+=g,d=h-y,b=1<<d;d+y<a&&(b-=R[d+y],!(b<=0));)d++,b<<=1;if(E+=1<<d,e===Or&&E>Gs||e===Zs&&E>Ws)return 1;A=v&C,o[A]=u<<24|d<<16|O-n|0}}return v!==0&&(o[O+v]=h-y<<24|64<<16|0),l.bits=u,0}var hc=0,fl=1,cl=2,Ys=4,fc=5,Mi=6,vi=0,cc=1,dc=2,ct=-2,pc=-3,_c=-4,gc=-5,Ks=8,dl=1,$s=2,Qs=3,Js=4,eo=5,to=6,io=7,ro=8,no=9,so=10,oo=11,Xe=12,Cr=13,ao=14,Ir=15,lo=16,uo=17,ho=18,fo=19,Pi=20,ki=21,co=22,po=23,_o=24,go=25,mo=26,Lr=27,yo=28,vo=29,ie=30,mc=31,yc=32,vc=852,wc=592;function wo(e){return(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24)}function bc(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Se(320),this.work=new Se(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function xc(e){var t;return!e||!e.state?ct:(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=dl,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Ki(vc),t.distcode=t.distdyn=new Ki(wc),t.sane=1,t.back=-1,vi)}function pl(e){var t;return!e||!e.state?ct:(t=e.state,t.wsize=0,t.whave=0,t.wnext=0,xc(e))}function Ec(e,t){var i,r;return!e||!e.state||(r=e.state,t<0?(i=0,t=-t):(i=(t>>4)+1,t<48&&(t&=15)),t&&(t<8||t>15))?ct:(r.window!==null&&r.wbits!==t&&(r.window=null),r.wrap=i,r.wbits=t,pl(e))}function Tc(e,t){var i,r;return e?(r=new bc,e.state=r,r.window=null,i=Ec(e,t),i!==vi&&(e.state=null),i):ct}var bo=!0,Rr,Nr;function Ac(e){if(bo){var t;for(Rr=new Ki(512),Nr=new Ki(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(fi(fl,e.lens,0,288,Rr,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;fi(cl,e.lens,0,32,Nr,0,e.work,{bits:5}),bo=!1}e.lencode=Rr,e.lenbits=9,e.distcode=Nr,e.distbits=5}function Sc(e,t,i,r){var o,n=e.state;return n.window===null&&(n.wsize=1<<n.wbits,n.wnext=0,n.whave=0,n.window=new Yi(n.wsize)),r>=n.wsize?(qe(n.window,t,i-n.wsize,n.wsize,0),n.wnext=0,n.whave=n.wsize):(o=n.wsize-n.wnext,o>r&&(o=r),qe(n.window,t,i-r,o,n.wnext),r-=o,r?(qe(n.window,t,i-r,r,0),n.wnext=r,n.whave=n.wsize):(n.wnext+=o,n.wnext===n.wsize&&(n.wnext=0),n.whave<n.wsize&&(n.whave+=o))),0}function Dc(e,t){var i,r,o,n,s,l,f,h,c,g,a,u,d,y,b=0,E,v,_,x,A,C,O,I,p=new Yi(4),S,R,F=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&e.avail_in!==0)return ct;i=e.state,i.mode===Xe&&(i.mode=Cr),s=e.next_out,o=e.output,f=e.avail_out,n=e.next_in,r=e.input,l=e.avail_in,h=i.hold,c=i.bits,g=l,a=f,I=vi;e:for(;;)switch(i.mode){case dl:if(i.wrap===0){i.mode=Cr;break}for(;c<16;){if(l===0)break e;l--,h+=r[n++]<<c,c+=8}if(i.wrap&2&&h===35615){i.check=0,p[0]=h&255,p[1]=h>>>8&255,i.check=le(i.check,p,2,0),h=0,c=0,i.mode=$s;break}if(i.flags=0,i.head&&(i.head.done=!1),!(i.wrap&1)||(((h&255)<<8)+(h>>8))%31){e.msg="incorrect header check",i.mode=ie;break}if((h&15)!==Ks){e.msg="unknown compression method",i.mode=ie;break}if(h>>>=4,c-=4,O=(h&15)+8,i.wbits===0)i.wbits=O;else if(O>i.wbits){e.msg="invalid window size",i.mode=ie;break}i.dmax=1<<O,e.adler=i.check=1,i.mode=h&512?so:Xe,h=0,c=0;break;case $s:for(;c<16;){if(l===0)break e;l--,h+=r[n++]<<c,c+=8}if(i.flags=h,(i.flags&255)!==Ks){e.msg="unknown compression method",i.mode=ie;break}if(i.flags&57344){e.msg="unknown header flags set",i.mode=ie;break}i.head&&(i.head.text=h>>8&1),i.flags&512&&(p[0]=h&255,p[1]=h>>>8&255,i.check=le(i.check,p,2,0)),h=0,c=0,i.mode=Qs;case Qs:for(;c<32;){if(l===0)break e;l--,h+=r[n++]<<c,c+=8}i.head&&(i.head.time=h),i.flags&512&&(p[0]=h&255,p[1]=h>>>8&255,p[2]=h>>>16&255,p[3]=h>>>24&255,i.check=le(i.check,p,4,0)),h=0,c=0,i.mode=Js;case Js:for(;c<16;){if(l===0)break e;l--,h+=r[n++]<<c,c+=8}i.head&&(i.head.xflags=h&255,i.head.os=h>>8),i.flags&512&&(p[0]=h&255,p[1]=h>>>8&255,i.check=le(i.check,p,2,0)),h=0,c=0,i.mode=eo;case eo:if(i.flags&1024){for(;c<16;){if(l===0)break e;l--,h+=r[n++]<<c,c+=8}i.length=h,i.head&&(i.head.extra_len=h),i.flags&512&&(p[0]=h&255,p[1]=h>>>8&255,i.check=le(i.check,p,2,0)),h=0,c=0}else i.head&&(i.head.extra=null);i.mode=to;case to:if(i.flags&1024&&(u=i.length,u>l&&(u=l),u&&(i.head&&(O=i.head.extra_len-i.length,i.head.extra||(i.head.extra=new Array(i.head.extra_len)),qe(i.head.extra,r,n,u,O)),i.flags&512&&(i.check=le(i.check,r,u,n)),l-=u,n+=u,i.length-=u),i.length))break e;i.length=0,i.mode=io;case io:if(i.flags&2048){if(l===0)break e;u=0;do O=r[n+u++],i.head&&O&&i.length<65536&&(i.head.name+=String.fromCharCode(O));while(O&&u<l);if(i.flags&512&&(i.check=le(i.check,r,u,n)),l-=u,n+=u,O)break e}else i.head&&(i.head.name=null);i.length=0,i.mode=ro;case ro:if(i.flags&4096){if(l===0)break e;u=0;do O=r[n+u++],i.head&&O&&i.length<65536&&(i.head.comment+=String.fromCharCode(O));while(O&&u<l);if(i.flags&512&&(i.check=le(i.check,r,u,n)),l-=u,n+=u,O)break e}else i.head&&(i.head.comment=null);i.mode=no;case no:if(i.flags&512){for(;c<16;){if(l===0)break e;l--,h+=r[n++]<<c,c+=8}if(h!==(i.check&65535)){e.msg="header crc mismatch",i.mode=ie;break}h=0,c=0}i.head&&(i.head.hcrc=i.flags>>9&1,i.head.done=!0),e.adler=i.check=0,i.mode=Xe;break;case so:for(;c<32;){if(l===0)break e;l--,h+=r[n++]<<c,c+=8}e.adler=i.check=wo(h),h=0,c=0,i.mode=oo;case oo:if(i.havedict===0)return e.next_out=s,e.avail_out=f,e.next_in=n,e.avail_in=l,i.hold=h,i.bits=c,dc;e.adler=i.check=1,i.mode=Xe;case Xe:if(t===fc||t===Mi)break e;case Cr:if(i.last){h>>>=c&7,c-=c&7,i.mode=Lr;break}for(;c<3;){if(l===0)break e;l--,h+=r[n++]<<c,c+=8}switch(i.last=h&1,h>>>=1,c-=1,h&3){case 0:i.mode=ao;break;case 1:if(Ac(i),i.mode=Pi,t===Mi){h>>>=2,c-=2;break e}break;case 2:i.mode=uo;break;case 3:e.msg="invalid block type",i.mode=ie}h>>>=2,c-=2;break;case ao:for(h>>>=c&7,c-=c&7;c<32;){if(l===0)break e;l--,h+=r[n++]<<c,c+=8}if((h&65535)!==(h>>>16^65535)){e.msg="invalid stored block lengths",i.mode=ie;break}if(i.length=h&65535,h=0,c=0,i.mode=Ir,t===Mi)break e;case Ir:i.mode=lo;case lo:if(u=i.length,u){if(u>l&&(u=l),u>f&&(u=f),u===0)break e;qe(o,r,n,u,s),l-=u,n+=u,f-=u,s+=u,i.length-=u;break}i.mode=Xe;break;case uo:for(;c<14;){if(l===0)break e;l--,h+=r[n++]<<c,c+=8}if(i.nlen=(h&31)+257,h>>>=5,c-=5,i.ndist=(h&31)+1,h>>>=5,c-=5,i.ncode=(h&15)+4,h>>>=4,c-=4,i.nlen>286||i.ndist>30){e.msg="too many length or distance symbols",i.mode=ie;break}i.have=0,i.mode=ho;case ho:for(;i.have<i.ncode;){for(;c<3;){if(l===0)break e;l--,h+=r[n++]<<c,c+=8}i.lens[F[i.have++]]=h&7,h>>>=3,c-=3}for(;i.have<19;)i.lens[F[i.have++]]=0;if(i.lencode=i.lendyn,i.lenbits=7,S={bits:i.lenbits},I=fi(hc,i.lens,0,19,i.lencode,0,i.work,S),i.lenbits=S.bits,I){e.msg="invalid code lengths set",i.mode=ie;break}i.have=0,i.mode=fo;case fo:for(;i.have<i.nlen+i.ndist;){for(;b=i.lencode[h&(1<<i.lenbits)-1],E=b>>>24,v=b>>>16&255,_=b&65535,!(E<=c);){if(l===0)break e;l--,h+=r[n++]<<c,c+=8}if(_<16)h>>>=E,c-=E,i.lens[i.have++]=_;else{if(_===16){for(R=E+2;c<R;){if(l===0)break e;l--,h+=r[n++]<<c,c+=8}if(h>>>=E,c-=E,i.have===0){e.msg="invalid bit length repeat",i.mode=ie;break}O=i.lens[i.have-1],u=3+(h&3),h>>>=2,c-=2}else if(_===17){for(R=E+3;c<R;){if(l===0)break e;l--,h+=r[n++]<<c,c+=8}h>>>=E,c-=E,O=0,u=3+(h&7),h>>>=3,c-=3}else{for(R=E+7;c<R;){if(l===0)break e;l--,h+=r[n++]<<c,c+=8}h>>>=E,c-=E,O=0,u=11+(h&127),h>>>=7,c-=7}if(i.have+u>i.nlen+i.ndist){e.msg="invalid bit length repeat",i.mode=ie;break}for(;u--;)i.lens[i.have++]=O}}if(i.mode===ie)break;if(i.lens[256]===0){e.msg="invalid code -- missing end-of-block",i.mode=ie;break}if(i.lenbits=9,S={bits:i.lenbits},I=fi(fl,i.lens,0,i.nlen,i.lencode,0,i.work,S),i.lenbits=S.bits,I){e.msg="invalid literal/lengths set",i.mode=ie;break}if(i.distbits=6,i.distcode=i.distdyn,S={bits:i.distbits},I=fi(cl,i.lens,i.nlen,i.ndist,i.distcode,0,i.work,S),i.distbits=S.bits,I){e.msg="invalid distances set",i.mode=ie;break}if(i.mode=Pi,t===Mi)break e;case Pi:i.mode=ki;case ki:if(l>=6&&f>=258){e.next_out=s,e.avail_out=f,e.next_in=n,e.avail_in=l,i.hold=h,i.bits=c,sc(e,a),s=e.next_out,o=e.output,f=e.avail_out,n=e.next_in,r=e.input,l=e.avail_in,h=i.hold,c=i.bits,i.mode===Xe&&(i.back=-1);break}for(i.back=0;b=i.lencode[h&(1<<i.lenbits)-1],E=b>>>24,v=b>>>16&255,_=b&65535,!(E<=c);){if(l===0)break e;l--,h+=r[n++]<<c,c+=8}if(v&&!(v&240)){for(x=E,A=v,C=_;b=i.lencode[C+((h&(1<<x+A)-1)>>x)],E=b>>>24,v=b>>>16&255,_=b&65535,!(x+E<=c);){if(l===0)break e;l--,h+=r[n++]<<c,c+=8}h>>>=x,c-=x,i.back+=x}if(h>>>=E,c-=E,i.back+=E,i.length=_,v===0){i.mode=mo;break}if(v&32){i.back=-1,i.mode=Xe;break}if(v&64){e.msg="invalid literal/length code",i.mode=ie;break}i.extra=v&15,i.mode=co;case co:if(i.extra){for(R=i.extra;c<R;){if(l===0)break e;l--,h+=r[n++]<<c,c+=8}i.length+=h&(1<<i.extra)-1,h>>>=i.extra,c-=i.extra,i.back+=i.extra}i.was=i.length,i.mode=po;case po:for(;b=i.distcode[h&(1<<i.distbits)-1],E=b>>>24,v=b>>>16&255,_=b&65535,!(E<=c);){if(l===0)break e;l--,h+=r[n++]<<c,c+=8}if(!(v&240)){for(x=E,A=v,C=_;b=i.distcode[C+((h&(1<<x+A)-1)>>x)],E=b>>>24,v=b>>>16&255,_=b&65535,!(x+E<=c);){if(l===0)break e;l--,h+=r[n++]<<c,c+=8}h>>>=x,c-=x,i.back+=x}if(h>>>=E,c-=E,i.back+=E,v&64){e.msg="invalid distance code",i.mode=ie;break}i.offset=_,i.extra=v&15,i.mode=_o;case _o:if(i.extra){for(R=i.extra;c<R;){if(l===0)break e;l--,h+=r[n++]<<c,c+=8}i.offset+=h&(1<<i.extra)-1,h>>>=i.extra,c-=i.extra,i.back+=i.extra}if(i.offset>i.dmax){e.msg="invalid distance too far back",i.mode=ie;break}i.mode=go;case go:if(f===0)break e;if(u=a-f,i.offset>u){if(u=i.offset-u,u>i.whave&&i.sane){e.msg="invalid distance too far back",i.mode=ie;break}u>i.wnext?(u-=i.wnext,d=i.wsize-u):d=i.wnext-u,u>i.length&&(u=i.length),y=i.window}else y=o,d=s-i.offset,u=i.length;u>f&&(u=f),f-=u,i.length-=u;do o[s++]=y[d++];while(--u);i.length===0&&(i.mode=ki);break;case mo:if(f===0)break e;o[s++]=i.length,f--,i.mode=ki;break;case Lr:if(i.wrap){for(;c<32;){if(l===0)break e;l--,h|=r[n++]<<c,c+=8}if(a-=f,e.total_out+=a,i.total+=a,a&&(e.adler=i.check=i.flags?le(i.check,o,a,s-a):On(i.check,o,a,s-a)),a=f,(i.flags?h:wo(h))!==i.check){e.msg="incorrect data check",i.mode=ie;break}h=0,c=0}i.mode=yo;case yo:if(i.wrap&&i.flags){for(;c<32;){if(l===0)break e;l--,h+=r[n++]<<c,c+=8}if(h!==(i.total&4294967295)){e.msg="incorrect length check",i.mode=ie;break}h=0,c=0}i.mode=vo;case vo:I=cc;break e;case ie:I=pc;break e;case mc:return _c;case yc:default:return ct}return e.next_out=s,e.avail_out=f,e.next_in=n,e.avail_in=l,i.hold=h,i.bits=c,(i.wsize||a!==e.avail_out&&i.mode<ie&&(i.mode<Lr||t!==Ys))&&Sc(e,e.output,e.next_out,a-e.avail_out),g-=e.avail_in,a-=e.avail_out,e.total_in+=g,e.total_out+=a,i.total+=a,i.wrap&&a&&(e.adler=i.check=i.flags?le(i.check,o,a,e.next_out-a):On(i.check,o,a,e.next_out-a)),e.data_type=i.bits+(i.last?64:0)+(i.mode===Xe?128:0)+(i.mode===Pi||i.mode===Ir?256:0),(g===0&&a===0||t===Ys)&&I===vi&&(I=gc),I}function Oc(e){if(!e||!e.state)return ct;var t=e.state;return t.window&&(t.window=null),e.state=null,vi}var $n=0,ri=1,lr=2,wi=3,Qi=4,$t=5,bi=6,xi=7,_l=0,gl=1,ml=2,yl=3,vl=4,wl=5,Cc=6,ur=0,bl=1,Ic=2,Lc=-1,Rc=-2,Nc=-3,Mc=-5,Pc=0,kc=1,Fc=9,Bc=-1,Uc=1,zc=2,Xc=3,jc=4,Hc=0,Vc=0,Gc=1,Wc=2,xl=8;function Ue(e){if(e<ri||e>xi)throw new TypeError("Bad argument");this.mode=e,this.init_done=!1,this.write_in_progress=!1,this.pending_close=!1,this.windowBits=0,this.level=0,this.memLevel=0,this.strategy=0,this.dictionary=null}Ue.prototype.init=function(e,t,i,r,o){this.windowBits=e,this.level=t,this.memLevel=i,this.strategy=r,(this.mode===wi||this.mode===Qi)&&(this.windowBits+=16),this.mode===xi&&(this.windowBits+=32),(this.mode===$t||this.mode===bi)&&(this.windowBits=-this.windowBits),this.strm=new uf;var n;switch(this.mode){case ri:case wi:case $t:n=tc(this.strm,this.level,xl,this.windowBits,this.memLevel,this.strategy);break;case lr:case Qi:case bi:case xi:n=Tc(this.strm,this.windowBits);break;default:throw new Error("Unknown mode "+this.mode)}if(n!==ur){this._error(n);return}this.write_in_progress=!1,this.init_done=!0};Ue.prototype.params=function(){throw new Error("deflateParams Not supported")};Ue.prototype._writeCheck=function(){if(!this.init_done)throw new Error("write before init");if(this.mode===$n)throw new Error("already finalized");if(this.write_in_progress)throw new Error("write already in progress");if(this.pending_close)throw new Error("close is pending")};Ue.prototype.write=function(e,t,i,r,o,n,s){this._writeCheck(),this.write_in_progress=!0;var l=this;return process.nextTick(function(){l.write_in_progress=!1;var f=l._write(e,t,i,r,o,n,s);l.callback(f[0],f[1]),l.pending_close&&l.close()}),this};function qc(e,t){for(var i=0;i<e.length;i++)this[t+i]=e[i]}Ue.prototype.writeSync=function(e,t,i,r,o,n,s){return this._writeCheck(),this._write(e,t,i,r,o,n,s)};Ue.prototype._write=function(e,t,i,r,o,n,s){if(this.write_in_progress=!0,e!==_l&&e!==gl&&e!==ml&&e!==yl&&e!==vl&&e!==wl)throw new Error("Invalid flush value");t==null&&(t=new Buffer(0),r=0,i=0),o._set?o.set=o._set:o.set=qc;var l=this.strm;l.avail_in=r,l.input=t,l.next_in=i,l.avail_out=s,l.output=o,l.next_out=n;var f;switch(this.mode){case ri:case wi:case $t:f=ic(l,e);break;case xi:case lr:case Qi:case bi:f=Dc(l,e);break;default:throw new Error("Unknown mode "+this.mode)}return f!==bl&&f!==ur&&this._error(f),this.write_in_progress=!1,[l.avail_in,l.avail_out]};Ue.prototype.close=function(){if(this.write_in_progress){this.pending_close=!0;return}this.pending_close=!1,this.mode===ri||this.mode===wi||this.mode===$t?rc(this.strm):Oc(this.strm),this.mode=$n};var Fi;Ue.prototype.reset=function(){switch(this.mode){case ri:case $t:Fi=hl(this.strm);break;case lr:case bi:Fi=pl(this.strm);break}Fi!==ur&&this._error(Fi)};Ue.prototype._error=function(e){this.onerror(qa[e]+": "+this.strm.msg,e),this.write_in_progress=!1,this.pending_close&&this.close()};const xo=Object.freeze(Object.defineProperty({__proto__:null,DEFLATE:ri,DEFLATERAW:$t,GUNZIP:Qi,GZIP:wi,INFLATE:lr,INFLATERAW:bi,NONE:$n,UNZIP:xi,Z_BEST_COMPRESSION:Fc,Z_BEST_SPEED:kc,Z_BINARY:Vc,Z_BLOCK:wl,Z_BUF_ERROR:Mc,Z_DATA_ERROR:Nc,Z_DEFAULT_COMPRESSION:Bc,Z_DEFAULT_STRATEGY:Hc,Z_DEFLATED:xl,Z_ERRNO:Lc,Z_FILTERED:Uc,Z_FINISH:vl,Z_FIXED:jc,Z_FULL_FLUSH:yl,Z_HUFFMAN_ONLY:zc,Z_NEED_DICT:Ic,Z_NO_COMPRESSION:Pc,Z_NO_FLUSH:_l,Z_OK:ur,Z_PARTIAL_FLUSH:gl,Z_RLE:Xc,Z_STREAM_END:bl,Z_STREAM_ERROR:Rc,Z_SYNC_FLUSH:ml,Z_TEXT:Gc,Z_TREES:Cc,Z_UNKNOWN:Wc,Zlib:Ue},Symbol.toStringTag,{value:"Module"}));function Zc(e,t){if(!e)throw new Error(t)}var U={};Object.keys(xo).forEach(function(e){U[e]=xo[e]});U.Z_MIN_WINDOWBITS=8;U.Z_MAX_WINDOWBITS=15;U.Z_DEFAULT_WINDOWBITS=15;U.Z_MIN_CHUNK=64;U.Z_MAX_CHUNK=1/0;U.Z_DEFAULT_CHUNK=16*1024;U.Z_MIN_MEMLEVEL=1;U.Z_MAX_MEMLEVEL=9;U.Z_DEFAULT_MEMLEVEL=8;U.Z_MIN_LEVEL=-1;U.Z_MAX_LEVEL=9;U.Z_DEFAULT_LEVEL=U.Z_DEFAULT_COMPRESSION;var Gi={Z_OK:U.Z_OK,Z_STREAM_END:U.Z_STREAM_END,Z_NEED_DICT:U.Z_NEED_DICT,Z_ERRNO:U.Z_ERRNO,Z_STREAM_ERROR:U.Z_STREAM_ERROR,Z_DATA_ERROR:U.Z_DATA_ERROR,Z_MEM_ERROR:U.Z_MEM_ERROR,Z_BUF_ERROR:U.Z_BUF_ERROR,Z_VERSION_ERROR:U.Z_VERSION_ERROR};Object.keys(Gi).forEach(function(e){Gi[Gi[e]]=e});function Yc(e){return new At(e)}function Kc(e){return new St(e)}function $c(e){return new Ct(e)}function Qc(e){return new It(e)}function Jc(e){return new Dt(e)}function ed(e){return new Ot(e)}function td(e){return new Lt(e)}function id(e,t,i){return typeof t=="function"&&(i=t,t={}),Pt(new At(t),e,i)}function rd(e,t){return kt(new At(t),e)}function nd(e,t,i){return typeof t=="function"&&(i=t,t={}),Pt(new Dt(t),e,i)}function sd(e,t){return kt(new Dt(t),e)}function od(e,t,i){return typeof t=="function"&&(i=t,t={}),Pt(new Ct(t),e,i)}function ad(e,t){return kt(new Ct(t),e)}function ld(e,t,i){return typeof t=="function"&&(i=t,t={}),Pt(new Lt(t),e,i)}function ud(e,t){return kt(new Lt(t),e)}function hd(e,t,i){return typeof t=="function"&&(i=t,t={}),Pt(new St(t),e,i)}function fd(e,t){return kt(new St(t),e)}function cd(e,t,i){return typeof t=="function"&&(i=t,t={}),Pt(new Ot(t),e,i)}function dd(e,t){return kt(new Ot(t),e)}function pd(e,t,i){return typeof t=="function"&&(i=t,t={}),Pt(new It(t),e,i)}function _d(e,t){return kt(new It(t),e)}function Pt(e,t,i){var r=[],o=0;e.on("error",s),e.on("end",l),e.end(t),n();function n(){for(var f;(f=e.read())!==null;)r.push(f),o+=f.length;e.once("readable",n)}function s(f){e.removeListener("end",l),e.removeListener("readable",n),i(f)}function l(){var f=Buffer.concat(r,o);r=[],i(null,f),e.close()}}function kt(e,t){if(typeof t=="string"&&(t=new Buffer(t)),!Buffer.isBuffer(t))throw new TypeError("Not a string or buffer");var i=U.Z_FINISH;return e._processChunk(t,i)}function At(e){if(!(this instanceof At))return new At(e);ne.call(this,e,U.DEFLATE)}function St(e){if(!(this instanceof St))return new St(e);ne.call(this,e,U.INFLATE)}function Dt(e){if(!(this instanceof Dt))return new Dt(e);ne.call(this,e,U.GZIP)}function Ot(e){if(!(this instanceof Ot))return new Ot(e);ne.call(this,e,U.GUNZIP)}function Ct(e){if(!(this instanceof Ct))return new Ct(e);ne.call(this,e,U.DEFLATERAW)}function It(e){if(!(this instanceof It))return new It(e);ne.call(this,e,U.INFLATERAW)}function Lt(e){if(!(this instanceof Lt))return new Lt(e);ne.call(this,e,U.UNZIP)}function ne(e,t){if(this._opts=e=e||{},this._chunkSize=e.chunkSize||U.Z_DEFAULT_CHUNK,xe.call(this,e),e.flush&&e.flush!==U.Z_NO_FLUSH&&e.flush!==U.Z_PARTIAL_FLUSH&&e.flush!==U.Z_SYNC_FLUSH&&e.flush!==U.Z_FULL_FLUSH&&e.flush!==U.Z_FINISH&&e.flush!==U.Z_BLOCK)throw new Error("Invalid flush flag: "+e.flush);if(this._flushFlag=e.flush||U.Z_NO_FLUSH,e.chunkSize&&(e.chunkSize<U.Z_MIN_CHUNK||e.chunkSize>U.Z_MAX_CHUNK))throw new Error("Invalid chunk size: "+e.chunkSize);if(e.windowBits&&(e.windowBits<U.Z_MIN_WINDOWBITS||e.windowBits>U.Z_MAX_WINDOWBITS))throw new Error("Invalid windowBits: "+e.windowBits);if(e.level&&(e.level<U.Z_MIN_LEVEL||e.level>U.Z_MAX_LEVEL))throw new Error("Invalid compression level: "+e.level);if(e.memLevel&&(e.memLevel<U.Z_MIN_MEMLEVEL||e.memLevel>U.Z_MAX_MEMLEVEL))throw new Error("Invalid memLevel: "+e.memLevel);if(e.strategy&&e.strategy!=U.Z_FILTERED&&e.strategy!=U.Z_HUFFMAN_ONLY&&e.strategy!=U.Z_RLE&&e.strategy!=U.Z_FIXED&&e.strategy!=U.Z_DEFAULT_STRATEGY)throw new Error("Invalid strategy: "+e.strategy);if(e.dictionary&&!Buffer.isBuffer(e.dictionary))throw new Error("Invalid dictionary: it should be a Buffer instance");this._binding=new U.Zlib(t);var i=this;this._hadError=!1,this._binding.onerror=function(n,s){i._binding=null,i._hadError=!0;var l=new Error(n);l.errno=s,l.code=U.codes[s],i.emit("error",l)};var r=U.Z_DEFAULT_COMPRESSION;typeof e.level=="number"&&(r=e.level);var o=U.Z_DEFAULT_STRATEGY;typeof e.strategy=="number"&&(o=e.strategy),this._binding.init(e.windowBits||U.Z_DEFAULT_WINDOWBITS,r,e.memLevel||U.Z_DEFAULT_MEMLEVEL,o,e.dictionary),this._buffer=new Buffer(this._chunkSize),this._offset=0,this._closed=!1,this._level=r,this._strategy=o,this.once("end",this.close)}me(ne,xe);ne.prototype.params=function(e,t,i){if(e<U.Z_MIN_LEVEL||e>U.Z_MAX_LEVEL)throw new RangeError("Invalid compression level: "+e);if(t!=U.Z_FILTERED&&t!=U.Z_HUFFMAN_ONLY&&t!=U.Z_RLE&&t!=U.Z_FIXED&&t!=U.Z_DEFAULT_STRATEGY)throw new TypeError("Invalid strategy: "+t);if(this._level!==e||this._strategy!==t){var r=this;this.flush(U.Z_SYNC_FLUSH,function(){r._binding.params(e,t),r._hadError||(r._level=e,r._strategy=t,i&&i())})}else process.nextTick(i)};ne.prototype.reset=function(){return this._binding.reset()};ne.prototype._flush=function(e){this._transform(new Buffer(0),"",e)};ne.prototype.flush=function(e,t){var i=this._writableState;if((typeof e=="function"||e===void 0&&!t)&&(t=e,e=U.Z_FULL_FLUSH),i.ended)t&&process.nextTick(t);else if(i.ending)t&&this.once("end",t);else if(i.needDrain){var r=this;this.once("drain",function(){r.flush(t)})}else this._flushFlag=e,this.write(new Buffer(0),"",t)};ne.prototype.close=function(e){if(e&&process.nextTick(e),!this._closed){this._closed=!0,this._binding.close();var t=this;process.nextTick(function(){t.emit("close")})}};ne.prototype._transform=function(e,t,i){var r,o=this._writableState,n=o.ending||o.ended,s=n&&(!e||o.length===e.length);if(!e===null&&!Buffer.isBuffer(e))return i(new Error("invalid input"));s?r=U.Z_FINISH:(r=this._flushFlag,e.length>=o.length&&(this._flushFlag=this._opts.flush||U.Z_NO_FLUSH)),this._processChunk(e,r,i)};ne.prototype._processChunk=function(e,t,i){var r=e&&e.length,o=this._chunkSize-this._offset,n=0,s=this,l=typeof i=="function";if(!l){var f=[],h=0,c;this.on("error",function(y){c=y});do var g=this._binding.writeSync(t,e,n,r,this._buffer,this._offset,o);while(!this._hadError&&d(g[0],g[1]));if(this._hadError)throw c;var a=Buffer.concat(f,h);return this.close(),a}var u=this._binding.write(t,e,n,r,this._buffer,this._offset,o);u.buffer=e,u.callback=d;function d(y,b){if(!s._hadError){var E=o-b;if(Zc(E>=0,"have should not go down"),E>0){var v=s._buffer.slice(s._offset,s._offset+E);s._offset+=E,l?s.push(v):(f.push(v),h+=v.length)}if((b===0||s._offset>=s._chunkSize)&&(o=s._chunkSize,s._offset=0,s._buffer=new Buffer(s._chunkSize)),b===0){if(n+=r-y,r=y,!l)return!0;var _=s._binding.write(t,e,n,r,s._buffer,s._offset,s._chunkSize);_.callback=d,_.buffer=e;return}if(!l)return!1;i()}}};me(At,ne);me(St,ne);me(Dt,ne);me(Ot,ne);me(Ct,ne);me(It,ne);me(Lt,ne);const Eo={codes:Gi,createDeflate:Yc,createInflate:Kc,createDeflateRaw:$c,createInflateRaw:Qc,createGzip:Jc,createGunzip:ed,createUnzip:td,deflate:id,deflateSync:rd,gzip:nd,gzipSync:sd,deflateRaw:od,deflateRawSync:ad,unzip:ld,unzipSync:ud,inflate:hd,inflateSync:fd,gunzip:cd,gunzipSync:dd,inflateRaw:pd,inflateRawSync:_d,Deflate:At,Inflate:St,Gzip:Dt,Gunzip:Ot,DeflateRaw:Ct,InflateRaw:It,Unzip:Lt,Zlib:ne};var Mr={},To;function Qn(){return To||(To=1,function(){Mr.defaults={"0.1":{explicitCharkey:!1,trim:!0,normalize:!0,normalizeTags:!1,attrkey:"@",charkey:"#",explicitArray:!1,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!1,validator:null,xmlns:!1,explicitChildren:!1,childkey:"@@",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,emptyTag:""},"0.2":{explicitCharkey:!1,trim:!1,normalize:!1,normalizeTags:!1,attrkey:"$",charkey:"_",explicitArray:!0,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!0,validator:null,xmlns:!1,explicitChildren:!1,preserveChildrenOrder:!1,childkey:"$$",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,rootName:"root",xmldec:{version:"1.0",encoding:"UTF-8",standalone:!0},doctype:null,renderOpts:{pretty:!0,indent:"  ",newline:`
`},headless:!1,chunkSize:1e4,emptyTag:"",cdata:!1}}}.call(q)),Mr}var Pr={},je={},He={},Ao;function Ye(){return Ao||(Ao=1,function(){var e,t,i,r,o,n,s,l=[].slice,f={}.hasOwnProperty;e=function(){var h,c,g,a,u,d;if(d=arguments[0],u=2<=arguments.length?l.call(arguments,1):[],o(Object.assign))Object.assign.apply(null,arguments);else for(h=0,g=u.length;h<g;h++)if(a=u[h],a!=null)for(c in a)f.call(a,c)&&(d[c]=a[c]);return d},o=function(h){return!!h&&Object.prototype.toString.call(h)==="[object Function]"},n=function(h){var c;return!!h&&((c=typeof h)=="function"||c==="object")},i=function(h){return o(Array.isArray)?Array.isArray(h):Object.prototype.toString.call(h)==="[object Array]"},r=function(h){var c;if(i(h))return!h.length;for(c in h)if(f.call(h,c))return!1;return!0},s=function(h){var c,g;return n(h)&&(g=Object.getPrototypeOf(h))&&(c=g.constructor)&&typeof c=="function"&&c instanceof c&&Function.prototype.toString.call(c)===Function.prototype.toString.call(Object)},t=function(h){return o(h.valueOf)?h.valueOf():h},He.assign=e,He.isFunction=o,He.isObject=n,He.isArray=i,He.isEmpty=r,He.isPlainObject=s,He.getValue=t}.call(q)),He}var kr={exports:{}},So;function El(){return So||(So=1,function(){kr.exports=function(){function e(){}return e.prototype.hasFeature=function(t,i){return!0},e.prototype.createDocumentType=function(t,i,r){throw new Error("This DOM method is not implemented.")},e.prototype.createDocument=function(t,i,r){throw new Error("This DOM method is not implemented.")},e.prototype.createHTMLDocument=function(t){throw new Error("This DOM method is not implemented.")},e.prototype.getFeature=function(t,i){throw new Error("This DOM method is not implemented.")},e}()}.call(q)),kr.exports}var Fr={exports:{}},Br={exports:{}},Ur={exports:{}},Do;function gd(){return Do||(Do=1,function(){Ur.exports=function(){function e(){}return e.prototype.handleError=function(t){throw new Error(t)},e}()}.call(q)),Ur.exports}var zr={exports:{}},Oo;function md(){return Oo||(Oo=1,function(){zr.exports=function(){function e(t){this.arr=t||[]}return Object.defineProperty(e.prototype,"length",{get:function(){return this.arr.length}}),e.prototype.item=function(t){return this.arr[t]||null},e.prototype.contains=function(t){return this.arr.indexOf(t)!==-1},e}()}.call(q)),zr.exports}var Co;function yd(){return Co||(Co=1,function(){var e,t;e=gd(),t=md(),Br.exports=function(){function i(){this.defaultParams={"canonical-form":!1,"cdata-sections":!1,comments:!1,"datatype-normalization":!1,"element-content-whitespace":!0,entities:!0,"error-handler":new e,infoset:!0,"validate-if-schema":!1,namespaces:!0,"namespace-declarations":!0,"normalize-characters":!1,"schema-location":"","schema-type":"","split-cdata-sections":!0,validate:!1,"well-formed":!0},this.params=Object.create(this.defaultParams)}return Object.defineProperty(i.prototype,"parameterNames",{get:function(){return new t(Object.keys(this.defaultParams))}}),i.prototype.getParameter=function(r){return this.params.hasOwnProperty(r)?this.params[r]:null},i.prototype.canSetParameter=function(r,o){return!0},i.prototype.setParameter=function(r,o){return o!=null?this.params[r]=o:delete this.params[r]},i}()}.call(q)),Br.exports}var Xr={exports:{}},jr={exports:{}},Hr={exports:{}},Io;function se(){return Io||(Io=1,function(){Hr.exports={Element:1,Attribute:2,Text:3,CData:4,EntityReference:5,EntityDeclaration:6,ProcessingInstruction:7,Comment:8,Document:9,DocType:10,DocumentFragment:11,NotationDeclaration:12,Declaration:201,Raw:202,AttributeDeclaration:203,ElementDeclaration:204,Dummy:205}}.call(q)),Hr.exports}var Vr={exports:{}},Lo;function Tl(){return Lo||(Lo=1,function(){var e;e=se(),De(),Vr.exports=function(){function t(i,r,o){if(this.parent=i,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),r==null)throw new Error("Missing attribute name. "+this.debugInfo(r));this.name=this.stringify.name(r),this.value=this.stringify.attValue(o),this.type=e.Attribute,this.isId=!1,this.schemaTypeInfo=null}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(t.prototype,"ownerElement",{get:function(){return this.parent}}),Object.defineProperty(t.prototype,"textContent",{get:function(){return this.value},set:function(i){return this.value=i||""}}),Object.defineProperty(t.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(t.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(t.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(t.prototype,"specified",{get:function(){return!0}}),t.prototype.clone=function(){return Object.create(this)},t.prototype.toString=function(i){return this.options.writer.attribute(this,this.options.writer.filterOptions(i))},t.prototype.debugInfo=function(i){return i=i||this.name,i==null?"parent: <"+this.parent.name+">":"attribute: {"+i+"}, parent: <"+this.parent.name+">"},t.prototype.isEqualNode=function(i){return!(i.namespaceURI!==this.namespaceURI||i.prefix!==this.prefix||i.localName!==this.localName||i.value!==this.value)},t}()}.call(q)),Vr.exports}var Gr={exports:{}},Ro;function Jn(){return Ro||(Ro=1,function(){Gr.exports=function(){function e(t){this.nodes=t}return Object.defineProperty(e.prototype,"length",{get:function(){return Object.keys(this.nodes).length||0}}),e.prototype.clone=function(){return this.nodes=null},e.prototype.getNamedItem=function(t){return this.nodes[t]},e.prototype.setNamedItem=function(t){var i;return i=this.nodes[t.nodeName],this.nodes[t.nodeName]=t,i||null},e.prototype.removeNamedItem=function(t){var i;return i=this.nodes[t],delete this.nodes[t],i||null},e.prototype.item=function(t){return this.nodes[Object.keys(this.nodes)[t]]||null},e.prototype.getNamedItemNS=function(t,i){throw new Error("This DOM method is not implemented.")},e.prototype.setNamedItemNS=function(t){throw new Error("This DOM method is not implemented.")},e.prototype.removeNamedItemNS=function(t,i){throw new Error("This DOM method is not implemented.")},e}()}.call(q)),Gr.exports}var No;function es(){return No||(No=1,function(){var e,t,i,r,o,n,s,l,f=function(c,g){for(var a in g)h.call(g,a)&&(c[a]=g[a]);function u(){this.constructor=c}return u.prototype=g.prototype,c.prototype=new u,c.__super__=g.prototype,c},h={}.hasOwnProperty;l=Ye(),s=l.isObject,n=l.isFunction,o=l.getValue,r=De(),e=se(),t=Tl(),i=Jn(),jr.exports=function(c){f(g,c);function g(a,u,d){var y,b,E,v;if(g.__super__.constructor.call(this,a),u==null)throw new Error("Missing element name. "+this.debugInfo());if(this.name=this.stringify.name(u),this.type=e.Element,this.attribs={},this.schemaTypeInfo=null,d!=null&&this.attribute(d),a.type===e.Document&&(this.isRoot=!0,this.documentObject=a,a.rootObject=this,a.children)){for(v=a.children,b=0,E=v.length;b<E;b++)if(y=v[b],y.type===e.DocType){y.name=this.name;break}}}return Object.defineProperty(g.prototype,"tagName",{get:function(){return this.name}}),Object.defineProperty(g.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(g.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(g.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(g.prototype,"id",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(g.prototype,"className",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(g.prototype,"classList",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(g.prototype,"attributes",{get:function(){return(!this.attributeMap||!this.attributeMap.nodes)&&(this.attributeMap=new i(this.attribs)),this.attributeMap}}),g.prototype.clone=function(){var a,u,d,y;d=Object.create(this),d.isRoot&&(d.documentObject=null),d.attribs={},y=this.attribs;for(u in y)h.call(y,u)&&(a=y[u],d.attribs[u]=a.clone());return d.children=[],this.children.forEach(function(b){var E;return E=b.clone(),E.parent=d,d.children.push(E)}),d},g.prototype.attribute=function(a,u){var d,y;if(a!=null&&(a=o(a)),s(a))for(d in a)h.call(a,d)&&(y=a[d],this.attribute(d,y));else n(u)&&(u=u.apply()),this.options.keepNullAttributes&&u==null?this.attribs[a]=new t(this,a,""):u!=null&&(this.attribs[a]=new t(this,a,u));return this},g.prototype.removeAttribute=function(a){var u,d,y;if(a==null)throw new Error("Missing attribute name. "+this.debugInfo());if(a=o(a),Array.isArray(a))for(d=0,y=a.length;d<y;d++)u=a[d],delete this.attribs[u];else delete this.attribs[a];return this},g.prototype.toString=function(a){return this.options.writer.element(this,this.options.writer.filterOptions(a))},g.prototype.att=function(a,u){return this.attribute(a,u)},g.prototype.a=function(a,u){return this.attribute(a,u)},g.prototype.getAttribute=function(a){return this.attribs.hasOwnProperty(a)?this.attribs[a].value:null},g.prototype.setAttribute=function(a,u){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.getAttributeNode=function(a){return this.attribs.hasOwnProperty(a)?this.attribs[a]:null},g.prototype.setAttributeNode=function(a){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.removeAttributeNode=function(a){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.getElementsByTagName=function(a){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.getAttributeNS=function(a,u){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.setAttributeNS=function(a,u,d){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.removeAttributeNS=function(a,u){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.getAttributeNodeNS=function(a,u){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.setAttributeNodeNS=function(a){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.getElementsByTagNameNS=function(a,u){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.hasAttribute=function(a){return this.attribs.hasOwnProperty(a)},g.prototype.hasAttributeNS=function(a,u){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.setIdAttribute=function(a,u){return this.attribs.hasOwnProperty(a)?this.attribs[a].isId:u},g.prototype.setIdAttributeNS=function(a,u,d){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.setIdAttributeNode=function(a,u){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.getElementsByTagName=function(a){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.getElementsByTagNameNS=function(a,u){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.getElementsByClassName=function(a){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.isEqualNode=function(a){var u,d,y;if(!g.__super__.isEqualNode.apply(this,arguments).isEqualNode(a)||a.namespaceURI!==this.namespaceURI||a.prefix!==this.prefix||a.localName!==this.localName||a.attribs.length!==this.attribs.length)return!1;for(u=d=0,y=this.attribs.length-1;0<=y?d<=y:d>=y;u=0<=y?++d:--d)if(!this.attribs[u].isEqualNode(a.attribs[u]))return!1;return!0},g}(r)}.call(q)),jr.exports}var Wr={exports:{}},qr={exports:{}},Mo;function hr(){return Mo||(Mo=1,function(){var e,t=function(r,o){for(var n in o)i.call(o,n)&&(r[n]=o[n]);function s(){this.constructor=r}return s.prototype=o.prototype,r.prototype=new s,r.__super__=o.prototype,r},i={}.hasOwnProperty;e=De(),qr.exports=function(r){t(o,r);function o(n){o.__super__.constructor.call(this,n),this.value=""}return Object.defineProperty(o.prototype,"data",{get:function(){return this.value},set:function(n){return this.value=n||""}}),Object.defineProperty(o.prototype,"length",{get:function(){return this.value.length}}),Object.defineProperty(o.prototype,"textContent",{get:function(){return this.value},set:function(n){return this.value=n||""}}),o.prototype.clone=function(){return Object.create(this)},o.prototype.substringData=function(n,s){throw new Error("This DOM method is not implemented."+this.debugInfo())},o.prototype.appendData=function(n){throw new Error("This DOM method is not implemented."+this.debugInfo())},o.prototype.insertData=function(n,s){throw new Error("This DOM method is not implemented."+this.debugInfo())},o.prototype.deleteData=function(n,s){throw new Error("This DOM method is not implemented."+this.debugInfo())},o.prototype.replaceData=function(n,s,l){throw new Error("This DOM method is not implemented."+this.debugInfo())},o.prototype.isEqualNode=function(n){return!(!o.__super__.isEqualNode.apply(this,arguments).isEqualNode(n)||n.data!==this.data)},o}(e)}.call(q)),qr.exports}var Po;function ts(){return Po||(Po=1,function(){var e,t,i=function(o,n){for(var s in n)r.call(n,s)&&(o[s]=n[s]);function l(){this.constructor=o}return l.prototype=n.prototype,o.prototype=new l,o.__super__=n.prototype,o},r={}.hasOwnProperty;e=se(),t=hr(),Wr.exports=function(o){i(n,o);function n(s,l){if(n.__super__.constructor.call(this,s),l==null)throw new Error("Missing CDATA text. "+this.debugInfo());this.name="#cdata-section",this.type=e.CData,this.value=this.stringify.cdata(l)}return n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(s){return this.options.writer.cdata(this,this.options.writer.filterOptions(s))},n}(t)}.call(q)),Wr.exports}var Zr={exports:{}},ko;function is(){return ko||(ko=1,function(){var e,t,i=function(o,n){for(var s in n)r.call(n,s)&&(o[s]=n[s]);function l(){this.constructor=o}return l.prototype=n.prototype,o.prototype=new l,o.__super__=n.prototype,o},r={}.hasOwnProperty;e=se(),t=hr(),Zr.exports=function(o){i(n,o);function n(s,l){if(n.__super__.constructor.call(this,s),l==null)throw new Error("Missing comment text. "+this.debugInfo());this.name="#comment",this.type=e.Comment,this.value=this.stringify.comment(l)}return n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(s){return this.options.writer.comment(this,this.options.writer.filterOptions(s))},n}(t)}.call(q)),Zr.exports}var Yr={exports:{}},Fo;function rs(){return Fo||(Fo=1,function(){var e,t,i,r=function(n,s){for(var l in s)o.call(s,l)&&(n[l]=s[l]);function f(){this.constructor=n}return f.prototype=s.prototype,n.prototype=new f,n.__super__=s.prototype,n},o={}.hasOwnProperty;i=Ye().isObject,t=De(),e=se(),Yr.exports=function(n){r(s,n);function s(l,f,h,c){var g;s.__super__.constructor.call(this,l),i(f)&&(g=f,f=g.version,h=g.encoding,c=g.standalone),f||(f="1.0"),this.type=e.Declaration,this.version=this.stringify.xmlVersion(f),h!=null&&(this.encoding=this.stringify.xmlEncoding(h)),c!=null&&(this.standalone=this.stringify.xmlStandalone(c))}return s.prototype.toString=function(l){return this.options.writer.declaration(this,this.options.writer.filterOptions(l))},s}(t)}.call(q)),Yr.exports}var Kr={exports:{}},$r={exports:{}},Bo;function ns(){return Bo||(Bo=1,function(){var e,t,i=function(o,n){for(var s in n)r.call(n,s)&&(o[s]=n[s]);function l(){this.constructor=o}return l.prototype=n.prototype,o.prototype=new l,o.__super__=n.prototype,o},r={}.hasOwnProperty;t=De(),e=se(),$r.exports=function(o){i(n,o);function n(s,l,f,h,c,g){if(n.__super__.constructor.call(this,s),l==null)throw new Error("Missing DTD element name. "+this.debugInfo());if(f==null)throw new Error("Missing DTD attribute name. "+this.debugInfo(l));if(!h)throw new Error("Missing DTD attribute type. "+this.debugInfo(l));if(!c)throw new Error("Missing DTD attribute default. "+this.debugInfo(l));if(c.indexOf("#")!==0&&(c="#"+c),!c.match(/^(#REQUIRED|#IMPLIED|#FIXED|#DEFAULT)$/))throw new Error("Invalid default value type; expected: #REQUIRED, #IMPLIED, #FIXED or #DEFAULT. "+this.debugInfo(l));if(g&&!c.match(/^(#FIXED|#DEFAULT)$/))throw new Error("Default value only applies to #FIXED or #DEFAULT. "+this.debugInfo(l));this.elementName=this.stringify.name(l),this.type=e.AttributeDeclaration,this.attributeName=this.stringify.name(f),this.attributeType=this.stringify.dtdAttType(h),g&&(this.defaultValue=this.stringify.dtdAttDefault(g)),this.defaultValueType=c}return n.prototype.toString=function(s){return this.options.writer.dtdAttList(this,this.options.writer.filterOptions(s))},n}(t)}.call(q)),$r.exports}var Qr={exports:{}},Uo;function ss(){return Uo||(Uo=1,function(){var e,t,i,r=function(n,s){for(var l in s)o.call(s,l)&&(n[l]=s[l]);function f(){this.constructor=n}return f.prototype=s.prototype,n.prototype=new f,n.__super__=s.prototype,n},o={}.hasOwnProperty;i=Ye().isObject,t=De(),e=se(),Qr.exports=function(n){r(s,n);function s(l,f,h,c){if(s.__super__.constructor.call(this,l),h==null)throw new Error("Missing DTD entity name. "+this.debugInfo(h));if(c==null)throw new Error("Missing DTD entity value. "+this.debugInfo(h));if(this.pe=!!f,this.name=this.stringify.name(h),this.type=e.EntityDeclaration,!i(c))this.value=this.stringify.dtdEntityValue(c),this.internal=!0;else{if(!c.pubID&&!c.sysID)throw new Error("Public and/or system identifiers are required for an external entity. "+this.debugInfo(h));if(c.pubID&&!c.sysID)throw new Error("System identifier is required for a public external entity. "+this.debugInfo(h));if(this.internal=!1,c.pubID!=null&&(this.pubID=this.stringify.dtdPubID(c.pubID)),c.sysID!=null&&(this.sysID=this.stringify.dtdSysID(c.sysID)),c.nData!=null&&(this.nData=this.stringify.dtdNData(c.nData)),this.pe&&this.nData)throw new Error("Notation declaration is not allowed in a parameter entity. "+this.debugInfo(h))}}return Object.defineProperty(s.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(s.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(s.prototype,"notationName",{get:function(){return this.nData||null}}),Object.defineProperty(s.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(s.prototype,"xmlEncoding",{get:function(){return null}}),Object.defineProperty(s.prototype,"xmlVersion",{get:function(){return null}}),s.prototype.toString=function(l){return this.options.writer.dtdEntity(this,this.options.writer.filterOptions(l))},s}(t)}.call(q)),Qr.exports}var Jr={exports:{}},zo;function os(){return zo||(zo=1,function(){var e,t,i=function(o,n){for(var s in n)r.call(n,s)&&(o[s]=n[s]);function l(){this.constructor=o}return l.prototype=n.prototype,o.prototype=new l,o.__super__=n.prototype,o},r={}.hasOwnProperty;t=De(),e=se(),Jr.exports=function(o){i(n,o);function n(s,l,f){if(n.__super__.constructor.call(this,s),l==null)throw new Error("Missing DTD element name. "+this.debugInfo());f||(f="(#PCDATA)"),Array.isArray(f)&&(f="("+f.join(",")+")"),this.name=this.stringify.name(l),this.type=e.ElementDeclaration,this.value=this.stringify.dtdElementValue(f)}return n.prototype.toString=function(s){return this.options.writer.dtdElement(this,this.options.writer.filterOptions(s))},n}(t)}.call(q)),Jr.exports}var en={exports:{}},Xo;function as(){return Xo||(Xo=1,function(){var e,t,i=function(o,n){for(var s in n)r.call(n,s)&&(o[s]=n[s]);function l(){this.constructor=o}return l.prototype=n.prototype,o.prototype=new l,o.__super__=n.prototype,o},r={}.hasOwnProperty;t=De(),e=se(),en.exports=function(o){i(n,o);function n(s,l,f){if(n.__super__.constructor.call(this,s),l==null)throw new Error("Missing DTD notation name. "+this.debugInfo(l));if(!f.pubID&&!f.sysID)throw new Error("Public or system identifiers are required for an external entity. "+this.debugInfo(l));this.name=this.stringify.name(l),this.type=e.NotationDeclaration,f.pubID!=null&&(this.pubID=this.stringify.dtdPubID(f.pubID)),f.sysID!=null&&(this.sysID=this.stringify.dtdSysID(f.sysID))}return Object.defineProperty(n.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(n.prototype,"systemId",{get:function(){return this.sysID}}),n.prototype.toString=function(s){return this.options.writer.dtdNotation(this,this.options.writer.filterOptions(s))},n}(t)}.call(q)),en.exports}var jo;function ls(){return jo||(jo=1,function(){var e,t,i,r,o,n,s,l,f=function(c,g){for(var a in g)h.call(g,a)&&(c[a]=g[a]);function u(){this.constructor=c}return u.prototype=g.prototype,c.prototype=new u,c.__super__=g.prototype,c},h={}.hasOwnProperty;l=Ye().isObject,s=De(),e=se(),t=ns(),r=ss(),i=os(),o=as(),n=Jn(),Kr.exports=function(c){f(g,c);function g(a,u,d){var y,b,E,v,_,x;if(g.__super__.constructor.call(this,a),this.type=e.DocType,a.children){for(v=a.children,b=0,E=v.length;b<E;b++)if(y=v[b],y.type===e.Element){this.name=y.name;break}}this.documentObject=a,l(u)&&(_=u,u=_.pubID,d=_.sysID),d==null&&(x=[u,d],d=x[0],u=x[1]),u!=null&&(this.pubID=this.stringify.dtdPubID(u)),d!=null&&(this.sysID=this.stringify.dtdSysID(d))}return Object.defineProperty(g.prototype,"entities",{get:function(){var a,u,d,y,b;for(y={},b=this.children,u=0,d=b.length;u<d;u++)a=b[u],a.type===e.EntityDeclaration&&!a.pe&&(y[a.name]=a);return new n(y)}}),Object.defineProperty(g.prototype,"notations",{get:function(){var a,u,d,y,b;for(y={},b=this.children,u=0,d=b.length;u<d;u++)a=b[u],a.type===e.NotationDeclaration&&(y[a.name]=a);return new n(y)}}),Object.defineProperty(g.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(g.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(g.prototype,"internalSubset",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),g.prototype.element=function(a,u){var d;return d=new i(this,a,u),this.children.push(d),this},g.prototype.attList=function(a,u,d,y,b){var E;return E=new t(this,a,u,d,y,b),this.children.push(E),this},g.prototype.entity=function(a,u){var d;return d=new r(this,!1,a,u),this.children.push(d),this},g.prototype.pEntity=function(a,u){var d;return d=new r(this,!0,a,u),this.children.push(d),this},g.prototype.notation=function(a,u){var d;return d=new o(this,a,u),this.children.push(d),this},g.prototype.toString=function(a){return this.options.writer.docType(this,this.options.writer.filterOptions(a))},g.prototype.ele=function(a,u){return this.element(a,u)},g.prototype.att=function(a,u,d,y,b){return this.attList(a,u,d,y,b)},g.prototype.ent=function(a,u){return this.entity(a,u)},g.prototype.pent=function(a,u){return this.pEntity(a,u)},g.prototype.not=function(a,u){return this.notation(a,u)},g.prototype.up=function(){return this.root()||this.documentObject},g.prototype.isEqualNode=function(a){return!(!g.__super__.isEqualNode.apply(this,arguments).isEqualNode(a)||a.name!==this.name||a.publicId!==this.publicId||a.systemId!==this.systemId)},g}(s)}.call(q)),Kr.exports}var tn={exports:{}},Ho;function us(){return Ho||(Ho=1,function(){var e,t,i=function(o,n){for(var s in n)r.call(n,s)&&(o[s]=n[s]);function l(){this.constructor=o}return l.prototype=n.prototype,o.prototype=new l,o.__super__=n.prototype,o},r={}.hasOwnProperty;e=se(),t=De(),tn.exports=function(o){i(n,o);function n(s,l){if(n.__super__.constructor.call(this,s),l==null)throw new Error("Missing raw text. "+this.debugInfo());this.type=e.Raw,this.value=this.stringify.raw(l)}return n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(s){return this.options.writer.raw(this,this.options.writer.filterOptions(s))},n}(t)}.call(q)),tn.exports}var rn={exports:{}},Vo;function hs(){return Vo||(Vo=1,function(){var e,t,i=function(o,n){for(var s in n)r.call(n,s)&&(o[s]=n[s]);function l(){this.constructor=o}return l.prototype=n.prototype,o.prototype=new l,o.__super__=n.prototype,o},r={}.hasOwnProperty;e=se(),t=hr(),rn.exports=function(o){i(n,o);function n(s,l){if(n.__super__.constructor.call(this,s),l==null)throw new Error("Missing element text. "+this.debugInfo());this.name="#text",this.type=e.Text,this.value=this.stringify.text(l)}return Object.defineProperty(n.prototype,"isElementContentWhitespace",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(n.prototype,"wholeText",{get:function(){var s,l,f;for(f="",l=this.previousSibling;l;)f=l.data+f,l=l.previousSibling;for(f+=this.data,s=this.nextSibling;s;)f=f+s.data,s=s.nextSibling;return f}}),n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(s){return this.options.writer.text(this,this.options.writer.filterOptions(s))},n.prototype.splitText=function(s){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.replaceWholeText=function(s){throw new Error("This DOM method is not implemented."+this.debugInfo())},n}(t)}.call(q)),rn.exports}var nn={exports:{}},Go;function fs(){return Go||(Go=1,function(){var e,t,i=function(o,n){for(var s in n)r.call(n,s)&&(o[s]=n[s]);function l(){this.constructor=o}return l.prototype=n.prototype,o.prototype=new l,o.__super__=n.prototype,o},r={}.hasOwnProperty;e=se(),t=hr(),nn.exports=function(o){i(n,o);function n(s,l,f){if(n.__super__.constructor.call(this,s),l==null)throw new Error("Missing instruction target. "+this.debugInfo());this.type=e.ProcessingInstruction,this.target=this.stringify.insTarget(l),this.name=this.target,f&&(this.value=this.stringify.insValue(f))}return n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(s){return this.options.writer.processingInstruction(this,this.options.writer.filterOptions(s))},n.prototype.isEqualNode=function(s){return!(!n.__super__.isEqualNode.apply(this,arguments).isEqualNode(s)||s.target!==this.target)},n}(t)}.call(q)),nn.exports}var sn={exports:{}},Wo;function Al(){return Wo||(Wo=1,function(){var e,t,i=function(o,n){for(var s in n)r.call(n,s)&&(o[s]=n[s]);function l(){this.constructor=o}return l.prototype=n.prototype,o.prototype=new l,o.__super__=n.prototype,o},r={}.hasOwnProperty;t=De(),e=se(),sn.exports=function(o){i(n,o);function n(s){n.__super__.constructor.call(this,s),this.type=e.Dummy}return n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(s){return""},n}(t)}.call(q)),sn.exports}var on={exports:{}},qo;function vd(){return qo||(qo=1,function(){on.exports=function(){function e(t){this.nodes=t}return Object.defineProperty(e.prototype,"length",{get:function(){return this.nodes.length||0}}),e.prototype.clone=function(){return this.nodes=null},e.prototype.item=function(t){return this.nodes[t]||null},e}()}.call(q)),on.exports}var an={exports:{}},Zo;function wd(){return Zo||(Zo=1,function(){an.exports={Disconnected:1,Preceding:2,Following:4,Contains:8,ContainedBy:16,ImplementationSpecific:32}}.call(q)),an.exports}var Yo;function De(){return Yo||(Yo=1,function(){var e,t,i,r,o,n,s,l,f,h,c,g,a,u,d,y,b,E={}.hasOwnProperty;b=Ye(),y=b.isObject,d=b.isFunction,u=b.isEmpty,a=b.getValue,l=null,i=null,r=null,o=null,n=null,c=null,g=null,h=null,s=null,t=null,f=null,e=null,Xr.exports=function(){function v(_){this.parent=_,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),this.value=null,this.children=[],this.baseURI=null,l||(l=es(),i=ts(),r=is(),o=rs(),n=ls(),c=us(),g=hs(),h=fs(),s=Al(),t=se(),f=vd(),Jn(),e=wd())}return Object.defineProperty(v.prototype,"nodeName",{get:function(){return this.name}}),Object.defineProperty(v.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(v.prototype,"nodeValue",{get:function(){return this.value}}),Object.defineProperty(v.prototype,"parentNode",{get:function(){return this.parent}}),Object.defineProperty(v.prototype,"childNodes",{get:function(){return(!this.childNodeList||!this.childNodeList.nodes)&&(this.childNodeList=new f(this.children)),this.childNodeList}}),Object.defineProperty(v.prototype,"firstChild",{get:function(){return this.children[0]||null}}),Object.defineProperty(v.prototype,"lastChild",{get:function(){return this.children[this.children.length-1]||null}}),Object.defineProperty(v.prototype,"previousSibling",{get:function(){var _;return _=this.parent.children.indexOf(this),this.parent.children[_-1]||null}}),Object.defineProperty(v.prototype,"nextSibling",{get:function(){var _;return _=this.parent.children.indexOf(this),this.parent.children[_+1]||null}}),Object.defineProperty(v.prototype,"ownerDocument",{get:function(){return this.document()||null}}),Object.defineProperty(v.prototype,"textContent",{get:function(){var _,x,A,C,O;if(this.nodeType===t.Element||this.nodeType===t.DocumentFragment){for(O="",C=this.children,x=0,A=C.length;x<A;x++)_=C[x],_.textContent&&(O+=_.textContent);return O}else return null},set:function(_){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),v.prototype.setParent=function(_){var x,A,C,O,I;for(this.parent=_,_&&(this.options=_.options,this.stringify=_.stringify),O=this.children,I=[],A=0,C=O.length;A<C;A++)x=O[A],I.push(x.setParent(this));return I},v.prototype.element=function(_,x,A){var C,O,I,p,S,R,F,X,j,Y,V;if(R=null,x===null&&A==null&&(j=[{},null],x=j[0],A=j[1]),x==null&&(x={}),x=a(x),y(x)||(Y=[x,A],A=Y[0],x=Y[1]),_!=null&&(_=a(_)),Array.isArray(_))for(I=0,F=_.length;I<F;I++)O=_[I],R=this.element(O);else if(d(_))R=this.element(_.apply());else if(y(_)){for(S in _)if(E.call(_,S))if(V=_[S],d(V)&&(V=V.apply()),!this.options.ignoreDecorators&&this.stringify.convertAttKey&&S.indexOf(this.stringify.convertAttKey)===0)R=this.attribute(S.substr(this.stringify.convertAttKey.length),V);else if(!this.options.separateArrayItems&&Array.isArray(V)&&u(V))R=this.dummy();else if(y(V)&&u(V))R=this.element(S);else if(!this.options.keepNullNodes&&V==null)R=this.dummy();else if(!this.options.separateArrayItems&&Array.isArray(V))for(p=0,X=V.length;p<X;p++)O=V[p],C={},C[S]=O,R=this.element(C);else y(V)?!this.options.ignoreDecorators&&this.stringify.convertTextKey&&S.indexOf(this.stringify.convertTextKey)===0?R=this.element(V):(R=this.element(S),R.element(V)):R=this.element(S,V)}else!this.options.keepNullNodes&&A===null?R=this.dummy():!this.options.ignoreDecorators&&this.stringify.convertTextKey&&_.indexOf(this.stringify.convertTextKey)===0?R=this.text(A):!this.options.ignoreDecorators&&this.stringify.convertCDataKey&&_.indexOf(this.stringify.convertCDataKey)===0?R=this.cdata(A):!this.options.ignoreDecorators&&this.stringify.convertCommentKey&&_.indexOf(this.stringify.convertCommentKey)===0?R=this.comment(A):!this.options.ignoreDecorators&&this.stringify.convertRawKey&&_.indexOf(this.stringify.convertRawKey)===0?R=this.raw(A):!this.options.ignoreDecorators&&this.stringify.convertPIKey&&_.indexOf(this.stringify.convertPIKey)===0?R=this.instruction(_.substr(this.stringify.convertPIKey.length),A):R=this.node(_,x,A);if(R==null)throw new Error("Could not create any elements with: "+_+". "+this.debugInfo());return R},v.prototype.insertBefore=function(_,x,A){var C,O,I,p,S;if(_?.type)return I=_,p=x,I.setParent(this),p?(O=children.indexOf(p),S=children.splice(O),children.push(I),Array.prototype.push.apply(children,S)):children.push(I),I;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(_));return O=this.parent.children.indexOf(this),S=this.parent.children.splice(O),C=this.parent.element(_,x,A),Array.prototype.push.apply(this.parent.children,S),C},v.prototype.insertAfter=function(_,x,A){var C,O,I;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(_));return O=this.parent.children.indexOf(this),I=this.parent.children.splice(O+1),C=this.parent.element(_,x,A),Array.prototype.push.apply(this.parent.children,I),C},v.prototype.remove=function(){var _;if(this.isRoot)throw new Error("Cannot remove the root element. "+this.debugInfo());return _=this.parent.children.indexOf(this),[].splice.apply(this.parent.children,[_,_-_+1].concat([])),this.parent},v.prototype.node=function(_,x,A){var C,O;return _!=null&&(_=a(_)),x||(x={}),x=a(x),y(x)||(O=[x,A],A=O[0],x=O[1]),C=new l(this,_,x),A!=null&&C.text(A),this.children.push(C),C},v.prototype.text=function(_){var x;return y(_)&&this.element(_),x=new g(this,_),this.children.push(x),this},v.prototype.cdata=function(_){var x;return x=new i(this,_),this.children.push(x),this},v.prototype.comment=function(_){var x;return x=new r(this,_),this.children.push(x),this},v.prototype.commentBefore=function(_){var x,A;return x=this.parent.children.indexOf(this),A=this.parent.children.splice(x),this.parent.comment(_),Array.prototype.push.apply(this.parent.children,A),this},v.prototype.commentAfter=function(_){var x,A;return x=this.parent.children.indexOf(this),A=this.parent.children.splice(x+1),this.parent.comment(_),Array.prototype.push.apply(this.parent.children,A),this},v.prototype.raw=function(_){var x;return x=new c(this,_),this.children.push(x),this},v.prototype.dummy=function(){var _;return _=new s(this),_},v.prototype.instruction=function(_,x){var A,C,O,I,p;if(_!=null&&(_=a(_)),x!=null&&(x=a(x)),Array.isArray(_))for(I=0,p=_.length;I<p;I++)A=_[I],this.instruction(A);else if(y(_))for(A in _)E.call(_,A)&&(C=_[A],this.instruction(A,C));else d(x)&&(x=x.apply()),O=new h(this,_,x),this.children.push(O);return this},v.prototype.instructionBefore=function(_,x){var A,C;return A=this.parent.children.indexOf(this),C=this.parent.children.splice(A),this.parent.instruction(_,x),Array.prototype.push.apply(this.parent.children,C),this},v.prototype.instructionAfter=function(_,x){var A,C;return A=this.parent.children.indexOf(this),C=this.parent.children.splice(A+1),this.parent.instruction(_,x),Array.prototype.push.apply(this.parent.children,C),this},v.prototype.declaration=function(_,x,A){var C,O;return C=this.document(),O=new o(C,_,x,A),C.children.length===0?C.children.unshift(O):C.children[0].type===t.Declaration?C.children[0]=O:C.children.unshift(O),C.root()||C},v.prototype.dtd=function(_,x){var A,C,O,I,p,S,R,F,X,j;for(C=this.document(),O=new n(C,_,x),X=C.children,I=p=0,R=X.length;p<R;I=++p)if(A=X[I],A.type===t.DocType)return C.children[I]=O,O;for(j=C.children,I=S=0,F=j.length;S<F;I=++S)if(A=j[I],A.isRoot)return C.children.splice(I,0,O),O;return C.children.push(O),O},v.prototype.up=function(){if(this.isRoot)throw new Error("The root node has no parent. Use doc() if you need to get the document object.");return this.parent},v.prototype.root=function(){var _;for(_=this;_;){if(_.type===t.Document)return _.rootObject;if(_.isRoot)return _;_=_.parent}},v.prototype.document=function(){var _;for(_=this;_;){if(_.type===t.Document)return _;_=_.parent}},v.prototype.end=function(_){return this.document().end(_)},v.prototype.prev=function(){var _;if(_=this.parent.children.indexOf(this),_<1)throw new Error("Already at the first node. "+this.debugInfo());return this.parent.children[_-1]},v.prototype.next=function(){var _;if(_=this.parent.children.indexOf(this),_===-1||_===this.parent.children.length-1)throw new Error("Already at the last node. "+this.debugInfo());return this.parent.children[_+1]},v.prototype.importDocument=function(_){var x;return x=_.root().clone(),x.parent=this,x.isRoot=!1,this.children.push(x),this},v.prototype.debugInfo=function(_){var x,A;return _=_||this.name,_==null&&!((x=this.parent)!=null&&x.name)?"":_==null?"parent: <"+this.parent.name+">":(A=this.parent)!=null&&A.name?"node: <"+_+">, parent: <"+this.parent.name+">":"node: <"+_+">"},v.prototype.ele=function(_,x,A){return this.element(_,x,A)},v.prototype.nod=function(_,x,A){return this.node(_,x,A)},v.prototype.txt=function(_){return this.text(_)},v.prototype.dat=function(_){return this.cdata(_)},v.prototype.com=function(_){return this.comment(_)},v.prototype.ins=function(_,x){return this.instruction(_,x)},v.prototype.doc=function(){return this.document()},v.prototype.dec=function(_,x,A){return this.declaration(_,x,A)},v.prototype.e=function(_,x,A){return this.element(_,x,A)},v.prototype.n=function(_,x,A){return this.node(_,x,A)},v.prototype.t=function(_){return this.text(_)},v.prototype.d=function(_){return this.cdata(_)},v.prototype.c=function(_){return this.comment(_)},v.prototype.r=function(_){return this.raw(_)},v.prototype.i=function(_,x){return this.instruction(_,x)},v.prototype.u=function(){return this.up()},v.prototype.importXMLBuilder=function(_){return this.importDocument(_)},v.prototype.replaceChild=function(_,x){throw new Error("This DOM method is not implemented."+this.debugInfo())},v.prototype.removeChild=function(_){throw new Error("This DOM method is not implemented."+this.debugInfo())},v.prototype.appendChild=function(_){throw new Error("This DOM method is not implemented."+this.debugInfo())},v.prototype.hasChildNodes=function(){return this.children.length!==0},v.prototype.cloneNode=function(_){throw new Error("This DOM method is not implemented."+this.debugInfo())},v.prototype.normalize=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},v.prototype.isSupported=function(_,x){return!0},v.prototype.hasAttributes=function(){return this.attribs.length!==0},v.prototype.compareDocumentPosition=function(_){var x,A;return x=this,x===_?0:this.document()!==_.document()?(A=e.Disconnected|e.ImplementationSpecific,Math.random()<.5?A|=e.Preceding:A|=e.Following,A):x.isAncestor(_)?e.Contains|e.Preceding:x.isDescendant(_)?e.Contains|e.Following:x.isPreceding(_)?e.Preceding:e.Following},v.prototype.isSameNode=function(_){throw new Error("This DOM method is not implemented."+this.debugInfo())},v.prototype.lookupPrefix=function(_){throw new Error("This DOM method is not implemented."+this.debugInfo())},v.prototype.isDefaultNamespace=function(_){throw new Error("This DOM method is not implemented."+this.debugInfo())},v.prototype.lookupNamespaceURI=function(_){throw new Error("This DOM method is not implemented."+this.debugInfo())},v.prototype.isEqualNode=function(_){var x,A,C;if(_.nodeType!==this.nodeType||_.children.length!==this.children.length)return!1;for(x=A=0,C=this.children.length-1;0<=C?A<=C:A>=C;x=0<=C?++A:--A)if(!this.children[x].isEqualNode(_.children[x]))return!1;return!0},v.prototype.getFeature=function(_,x){throw new Error("This DOM method is not implemented."+this.debugInfo())},v.prototype.setUserData=function(_,x,A){throw new Error("This DOM method is not implemented."+this.debugInfo())},v.prototype.getUserData=function(_){throw new Error("This DOM method is not implemented."+this.debugInfo())},v.prototype.contains=function(_){return _?_===this||this.isDescendant(_):!1},v.prototype.isDescendant=function(_){var x,A,C,O,I;for(I=this.children,C=0,O=I.length;C<O;C++)if(x=I[C],_===x||(A=x.isDescendant(_),A))return!0;return!1},v.prototype.isAncestor=function(_){return _.isDescendant(this)},v.prototype.isPreceding=function(_){var x,A;return x=this.treePosition(_),A=this.treePosition(this),x===-1||A===-1?!1:x<A},v.prototype.isFollowing=function(_){var x,A;return x=this.treePosition(_),A=this.treePosition(this),x===-1||A===-1?!1:x>A},v.prototype.treePosition=function(_){var x,A;return A=0,x=!1,this.foreachTreeNode(this.document(),function(C){if(A++,!x&&C===_)return x=!0}),x?A:-1},v.prototype.foreachTreeNode=function(_,x){var A,C,O,I,p;for(_||(_=this.document()),I=_.children,C=0,O=I.length;C<O;C++){if(A=I[C],p=x(A))return p;if(p=this.foreachTreeNode(A,x),p)return p}},v}()}.call(q)),Xr.exports}var ln={exports:{}},Ko;function Sl(){return Ko||(Ko=1,function(){var e=function(i,r){return function(){return i.apply(r,arguments)}},t={}.hasOwnProperty;ln.exports=function(){function i(r){this.assertLegalName=e(this.assertLegalName,this),this.assertLegalChar=e(this.assertLegalChar,this);var o,n,s;r||(r={}),this.options=r,this.options.version||(this.options.version="1.0"),n=r.stringify||{};for(o in n)t.call(n,o)&&(s=n[o],this[o]=s)}return i.prototype.name=function(r){return this.options.noValidation?r:this.assertLegalName(""+r||"")},i.prototype.text=function(r){return this.options.noValidation?r:this.assertLegalChar(this.textEscape(""+r||""))},i.prototype.cdata=function(r){return this.options.noValidation?r:(r=""+r||"",r=r.replace("]]>","]]]]><![CDATA[>"),this.assertLegalChar(r))},i.prototype.comment=function(r){if(this.options.noValidation)return r;if(r=""+r||"",r.match(/--/))throw new Error("Comment text cannot contain double-hypen: "+r);return this.assertLegalChar(r)},i.prototype.raw=function(r){return this.options.noValidation?r:""+r||""},i.prototype.attValue=function(r){return this.options.noValidation?r:this.assertLegalChar(this.attEscape(r=""+r||""))},i.prototype.insTarget=function(r){return this.options.noValidation?r:this.assertLegalChar(""+r||"")},i.prototype.insValue=function(r){if(this.options.noValidation)return r;if(r=""+r||"",r.match(/\?>/))throw new Error("Invalid processing instruction value: "+r);return this.assertLegalChar(r)},i.prototype.xmlVersion=function(r){if(this.options.noValidation)return r;if(r=""+r||"",!r.match(/1\.[0-9]+/))throw new Error("Invalid version number: "+r);return r},i.prototype.xmlEncoding=function(r){if(this.options.noValidation)return r;if(r=""+r||"",!r.match(/^[A-Za-z](?:[A-Za-z0-9._-])*$/))throw new Error("Invalid encoding: "+r);return this.assertLegalChar(r)},i.prototype.xmlStandalone=function(r){return this.options.noValidation?r:r?"yes":"no"},i.prototype.dtdPubID=function(r){return this.options.noValidation?r:this.assertLegalChar(""+r||"")},i.prototype.dtdSysID=function(r){return this.options.noValidation?r:this.assertLegalChar(""+r||"")},i.prototype.dtdElementValue=function(r){return this.options.noValidation?r:this.assertLegalChar(""+r||"")},i.prototype.dtdAttType=function(r){return this.options.noValidation?r:this.assertLegalChar(""+r||"")},i.prototype.dtdAttDefault=function(r){return this.options.noValidation?r:this.assertLegalChar(""+r||"")},i.prototype.dtdEntityValue=function(r){return this.options.noValidation?r:this.assertLegalChar(""+r||"")},i.prototype.dtdNData=function(r){return this.options.noValidation?r:this.assertLegalChar(""+r||"")},i.prototype.convertAttKey="@",i.prototype.convertPIKey="?",i.prototype.convertTextKey="#text",i.prototype.convertCDataKey="#cdata",i.prototype.convertCommentKey="#comment",i.prototype.convertRawKey="#raw",i.prototype.assertLegalChar=function(r){var o,n;if(this.options.noValidation)return r;if(o="",this.options.version==="1.0"){if(o=/[\0-\x08\x0B\f\x0E-\x1F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,n=r.match(o))throw new Error("Invalid character in string: "+r+" at index "+n.index)}else if(this.options.version==="1.1"&&(o=/[\0\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,n=r.match(o)))throw new Error("Invalid character in string: "+r+" at index "+n.index);return r},i.prototype.assertLegalName=function(r){var o;if(this.options.noValidation)return r;if(this.assertLegalChar(r),o=/^([:A-Z_a-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])([\x2D\.0-:A-Z_a-z\xB7\xC0-\xD6\xD8-\xF6\xF8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*$/,!r.match(o))throw new Error("Invalid character in name");return r},i.prototype.textEscape=function(r){var o;return this.options.noValidation?r:(o=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,r.replace(o,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#xD;"))},i.prototype.attEscape=function(r){var o;return this.options.noValidation?r:(o=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,r.replace(o,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;"))},i}()}.call(q)),ln.exports}var un={exports:{}},hn={exports:{}},fn={exports:{}},$o;function fr(){return $o||($o=1,function(){fn.exports={None:0,OpenTag:1,InsideTag:2,CloseTag:3}}.call(q)),fn.exports}var Qo;function Dl(){return Qo||(Qo=1,function(){var e,t,i,r={}.hasOwnProperty;i=Ye().assign,e=se(),rs(),ls(),ts(),is(),es(),us(),hs(),fs(),Al(),ns(),os(),ss(),as(),t=fr(),hn.exports=function(){function o(n){var s,l,f;n||(n={}),this.options=n,l=n.writer||{};for(s in l)r.call(l,s)&&(f=l[s],this["_"+s]=this[s],this[s]=f)}return o.prototype.filterOptions=function(n){var s,l,f,h,c,g,a,u;return n||(n={}),n=i({},this.options,n),s={writer:this},s.pretty=n.pretty||!1,s.allowEmpty=n.allowEmpty||!1,s.indent=(l=n.indent)!=null?l:"  ",s.newline=(f=n.newline)!=null?f:`
`,s.offset=(h=n.offset)!=null?h:0,s.dontPrettyTextNodes=(c=(g=n.dontPrettyTextNodes)!=null?g:n.dontprettytextnodes)!=null?c:0,s.spaceBeforeSlash=(a=(u=n.spaceBeforeSlash)!=null?u:n.spacebeforeslash)!=null?a:"",s.spaceBeforeSlash===!0&&(s.spaceBeforeSlash=" "),s.suppressPrettyCount=0,s.user={},s.state=t.None,s},o.prototype.indent=function(n,s,l){var f;return!s.pretty||s.suppressPrettyCount?"":s.pretty&&(f=(l||0)+s.offset+1,f>0)?new Array(f).join(s.indent):""},o.prototype.endline=function(n,s,l){return!s.pretty||s.suppressPrettyCount?"":s.newline},o.prototype.attribute=function(n,s,l){var f;return this.openAttribute(n,s,l),f=" "+n.name+'="'+n.value+'"',this.closeAttribute(n,s,l),f},o.prototype.cdata=function(n,s,l){var f;return this.openNode(n,s,l),s.state=t.OpenTag,f=this.indent(n,s,l)+"<![CDATA[",s.state=t.InsideTag,f+=n.value,s.state=t.CloseTag,f+="]]>"+this.endline(n,s,l),s.state=t.None,this.closeNode(n,s,l),f},o.prototype.comment=function(n,s,l){var f;return this.openNode(n,s,l),s.state=t.OpenTag,f=this.indent(n,s,l)+"<!-- ",s.state=t.InsideTag,f+=n.value,s.state=t.CloseTag,f+=" -->"+this.endline(n,s,l),s.state=t.None,this.closeNode(n,s,l),f},o.prototype.declaration=function(n,s,l){var f;return this.openNode(n,s,l),s.state=t.OpenTag,f=this.indent(n,s,l)+"<?xml",s.state=t.InsideTag,f+=' version="'+n.version+'"',n.encoding!=null&&(f+=' encoding="'+n.encoding+'"'),n.standalone!=null&&(f+=' standalone="'+n.standalone+'"'),s.state=t.CloseTag,f+=s.spaceBeforeSlash+"?>",f+=this.endline(n,s,l),s.state=t.None,this.closeNode(n,s,l),f},o.prototype.docType=function(n,s,l){var f,h,c,g,a;if(l||(l=0),this.openNode(n,s,l),s.state=t.OpenTag,g=this.indent(n,s,l),g+="<!DOCTYPE "+n.root().name,n.pubID&&n.sysID?g+=' PUBLIC "'+n.pubID+'" "'+n.sysID+'"':n.sysID&&(g+=' SYSTEM "'+n.sysID+'"'),n.children.length>0){for(g+=" [",g+=this.endline(n,s,l),s.state=t.InsideTag,a=n.children,h=0,c=a.length;h<c;h++)f=a[h],g+=this.writeChildNode(f,s,l+1);s.state=t.CloseTag,g+="]"}return s.state=t.CloseTag,g+=s.spaceBeforeSlash+">",g+=this.endline(n,s,l),s.state=t.None,this.closeNode(n,s,l),g},o.prototype.element=function(n,s,l){var f,h,c,g,a,u,d,y,b,E,v,_,x,A;l||(l=0),E=!1,v="",this.openNode(n,s,l),s.state=t.OpenTag,v+=this.indent(n,s,l)+"<"+n.name,_=n.attribs;for(b in _)r.call(_,b)&&(f=_[b],v+=this.attribute(f,s,l));if(c=n.children.length,g=c===0?null:n.children[0],c===0||n.children.every(function(C){return(C.type===e.Text||C.type===e.Raw)&&C.value===""}))s.allowEmpty?(v+=">",s.state=t.CloseTag,v+="</"+n.name+">"+this.endline(n,s,l)):(s.state=t.CloseTag,v+=s.spaceBeforeSlash+"/>"+this.endline(n,s,l));else if(s.pretty&&c===1&&(g.type===e.Text||g.type===e.Raw)&&g.value!=null)v+=">",s.state=t.InsideTag,s.suppressPrettyCount++,E=!0,v+=this.writeChildNode(g,s,l+1),s.suppressPrettyCount--,E=!1,s.state=t.CloseTag,v+="</"+n.name+">"+this.endline(n,s,l);else{if(s.dontPrettyTextNodes){for(x=n.children,a=0,d=x.length;a<d;a++)if(h=x[a],(h.type===e.Text||h.type===e.Raw)&&h.value!=null){s.suppressPrettyCount++,E=!0;break}}for(v+=">"+this.endline(n,s,l),s.state=t.InsideTag,A=n.children,u=0,y=A.length;u<y;u++)h=A[u],v+=this.writeChildNode(h,s,l+1);s.state=t.CloseTag,v+=this.indent(n,s,l)+"</"+n.name+">",E&&s.suppressPrettyCount--,v+=this.endline(n,s,l),s.state=t.None}return this.closeNode(n,s,l),v},o.prototype.writeChildNode=function(n,s,l){switch(n.type){case e.CData:return this.cdata(n,s,l);case e.Comment:return this.comment(n,s,l);case e.Element:return this.element(n,s,l);case e.Raw:return this.raw(n,s,l);case e.Text:return this.text(n,s,l);case e.ProcessingInstruction:return this.processingInstruction(n,s,l);case e.Dummy:return"";case e.Declaration:return this.declaration(n,s,l);case e.DocType:return this.docType(n,s,l);case e.AttributeDeclaration:return this.dtdAttList(n,s,l);case e.ElementDeclaration:return this.dtdElement(n,s,l);case e.EntityDeclaration:return this.dtdEntity(n,s,l);case e.NotationDeclaration:return this.dtdNotation(n,s,l);default:throw new Error("Unknown XML node type: "+n.constructor.name)}},o.prototype.processingInstruction=function(n,s,l){var f;return this.openNode(n,s,l),s.state=t.OpenTag,f=this.indent(n,s,l)+"<?",s.state=t.InsideTag,f+=n.target,n.value&&(f+=" "+n.value),s.state=t.CloseTag,f+=s.spaceBeforeSlash+"?>",f+=this.endline(n,s,l),s.state=t.None,this.closeNode(n,s,l),f},o.prototype.raw=function(n,s,l){var f;return this.openNode(n,s,l),s.state=t.OpenTag,f=this.indent(n,s,l),s.state=t.InsideTag,f+=n.value,s.state=t.CloseTag,f+=this.endline(n,s,l),s.state=t.None,this.closeNode(n,s,l),f},o.prototype.text=function(n,s,l){var f;return this.openNode(n,s,l),s.state=t.OpenTag,f=this.indent(n,s,l),s.state=t.InsideTag,f+=n.value,s.state=t.CloseTag,f+=this.endline(n,s,l),s.state=t.None,this.closeNode(n,s,l),f},o.prototype.dtdAttList=function(n,s,l){var f;return this.openNode(n,s,l),s.state=t.OpenTag,f=this.indent(n,s,l)+"<!ATTLIST",s.state=t.InsideTag,f+=" "+n.elementName+" "+n.attributeName+" "+n.attributeType,n.defaultValueType!=="#DEFAULT"&&(f+=" "+n.defaultValueType),n.defaultValue&&(f+=' "'+n.defaultValue+'"'),s.state=t.CloseTag,f+=s.spaceBeforeSlash+">"+this.endline(n,s,l),s.state=t.None,this.closeNode(n,s,l),f},o.prototype.dtdElement=function(n,s,l){var f;return this.openNode(n,s,l),s.state=t.OpenTag,f=this.indent(n,s,l)+"<!ELEMENT",s.state=t.InsideTag,f+=" "+n.name+" "+n.value,s.state=t.CloseTag,f+=s.spaceBeforeSlash+">"+this.endline(n,s,l),s.state=t.None,this.closeNode(n,s,l),f},o.prototype.dtdEntity=function(n,s,l){var f;return this.openNode(n,s,l),s.state=t.OpenTag,f=this.indent(n,s,l)+"<!ENTITY",s.state=t.InsideTag,n.pe&&(f+=" %"),f+=" "+n.name,n.value?f+=' "'+n.value+'"':(n.pubID&&n.sysID?f+=' PUBLIC "'+n.pubID+'" "'+n.sysID+'"':n.sysID&&(f+=' SYSTEM "'+n.sysID+'"'),n.nData&&(f+=" NDATA "+n.nData)),s.state=t.CloseTag,f+=s.spaceBeforeSlash+">"+this.endline(n,s,l),s.state=t.None,this.closeNode(n,s,l),f},o.prototype.dtdNotation=function(n,s,l){var f;return this.openNode(n,s,l),s.state=t.OpenTag,f=this.indent(n,s,l)+"<!NOTATION",s.state=t.InsideTag,f+=" "+n.name,n.pubID&&n.sysID?f+=' PUBLIC "'+n.pubID+'" "'+n.sysID+'"':n.pubID?f+=' PUBLIC "'+n.pubID+'"':n.sysID&&(f+=' SYSTEM "'+n.sysID+'"'),s.state=t.CloseTag,f+=s.spaceBeforeSlash+">"+this.endline(n,s,l),s.state=t.None,this.closeNode(n,s,l),f},o.prototype.openNode=function(n,s,l){},o.prototype.closeNode=function(n,s,l){},o.prototype.openAttribute=function(n,s,l){},o.prototype.closeAttribute=function(n,s,l){},o}()}.call(q)),hn.exports}var Jo;function cs(){return Jo||(Jo=1,function(){var e,t=function(r,o){for(var n in o)i.call(o,n)&&(r[n]=o[n]);function s(){this.constructor=r}return s.prototype=o.prototype,r.prototype=new s,r.__super__=o.prototype,r},i={}.hasOwnProperty;e=Dl(),un.exports=function(r){t(o,r);function o(n){o.__super__.constructor.call(this,n)}return o.prototype.document=function(n,s){var l,f,h,c,g;for(s=this.filterOptions(s),c="",g=n.children,f=0,h=g.length;f<h;f++)l=g[f],c+=this.writeChildNode(l,s,0);return s.pretty&&c.slice(-s.newline.length)===s.newline&&(c=c.slice(0,-s.newline.length)),c},o}(e)}.call(q)),un.exports}var ea;function Ol(){return ea||(ea=1,function(){var e,t,i,r,o,n,s,l=function(h,c){for(var g in c)f.call(c,g)&&(h[g]=c[g]);function a(){this.constructor=h}return a.prototype=c.prototype,h.prototype=new a,h.__super__=c.prototype,h},f={}.hasOwnProperty;s=Ye().isPlainObject,i=El(),t=yd(),r=De(),e=se(),n=Sl(),o=cs(),Fr.exports=function(h){l(c,h);function c(g){c.__super__.constructor.call(this,null),this.name="#document",this.type=e.Document,this.documentURI=null,this.domConfig=new t,g||(g={}),g.writer||(g.writer=new o),this.options=g,this.stringify=new n(g)}return Object.defineProperty(c.prototype,"implementation",{value:new i}),Object.defineProperty(c.prototype,"doctype",{get:function(){var g,a,u,d;for(d=this.children,a=0,u=d.length;a<u;a++)if(g=d[a],g.type===e.DocType)return g;return null}}),Object.defineProperty(c.prototype,"documentElement",{get:function(){return this.rootObject||null}}),Object.defineProperty(c.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(c.prototype,"strictErrorChecking",{get:function(){return!1}}),Object.defineProperty(c.prototype,"xmlEncoding",{get:function(){return this.children.length!==0&&this.children[0].type===e.Declaration?this.children[0].encoding:null}}),Object.defineProperty(c.prototype,"xmlStandalone",{get:function(){return this.children.length!==0&&this.children[0].type===e.Declaration?this.children[0].standalone==="yes":!1}}),Object.defineProperty(c.prototype,"xmlVersion",{get:function(){return this.children.length!==0&&this.children[0].type===e.Declaration?this.children[0].version:"1.0"}}),Object.defineProperty(c.prototype,"URL",{get:function(){return this.documentURI}}),Object.defineProperty(c.prototype,"origin",{get:function(){return null}}),Object.defineProperty(c.prototype,"compatMode",{get:function(){return null}}),Object.defineProperty(c.prototype,"characterSet",{get:function(){return null}}),Object.defineProperty(c.prototype,"contentType",{get:function(){return null}}),c.prototype.end=function(g){var a;return a={},g?s(g)&&(a=g,g=this.options.writer):g=this.options.writer,g.document(this,g.filterOptions(a))},c.prototype.toString=function(g){return this.options.writer.document(this,this.options.writer.filterOptions(g))},c.prototype.createElement=function(g){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.createDocumentFragment=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.createTextNode=function(g){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.createComment=function(g){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.createCDATASection=function(g){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.createProcessingInstruction=function(g,a){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.createAttribute=function(g){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.createEntityReference=function(g){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.getElementsByTagName=function(g){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.importNode=function(g,a){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.createElementNS=function(g,a){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.createAttributeNS=function(g,a){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.getElementsByTagNameNS=function(g,a){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.getElementById=function(g){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.adoptNode=function(g){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.normalizeDocument=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.renameNode=function(g,a,u){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.getElementsByClassName=function(g){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.createEvent=function(g){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.createRange=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.createNodeIterator=function(g,a,u){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.createTreeWalker=function(g,a,u){throw new Error("This DOM method is not implemented."+this.debugInfo())},c}(r)}.call(q)),Fr.exports}var cn={exports:{}},ta;function bd(){return ta||(ta=1,function(){var e,t,i,r,o,n,s,l,f,h,c,g,a,u,d,y,b,E,v,_,x,A,C,O={}.hasOwnProperty;C=Ye(),x=C.isObject,_=C.isFunction,A=C.isPlainObject,v=C.getValue,e=se(),g=Ol(),a=es(),r=ts(),o=is(),d=us(),E=hs(),u=fs(),h=rs(),c=ls(),n=ns(),l=ss(),s=os(),f=as(),i=Tl(),b=Sl(),y=cs(),t=fr(),cn.exports=function(){function I(p,S,R){var F;this.name="?xml",this.type=e.Document,p||(p={}),F={},p.writer?A(p.writer)&&(F=p.writer,p.writer=new y):p.writer=new y,this.options=p,this.writer=p.writer,this.writerOptions=this.writer.filterOptions(F),this.stringify=new b(p),this.onDataCallback=S||function(){},this.onEndCallback=R||function(){},this.currentNode=null,this.currentLevel=-1,this.openTags={},this.documentStarted=!1,this.documentCompleted=!1,this.root=null}return I.prototype.createChildNode=function(p){var S,R,F,X,j,Y,V,H;switch(p.type){case e.CData:this.cdata(p.value);break;case e.Comment:this.comment(p.value);break;case e.Element:F={},V=p.attribs;for(R in V)O.call(V,R)&&(S=V[R],F[R]=S.value);this.node(p.name,F);break;case e.Dummy:this.dummy();break;case e.Raw:this.raw(p.value);break;case e.Text:this.text(p.value);break;case e.ProcessingInstruction:this.instruction(p.target,p.value);break;default:throw new Error("This XML node type is not supported in a JS object: "+p.constructor.name)}for(H=p.children,j=0,Y=H.length;j<Y;j++)X=H[j],this.createChildNode(X),X.type===e.Element&&this.up();return this},I.prototype.dummy=function(){return this},I.prototype.node=function(p,S,R){var F;if(p==null)throw new Error("Missing node name.");if(this.root&&this.currentLevel===-1)throw new Error("Document can only have one root node. "+this.debugInfo(p));return this.openCurrent(),p=v(p),S==null&&(S={}),S=v(S),x(S)||(F=[S,R],R=F[0],S=F[1]),this.currentNode=new a(this,p,S),this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,R!=null&&this.text(R),this},I.prototype.element=function(p,S,R){var F,X,j,Y,V,H;if(this.currentNode&&this.currentNode.type===e.DocType)this.dtdElement.apply(this,arguments);else if(Array.isArray(p)||x(p)||_(p))for(Y=this.options.noValidation,this.options.noValidation=!0,H=new g(this.options).element("TEMP_ROOT"),H.element(p),this.options.noValidation=Y,V=H.children,X=0,j=V.length;X<j;X++)F=V[X],this.createChildNode(F),F.type===e.Element&&this.up();else this.node(p,S,R);return this},I.prototype.attribute=function(p,S){var R,F;if(!this.currentNode||this.currentNode.children)throw new Error("att() can only be used immediately after an ele() call in callback mode. "+this.debugInfo(p));if(p!=null&&(p=v(p)),x(p))for(R in p)O.call(p,R)&&(F=p[R],this.attribute(R,F));else _(S)&&(S=S.apply()),this.options.keepNullAttributes&&S==null?this.currentNode.attribs[p]=new i(this,p,""):S!=null&&(this.currentNode.attribs[p]=new i(this,p,S));return this},I.prototype.text=function(p){var S;return this.openCurrent(),S=new E(this,p),this.onData(this.writer.text(S,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},I.prototype.cdata=function(p){var S;return this.openCurrent(),S=new r(this,p),this.onData(this.writer.cdata(S,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},I.prototype.comment=function(p){var S;return this.openCurrent(),S=new o(this,p),this.onData(this.writer.comment(S,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},I.prototype.raw=function(p){var S;return this.openCurrent(),S=new d(this,p),this.onData(this.writer.raw(S,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},I.prototype.instruction=function(p,S){var R,F,X,j,Y;if(this.openCurrent(),p!=null&&(p=v(p)),S!=null&&(S=v(S)),Array.isArray(p))for(R=0,j=p.length;R<j;R++)F=p[R],this.instruction(F);else if(x(p))for(F in p)O.call(p,F)&&(X=p[F],this.instruction(F,X));else _(S)&&(S=S.apply()),Y=new u(this,p,S),this.onData(this.writer.processingInstruction(Y,this.writerOptions,this.currentLevel+1),this.currentLevel+1);return this},I.prototype.declaration=function(p,S,R){var F;if(this.openCurrent(),this.documentStarted)throw new Error("declaration() must be the first node.");return F=new h(this,p,S,R),this.onData(this.writer.declaration(F,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},I.prototype.doctype=function(p,S,R){if(this.openCurrent(),p==null)throw new Error("Missing root node name.");if(this.root)throw new Error("dtd() must come before the root node.");return this.currentNode=new c(this,S,R),this.currentNode.rootNodeName=p,this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,this},I.prototype.dtdElement=function(p,S){var R;return this.openCurrent(),R=new s(this,p,S),this.onData(this.writer.dtdElement(R,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},I.prototype.attList=function(p,S,R,F,X){var j;return this.openCurrent(),j=new n(this,p,S,R,F,X),this.onData(this.writer.dtdAttList(j,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},I.prototype.entity=function(p,S){var R;return this.openCurrent(),R=new l(this,!1,p,S),this.onData(this.writer.dtdEntity(R,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},I.prototype.pEntity=function(p,S){var R;return this.openCurrent(),R=new l(this,!0,p,S),this.onData(this.writer.dtdEntity(R,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},I.prototype.notation=function(p,S){var R;return this.openCurrent(),R=new f(this,p,S),this.onData(this.writer.dtdNotation(R,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},I.prototype.up=function(){if(this.currentLevel<0)throw new Error("The document node has no parent.");return this.currentNode?(this.currentNode.children?this.closeNode(this.currentNode):this.openNode(this.currentNode),this.currentNode=null):this.closeNode(this.openTags[this.currentLevel]),delete this.openTags[this.currentLevel],this.currentLevel--,this},I.prototype.end=function(){for(;this.currentLevel>=0;)this.up();return this.onEnd()},I.prototype.openCurrent=function(){if(this.currentNode)return this.currentNode.children=!0,this.openNode(this.currentNode)},I.prototype.openNode=function(p){var S,R,F,X;if(!p.isOpen){if(!this.root&&this.currentLevel===0&&p.type===e.Element&&(this.root=p),R="",p.type===e.Element){this.writerOptions.state=t.OpenTag,R=this.writer.indent(p,this.writerOptions,this.currentLevel)+"<"+p.name,X=p.attribs;for(F in X)O.call(X,F)&&(S=X[F],R+=this.writer.attribute(S,this.writerOptions,this.currentLevel));R+=(p.children?">":"/>")+this.writer.endline(p,this.writerOptions,this.currentLevel),this.writerOptions.state=t.InsideTag}else this.writerOptions.state=t.OpenTag,R=this.writer.indent(p,this.writerOptions,this.currentLevel)+"<!DOCTYPE "+p.rootNodeName,p.pubID&&p.sysID?R+=' PUBLIC "'+p.pubID+'" "'+p.sysID+'"':p.sysID&&(R+=' SYSTEM "'+p.sysID+'"'),p.children?(R+=" [",this.writerOptions.state=t.InsideTag):(this.writerOptions.state=t.CloseTag,R+=">"),R+=this.writer.endline(p,this.writerOptions,this.currentLevel);return this.onData(R,this.currentLevel),p.isOpen=!0}},I.prototype.closeNode=function(p){var S;if(!p.isClosed)return S="",this.writerOptions.state=t.CloseTag,p.type===e.Element?S=this.writer.indent(p,this.writerOptions,this.currentLevel)+"</"+p.name+">"+this.writer.endline(p,this.writerOptions,this.currentLevel):S=this.writer.indent(p,this.writerOptions,this.currentLevel)+"]>"+this.writer.endline(p,this.writerOptions,this.currentLevel),this.writerOptions.state=t.None,this.onData(S,this.currentLevel),p.isClosed=!0},I.prototype.onData=function(p,S){return this.documentStarted=!0,this.onDataCallback(p,S+1)},I.prototype.onEnd=function(){return this.documentCompleted=!0,this.onEndCallback()},I.prototype.debugInfo=function(p){return p==null?"":"node: <"+p+">"},I.prototype.ele=function(){return this.element.apply(this,arguments)},I.prototype.nod=function(p,S,R){return this.node(p,S,R)},I.prototype.txt=function(p){return this.text(p)},I.prototype.dat=function(p){return this.cdata(p)},I.prototype.com=function(p){return this.comment(p)},I.prototype.ins=function(p,S){return this.instruction(p,S)},I.prototype.dec=function(p,S,R){return this.declaration(p,S,R)},I.prototype.dtd=function(p,S,R){return this.doctype(p,S,R)},I.prototype.e=function(p,S,R){return this.element(p,S,R)},I.prototype.n=function(p,S,R){return this.node(p,S,R)},I.prototype.t=function(p){return this.text(p)},I.prototype.d=function(p){return this.cdata(p)},I.prototype.c=function(p){return this.comment(p)},I.prototype.r=function(p){return this.raw(p)},I.prototype.i=function(p,S){return this.instruction(p,S)},I.prototype.att=function(){return this.currentNode&&this.currentNode.type===e.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},I.prototype.a=function(){return this.currentNode&&this.currentNode.type===e.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},I.prototype.ent=function(p,S){return this.entity(p,S)},I.prototype.pent=function(p,S){return this.pEntity(p,S)},I.prototype.not=function(p,S){return this.notation(p,S)},I}()}.call(q)),cn.exports}var dn={exports:{}},ia;function xd(){return ia||(ia=1,function(){var e,t,i,r=function(n,s){for(var l in s)o.call(s,l)&&(n[l]=s[l]);function f(){this.constructor=n}return f.prototype=s.prototype,n.prototype=new f,n.__super__=s.prototype,n},o={}.hasOwnProperty;e=se(),i=Dl(),t=fr(),dn.exports=function(n){r(s,n);function s(l,f){this.stream=l,s.__super__.constructor.call(this,f)}return s.prototype.endline=function(l,f,h){return l.isLastRootNode&&f.state===t.CloseTag?"":s.__super__.endline.call(this,l,f,h)},s.prototype.document=function(l,f){var h,c,g,a,u,d,y,b,E;for(y=l.children,c=g=0,u=y.length;g<u;c=++g)h=y[c],h.isLastRootNode=c===l.children.length-1;for(f=this.filterOptions(f),b=l.children,E=[],a=0,d=b.length;a<d;a++)h=b[a],E.push(this.writeChildNode(h,f,0));return E},s.prototype.attribute=function(l,f,h){return this.stream.write(s.__super__.attribute.call(this,l,f,h))},s.prototype.cdata=function(l,f,h){return this.stream.write(s.__super__.cdata.call(this,l,f,h))},s.prototype.comment=function(l,f,h){return this.stream.write(s.__super__.comment.call(this,l,f,h))},s.prototype.declaration=function(l,f,h){return this.stream.write(s.__super__.declaration.call(this,l,f,h))},s.prototype.docType=function(l,f,h){var c,g,a,u;if(h||(h=0),this.openNode(l,f,h),f.state=t.OpenTag,this.stream.write(this.indent(l,f,h)),this.stream.write("<!DOCTYPE "+l.root().name),l.pubID&&l.sysID?this.stream.write(' PUBLIC "'+l.pubID+'" "'+l.sysID+'"'):l.sysID&&this.stream.write(' SYSTEM "'+l.sysID+'"'),l.children.length>0){for(this.stream.write(" ["),this.stream.write(this.endline(l,f,h)),f.state=t.InsideTag,u=l.children,g=0,a=u.length;g<a;g++)c=u[g],this.writeChildNode(c,f,h+1);f.state=t.CloseTag,this.stream.write("]")}return f.state=t.CloseTag,this.stream.write(f.spaceBeforeSlash+">"),this.stream.write(this.endline(l,f,h)),f.state=t.None,this.closeNode(l,f,h)},s.prototype.element=function(l,f,h){var c,g,a,u,d,y,b,E,v;h||(h=0),this.openNode(l,f,h),f.state=t.OpenTag,this.stream.write(this.indent(l,f,h)+"<"+l.name),E=l.attribs;for(b in E)o.call(E,b)&&(c=E[b],this.attribute(c,f,h));if(a=l.children.length,u=a===0?null:l.children[0],a===0||l.children.every(function(_){return(_.type===e.Text||_.type===e.Raw)&&_.value===""}))f.allowEmpty?(this.stream.write(">"),f.state=t.CloseTag,this.stream.write("</"+l.name+">")):(f.state=t.CloseTag,this.stream.write(f.spaceBeforeSlash+"/>"));else if(f.pretty&&a===1&&(u.type===e.Text||u.type===e.Raw)&&u.value!=null)this.stream.write(">"),f.state=t.InsideTag,f.suppressPrettyCount++,this.writeChildNode(u,f,h+1),f.suppressPrettyCount--,f.state=t.CloseTag,this.stream.write("</"+l.name+">");else{for(this.stream.write(">"+this.endline(l,f,h)),f.state=t.InsideTag,v=l.children,d=0,y=v.length;d<y;d++)g=v[d],this.writeChildNode(g,f,h+1);f.state=t.CloseTag,this.stream.write(this.indent(l,f,h)+"</"+l.name+">")}return this.stream.write(this.endline(l,f,h)),f.state=t.None,this.closeNode(l,f,h)},s.prototype.processingInstruction=function(l,f,h){return this.stream.write(s.__super__.processingInstruction.call(this,l,f,h))},s.prototype.raw=function(l,f,h){return this.stream.write(s.__super__.raw.call(this,l,f,h))},s.prototype.text=function(l,f,h){return this.stream.write(s.__super__.text.call(this,l,f,h))},s.prototype.dtdAttList=function(l,f,h){return this.stream.write(s.__super__.dtdAttList.call(this,l,f,h))},s.prototype.dtdElement=function(l,f,h){return this.stream.write(s.__super__.dtdElement.call(this,l,f,h))},s.prototype.dtdEntity=function(l,f,h){return this.stream.write(s.__super__.dtdEntity.call(this,l,f,h))},s.prototype.dtdNotation=function(l,f,h){return this.stream.write(s.__super__.dtdNotation.call(this,l,f,h))},s}(i)}.call(q)),dn.exports}var ra;function Ed(){return ra||(ra=1,function(){var e,t,i,r,o,n,s,l,f,h;h=Ye(),l=h.assign,f=h.isFunction,i=El(),r=Ol(),o=bd(),s=cs(),n=xd(),e=se(),t=fr(),je.create=function(c,g,a,u){var d,y;if(c==null)throw new Error("Root element needs a name.");return u=l({},g,a,u),d=new r(u),y=d.element(c),u.headless||(d.declaration(u),(u.pubID!=null||u.sysID!=null)&&d.dtd(u)),y},je.begin=function(c,g,a){var u;return f(c)&&(u=[c,g],g=u[0],a=u[1],c={}),g?new o(c,g,a):new r(c)},je.stringWriter=function(c){return new s(c)},je.streamWriter=function(c,g){return new n(c,g)},je.implementation=new i,je.nodeType=e,je.writerState=t}.call(q)),je}var na;function Td(){return na||(na=1,function(){var e,t,i,r,o,n={}.hasOwnProperty;e=Ed(),t=Qn().defaults,r=function(s){return typeof s=="string"&&(s.indexOf("&")>=0||s.indexOf(">")>=0||s.indexOf("<")>=0)},o=function(s){return"<![CDATA["+i(s)+"]]>"},i=function(s){return s.replace("]]>","]]]]><![CDATA[>")},Pr.Builder=function(){function s(l){var f,h,c;this.options={},h=t["0.2"];for(f in h)n.call(h,f)&&(c=h[f],this.options[f]=c);for(f in l)n.call(l,f)&&(c=l[f],this.options[f]=c)}return s.prototype.buildObject=function(l){var f,h,c,g,a;return f=this.options.attrkey,h=this.options.charkey,Object.keys(l).length===1&&this.options.rootName===t["0.2"].rootName?(a=Object.keys(l)[0],l=l[a]):a=this.options.rootName,c=function(u){return function(d,y){var b,E,v,_,x,A;if(typeof y!="object")u.options.cdata&&r(y)?d.raw(o(y)):d.txt(y);else if(Array.isArray(y)){for(_ in y)if(n.call(y,_)){E=y[_];for(x in E)v=E[x],d=c(d.ele(x),v).up()}}else for(x in y)if(n.call(y,x))if(E=y[x],x===f){if(typeof E=="object")for(b in E)A=E[b],d=d.att(b,A)}else if(x===h)u.options.cdata&&r(E)?d=d.raw(o(E)):d=d.txt(E);else if(Array.isArray(E))for(_ in E)n.call(E,_)&&(v=E[_],typeof v=="string"?u.options.cdata&&r(v)?d=d.ele(x).raw(o(v)).up():d=d.ele(x,v).up():d=c(d.ele(x),v).up());else typeof E=="object"?d=c(d.ele(x),E).up():typeof E=="string"&&u.options.cdata&&r(E)?d=d.ele(x).raw(o(E)).up():(E==null&&(E=""),d=d.ele(x,E.toString()).up());return d}}(this),g=e.create(a,this.options.xmldec,this.options.doctype,{headless:this.options.headless,allowSurrogateChars:this.options.allowSurrogateChars}),c(g,l).end(this.options.renderOpts)},s}()}.call(q)),Pr}var pn={},_n={};const Ad=ir(lf),Sd=ir(Oh);var sa;function Dd(){return sa||(sa=1,function(e){(function(t){t.parser=function(w,m){return new r(w,m)},t.SAXParser=r,t.SAXStream=c,t.createStream=h,t.MAX_BUFFER_LENGTH=64*1024;var i=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];t.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];function r(w,m){if(!(this instanceof r))return new r(w,m);var L=this;n(L),L.q=L.c="",L.bufferCheckPosition=t.MAX_BUFFER_LENGTH,L.opt=m||{},L.opt.lowercase=L.opt.lowercase||L.opt.lowercasetags,L.looseCase=L.opt.lowercase?"toLowerCase":"toUpperCase",L.tags=[],L.closed=L.closedRoot=L.sawRoot=!1,L.tag=L.error=null,L.strict=!!w,L.noscript=!!(w||L.opt.noscript),L.state=p.BEGIN,L.strictEntities=L.opt.strictEntities,L.ENTITIES=L.strictEntities?Object.create(t.XML_ENTITIES):Object.create(t.ENTITIES),L.attribList=[],L.opt.xmlns&&(L.ns=Object.create(y)),L.opt.unquotedAttributeValues===void 0&&(L.opt.unquotedAttributeValues=!w),L.trackPosition=L.opt.position!==!1,L.trackPosition&&(L.position=L.line=L.column=0),R(L,"onready")}Object.create||(Object.create=function(w){function m(){}m.prototype=w;var L=new m;return L}),Object.keys||(Object.keys=function(w){var m=[];for(var L in w)w.hasOwnProperty(L)&&m.push(L);return m});function o(w){for(var m=Math.max(t.MAX_BUFFER_LENGTH,10),L=0,D=0,G=i.length;D<G;D++){var W=w[i[D]].length;if(W>m)switch(i[D]){case"textNode":X(w);break;case"cdata":F(w,"oncdata",w.cdata),w.cdata="";break;case"script":F(w,"onscript",w.script),w.script="";break;default:Y(w,"Max buffer length exceeded: "+i[D])}L=Math.max(L,W)}var te=t.MAX_BUFFER_LENGTH-L;w.bufferCheckPosition=te+w.position}function n(w){for(var m=0,L=i.length;m<L;m++)w[i[m]]=""}function s(w){X(w),w.cdata!==""&&(F(w,"oncdata",w.cdata),w.cdata=""),w.script!==""&&(F(w,"onscript",w.script),w.script="")}r.prototype={end:function(){V(this)},write:z,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){s(this)}};var l;try{l=Ad.Stream}catch{l=function(){}}l||(l=function(){});var f=t.EVENTS.filter(function(w){return w!=="error"&&w!=="end"});function h(w,m){return new c(w,m)}function c(w,m){if(!(this instanceof c))return new c(w,m);l.apply(this),this._parser=new r(w,m),this.writable=!0,this.readable=!0;var L=this;this._parser.onend=function(){L.emit("end")},this._parser.onerror=function(D){L.emit("error",D),L._parser.error=null},this._decoder=null,f.forEach(function(D){Object.defineProperty(L,"on"+D,{get:function(){return L._parser["on"+D]},set:function(G){if(!G)return L.removeAllListeners(D),L._parser["on"+D]=G,G;L.on(D,G)},enumerable:!0,configurable:!1})})}c.prototype=Object.create(l.prototype,{constructor:{value:c}}),c.prototype.write=function(w){if(typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(w)){if(!this._decoder){var m=Sd.StringDecoder;this._decoder=new m("utf8")}w=this._decoder.write(w)}return this._parser.write(w.toString()),this.emit("data",w),!0},c.prototype.end=function(w){return w&&w.length&&this.write(w),this._parser.end(),!0},c.prototype.on=function(w,m){var L=this;return!L._parser["on"+w]&&f.indexOf(w)!==-1&&(L._parser["on"+w]=function(){var D=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);D.splice(0,0,w),L.emit.apply(L,D)}),l.prototype.on.call(L,w,m)};var g="[CDATA[",a="DOCTYPE",u="http://www.w3.org/XML/1998/namespace",d="http://www.w3.org/2000/xmlns/",y={xml:u,xmlns:d},b=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,E=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,v=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,_=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function x(w){return w===" "||w===`
`||w==="\r"||w==="	"}function A(w){return w==='"'||w==="'"}function C(w){return w===">"||x(w)}function O(w,m){return w.test(m)}function I(w,m){return!O(w,m)}var p=0;t.STATE={BEGIN:p++,BEGIN_WHITESPACE:p++,TEXT:p++,TEXT_ENTITY:p++,OPEN_WAKA:p++,SGML_DECL:p++,SGML_DECL_QUOTED:p++,DOCTYPE:p++,DOCTYPE_QUOTED:p++,DOCTYPE_DTD:p++,DOCTYPE_DTD_QUOTED:p++,COMMENT_STARTING:p++,COMMENT:p++,COMMENT_ENDING:p++,COMMENT_ENDED:p++,CDATA:p++,CDATA_ENDING:p++,CDATA_ENDING_2:p++,PROC_INST:p++,PROC_INST_BODY:p++,PROC_INST_ENDING:p++,OPEN_TAG:p++,OPEN_TAG_SLASH:p++,ATTRIB:p++,ATTRIB_NAME:p++,ATTRIB_NAME_SAW_WHITE:p++,ATTRIB_VALUE:p++,ATTRIB_VALUE_QUOTED:p++,ATTRIB_VALUE_CLOSED:p++,ATTRIB_VALUE_UNQUOTED:p++,ATTRIB_VALUE_ENTITY_Q:p++,ATTRIB_VALUE_ENTITY_U:p++,CLOSE_TAG:p++,CLOSE_TAG_SAW_WHITE:p++,SCRIPT:p++,SCRIPT_ENDING:p++},t.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},t.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(t.ENTITIES).forEach(function(w){var m=t.ENTITIES[w],L=typeof m=="number"?String.fromCharCode(m):m;t.ENTITIES[w]=L});for(var S in t.STATE)t.STATE[t.STATE[S]]=S;p=t.STATE;function R(w,m,L){w[m]&&w[m](L)}function F(w,m,L){w.textNode&&X(w),R(w,m,L)}function X(w){w.textNode=j(w.opt,w.textNode),w.textNode&&R(w,"ontext",w.textNode),w.textNode=""}function j(w,m){return w.trim&&(m=m.trim()),w.normalize&&(m=m.replace(/\s+/g," ")),m}function Y(w,m){return X(w),w.trackPosition&&(m+=`
Line: `+w.line+`
Column: `+w.column+`
Char: `+w.c),m=new Error(m),w.error=m,R(w,"onerror",m),w}function V(w){return w.sawRoot&&!w.closedRoot&&H(w,"Unclosed root tag"),w.state!==p.BEGIN&&w.state!==p.BEGIN_WHITESPACE&&w.state!==p.TEXT&&Y(w,"Unexpected end"),X(w),w.c="",w.closed=!0,R(w,"onend"),r.call(w,w.strict,w.opt),w}function H(w,m){if(typeof w!="object"||!(w instanceof r))throw new Error("bad call to strictFail");w.strict&&Y(w,m)}function Ft(w){w.strict||(w.tagName=w.tagName[w.looseCase]());var m=w.tags[w.tags.length-1]||w,L=w.tag={name:w.tagName,attributes:{}};w.opt.xmlns&&(L.ns=m.ns),w.attribList.length=0,F(w,"onopentagstart",L)}function _t(w,m){var L=w.indexOf(":"),D=L<0?["",w]:w.split(":"),G=D[0],W=D[1];return m&&w==="xmlns"&&(G="xmlns",W=""),{prefix:G,local:W}}function oi(w){if(w.strict||(w.attribName=w.attribName[w.looseCase]()),w.attribList.indexOf(w.attribName)!==-1||w.tag.attributes.hasOwnProperty(w.attribName)){w.attribName=w.attribValue="";return}if(w.opt.xmlns){var m=_t(w.attribName,!0),L=m.prefix,D=m.local;if(L==="xmlns")if(D==="xml"&&w.attribValue!==u)H(w,"xml: prefix must be bound to "+u+`
Actual: `+w.attribValue);else if(D==="xmlns"&&w.attribValue!==d)H(w,"xmlns: prefix must be bound to "+d+`
Actual: `+w.attribValue);else{var G=w.tag,W=w.tags[w.tags.length-1]||w;G.ns===W.ns&&(G.ns=Object.create(W.ns)),G.ns[D]=w.attribValue}w.attribList.push([w.attribName,w.attribValue])}else w.tag.attributes[w.attribName]=w.attribValue,F(w,"onattribute",{name:w.attribName,value:w.attribValue});w.attribName=w.attribValue=""}function Oe(w,m){if(w.opt.xmlns){var L=w.tag,D=_t(w.tagName);L.prefix=D.prefix,L.local=D.local,L.uri=L.ns[D.prefix]||"",L.prefix&&!L.uri&&(H(w,"Unbound namespace prefix: "+JSON.stringify(w.tagName)),L.uri=D.prefix);var G=w.tags[w.tags.length-1]||w;L.ns&&G.ns!==L.ns&&Object.keys(L.ns).forEach(function(bs){F(w,"onopennamespace",{prefix:bs,uri:L.ns[bs]})});for(var W=0,te=w.attribList.length;W<te;W++){var Q=w.attribList[W],he=Q[0],Ut=Q[1],fe=_t(he,!0),ze=fe.prefix,Kl=fe.local,ws=ze===""?"":L.ns[ze]||"",dr={name:he,value:Ut,prefix:ze,local:Kl,uri:ws};ze&&ze!=="xmlns"&&!ws&&(H(w,"Unbound namespace prefix: "+JSON.stringify(ze)),dr.uri=ze),w.tag.attributes[he]=dr,F(w,"onattribute",dr)}w.attribList.length=0}w.tag.isSelfClosing=!!m,w.sawRoot=!0,w.tags.push(w.tag),F(w,"onopentag",w.tag),m||(!w.noscript&&w.tagName.toLowerCase()==="script"?w.state=p.SCRIPT:w.state=p.TEXT,w.tag=null,w.tagName=""),w.attribName=w.attribValue="",w.attribList.length=0}function Bt(w){if(!w.tagName){H(w,"Weird empty close tag."),w.textNode+="</>",w.state=p.TEXT;return}if(w.script){if(w.tagName!=="script"){w.script+="</"+w.tagName+">",w.tagName="",w.state=p.SCRIPT;return}F(w,"onscript",w.script),w.script=""}var m=w.tags.length,L=w.tagName;w.strict||(L=L[w.looseCase]());for(var D=L;m--;){var G=w.tags[m];if(G.name!==D)H(w,"Unexpected close tag");else break}if(m<0){H(w,"Unmatched closing tag: "+w.tagName),w.textNode+="</"+w.tagName+">",w.state=p.TEXT;return}w.tagName=L;for(var W=w.tags.length;W-- >m;){var te=w.tag=w.tags.pop();w.tagName=w.tag.name,F(w,"onclosetag",w.tagName);var Q={};for(var he in te.ns)Q[he]=te.ns[he];var Ut=w.tags[w.tags.length-1]||w;w.opt.xmlns&&te.ns!==Ut.ns&&Object.keys(te.ns).forEach(function(fe){var ze=te.ns[fe];F(w,"onclosenamespace",{prefix:fe,uri:ze})})}m===0&&(w.closedRoot=!0),w.tagName=w.attribValue=w.attribName="",w.attribList.length=0,w.state=p.TEXT}function T(w){var m=w.entity,L=m.toLowerCase(),D,G="";return w.ENTITIES[m]?w.ENTITIES[m]:w.ENTITIES[L]?w.ENTITIES[L]:(m=L,m.charAt(0)==="#"&&(m.charAt(1)==="x"?(m=m.slice(2),D=parseInt(m,16),G=D.toString(16)):(m=m.slice(1),D=parseInt(m,10),G=D.toString(10))),m=m.replace(/^0+/,""),isNaN(D)||G.toLowerCase()!==m?(H(w,"Invalid character entity"),"&"+w.entity+";"):String.fromCodePoint(D))}function N(w,m){m==="<"?(w.state=p.OPEN_WAKA,w.startTagPosition=w.position):x(m)||(H(w,"Non-whitespace before first tag."),w.textNode=m,w.state=p.TEXT)}function P(w,m){var L="";return m<w.length&&(L=w.charAt(m)),L}function z(w){var m=this;if(this.error)throw this.error;if(m.closed)return Y(m,"Cannot write after close. Assign an onready handler.");if(w===null)return V(m);typeof w=="object"&&(w=w.toString());for(var L=0,D="";D=P(w,L++),m.c=D,!!D;)switch(m.trackPosition&&(m.position++,D===`
`?(m.line++,m.column=0):m.column++),m.state){case p.BEGIN:if(m.state=p.BEGIN_WHITESPACE,D==="\uFEFF")continue;N(m,D);continue;case p.BEGIN_WHITESPACE:N(m,D);continue;case p.TEXT:if(m.sawRoot&&!m.closedRoot){for(var G=L-1;D&&D!=="<"&&D!=="&";)D=P(w,L++),D&&m.trackPosition&&(m.position++,D===`
`?(m.line++,m.column=0):m.column++);m.textNode+=w.substring(G,L-1)}D==="<"&&!(m.sawRoot&&m.closedRoot&&!m.strict)?(m.state=p.OPEN_WAKA,m.startTagPosition=m.position):(!x(D)&&(!m.sawRoot||m.closedRoot)&&H(m,"Text data outside of root node."),D==="&"?m.state=p.TEXT_ENTITY:m.textNode+=D);continue;case p.SCRIPT:D==="<"?m.state=p.SCRIPT_ENDING:m.script+=D;continue;case p.SCRIPT_ENDING:D==="/"?m.state=p.CLOSE_TAG:(m.script+="<"+D,m.state=p.SCRIPT);continue;case p.OPEN_WAKA:if(D==="!")m.state=p.SGML_DECL,m.sgmlDecl="";else if(!x(D))if(O(b,D))m.state=p.OPEN_TAG,m.tagName=D;else if(D==="/")m.state=p.CLOSE_TAG,m.tagName="";else if(D==="?")m.state=p.PROC_INST,m.procInstName=m.procInstBody="";else{if(H(m,"Unencoded <"),m.startTagPosition+1<m.position){var W=m.position-m.startTagPosition;D=new Array(W).join(" ")+D}m.textNode+="<"+D,m.state=p.TEXT}continue;case p.SGML_DECL:if(m.sgmlDecl+D==="--"){m.state=p.COMMENT,m.comment="",m.sgmlDecl="";continue}m.doctype&&m.doctype!==!0&&m.sgmlDecl?(m.state=p.DOCTYPE_DTD,m.doctype+="<!"+m.sgmlDecl+D,m.sgmlDecl=""):(m.sgmlDecl+D).toUpperCase()===g?(F(m,"onopencdata"),m.state=p.CDATA,m.sgmlDecl="",m.cdata=""):(m.sgmlDecl+D).toUpperCase()===a?(m.state=p.DOCTYPE,(m.doctype||m.sawRoot)&&H(m,"Inappropriately located doctype declaration"),m.doctype="",m.sgmlDecl=""):D===">"?(F(m,"onsgmldeclaration",m.sgmlDecl),m.sgmlDecl="",m.state=p.TEXT):(A(D)&&(m.state=p.SGML_DECL_QUOTED),m.sgmlDecl+=D);continue;case p.SGML_DECL_QUOTED:D===m.q&&(m.state=p.SGML_DECL,m.q=""),m.sgmlDecl+=D;continue;case p.DOCTYPE:D===">"?(m.state=p.TEXT,F(m,"ondoctype",m.doctype),m.doctype=!0):(m.doctype+=D,D==="["?m.state=p.DOCTYPE_DTD:A(D)&&(m.state=p.DOCTYPE_QUOTED,m.q=D));continue;case p.DOCTYPE_QUOTED:m.doctype+=D,D===m.q&&(m.q="",m.state=p.DOCTYPE);continue;case p.DOCTYPE_DTD:D==="]"?(m.doctype+=D,m.state=p.DOCTYPE):D==="<"?(m.state=p.OPEN_WAKA,m.startTagPosition=m.position):A(D)?(m.doctype+=D,m.state=p.DOCTYPE_DTD_QUOTED,m.q=D):m.doctype+=D;continue;case p.DOCTYPE_DTD_QUOTED:m.doctype+=D,D===m.q&&(m.state=p.DOCTYPE_DTD,m.q="");continue;case p.COMMENT:D==="-"?m.state=p.COMMENT_ENDING:m.comment+=D;continue;case p.COMMENT_ENDING:D==="-"?(m.state=p.COMMENT_ENDED,m.comment=j(m.opt,m.comment),m.comment&&F(m,"oncomment",m.comment),m.comment=""):(m.comment+="-"+D,m.state=p.COMMENT);continue;case p.COMMENT_ENDED:D!==">"?(H(m,"Malformed comment"),m.comment+="--"+D,m.state=p.COMMENT):m.doctype&&m.doctype!==!0?m.state=p.DOCTYPE_DTD:m.state=p.TEXT;continue;case p.CDATA:D==="]"?m.state=p.CDATA_ENDING:m.cdata+=D;continue;case p.CDATA_ENDING:D==="]"?m.state=p.CDATA_ENDING_2:(m.cdata+="]"+D,m.state=p.CDATA);continue;case p.CDATA_ENDING_2:D===">"?(m.cdata&&F(m,"oncdata",m.cdata),F(m,"onclosecdata"),m.cdata="",m.state=p.TEXT):D==="]"?m.cdata+="]":(m.cdata+="]]"+D,m.state=p.CDATA);continue;case p.PROC_INST:D==="?"?m.state=p.PROC_INST_ENDING:x(D)?m.state=p.PROC_INST_BODY:m.procInstName+=D;continue;case p.PROC_INST_BODY:if(!m.procInstBody&&x(D))continue;D==="?"?m.state=p.PROC_INST_ENDING:m.procInstBody+=D;continue;case p.PROC_INST_ENDING:D===">"?(F(m,"onprocessinginstruction",{name:m.procInstName,body:m.procInstBody}),m.procInstName=m.procInstBody="",m.state=p.TEXT):(m.procInstBody+="?"+D,m.state=p.PROC_INST_BODY);continue;case p.OPEN_TAG:O(E,D)?m.tagName+=D:(Ft(m),D===">"?Oe(m):D==="/"?m.state=p.OPEN_TAG_SLASH:(x(D)||H(m,"Invalid character in tag name"),m.state=p.ATTRIB));continue;case p.OPEN_TAG_SLASH:D===">"?(Oe(m,!0),Bt(m)):(H(m,"Forward-slash in opening tag not followed by >"),m.state=p.ATTRIB);continue;case p.ATTRIB:if(x(D))continue;D===">"?Oe(m):D==="/"?m.state=p.OPEN_TAG_SLASH:O(b,D)?(m.attribName=D,m.attribValue="",m.state=p.ATTRIB_NAME):H(m,"Invalid attribute name");continue;case p.ATTRIB_NAME:D==="="?m.state=p.ATTRIB_VALUE:D===">"?(H(m,"Attribute without value"),m.attribValue=m.attribName,oi(m),Oe(m)):x(D)?m.state=p.ATTRIB_NAME_SAW_WHITE:O(E,D)?m.attribName+=D:H(m,"Invalid attribute name");continue;case p.ATTRIB_NAME_SAW_WHITE:if(D==="=")m.state=p.ATTRIB_VALUE;else{if(x(D))continue;H(m,"Attribute without value"),m.tag.attributes[m.attribName]="",m.attribValue="",F(m,"onattribute",{name:m.attribName,value:""}),m.attribName="",D===">"?Oe(m):O(b,D)?(m.attribName=D,m.state=p.ATTRIB_NAME):(H(m,"Invalid attribute name"),m.state=p.ATTRIB)}continue;case p.ATTRIB_VALUE:if(x(D))continue;A(D)?(m.q=D,m.state=p.ATTRIB_VALUE_QUOTED):(m.opt.unquotedAttributeValues||Y(m,"Unquoted attribute value"),m.state=p.ATTRIB_VALUE_UNQUOTED,m.attribValue=D);continue;case p.ATTRIB_VALUE_QUOTED:if(D!==m.q){D==="&"?m.state=p.ATTRIB_VALUE_ENTITY_Q:m.attribValue+=D;continue}oi(m),m.q="",m.state=p.ATTRIB_VALUE_CLOSED;continue;case p.ATTRIB_VALUE_CLOSED:x(D)?m.state=p.ATTRIB:D===">"?Oe(m):D==="/"?m.state=p.OPEN_TAG_SLASH:O(b,D)?(H(m,"No whitespace between attributes"),m.attribName=D,m.attribValue="",m.state=p.ATTRIB_NAME):H(m,"Invalid attribute name");continue;case p.ATTRIB_VALUE_UNQUOTED:if(!C(D)){D==="&"?m.state=p.ATTRIB_VALUE_ENTITY_U:m.attribValue+=D;continue}oi(m),D===">"?Oe(m):m.state=p.ATTRIB;continue;case p.CLOSE_TAG:if(m.tagName)D===">"?Bt(m):O(E,D)?m.tagName+=D:m.script?(m.script+="</"+m.tagName,m.tagName="",m.state=p.SCRIPT):(x(D)||H(m,"Invalid tagname in closing tag"),m.state=p.CLOSE_TAG_SAW_WHITE);else{if(x(D))continue;I(b,D)?m.script?(m.script+="</"+D,m.state=p.SCRIPT):H(m,"Invalid tagname in closing tag."):m.tagName=D}continue;case p.CLOSE_TAG_SAW_WHITE:if(x(D))continue;D===">"?Bt(m):H(m,"Invalid characters in closing tag");continue;case p.TEXT_ENTITY:case p.ATTRIB_VALUE_ENTITY_Q:case p.ATTRIB_VALUE_ENTITY_U:var te,Q;switch(m.state){case p.TEXT_ENTITY:te=p.TEXT,Q="textNode";break;case p.ATTRIB_VALUE_ENTITY_Q:te=p.ATTRIB_VALUE_QUOTED,Q="attribValue";break;case p.ATTRIB_VALUE_ENTITY_U:te=p.ATTRIB_VALUE_UNQUOTED,Q="attribValue";break}if(D===";"){var he=T(m);m.opt.unparsedEntities&&!Object.values(t.XML_ENTITIES).includes(he)?(m.entity="",m.state=te,m.write(he)):(m[Q]+=he,m.entity="",m.state=te)}else O(m.entity.length?_:v,D)?m.entity+=D:(H(m,"Invalid character in entity name"),m[Q]+="&"+m.entity+D,m.entity="",m.state=te);continue;default:throw new Error(m,"Unknown state: "+m.state)}return m.position>=m.bufferCheckPosition&&o(m),m}/*! http://mths.be/fromcodepoint v0.1.0 by @mathias */String.fromCodePoint||function(){var w=String.fromCharCode,m=Math.floor,L=function(){var D=16384,G=[],W,te,Q=-1,he=arguments.length;if(!he)return"";for(var Ut="";++Q<he;){var fe=Number(arguments[Q]);if(!isFinite(fe)||fe<0||fe>1114111||m(fe)!==fe)throw RangeError("Invalid code point: "+fe);fe<=65535?G.push(fe):(fe-=65536,W=(fe>>10)+55296,te=fe%1024+56320,G.push(W,te)),(Q+1===he||G.length>D)&&(Ut+=w.apply(null,G),G.length=0)}return Ut};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:L,configurable:!0,writable:!0}):String.fromCodePoint=L}()})(e)}(_n)),_n}const Od=ir(ou);var gn={},oa;function Cd(){return oa||(oa=1,function(){gn.stripBOM=function(e){return e[0]==="\uFEFF"?e.substring(1):e}}.call(q)),gn}var gt={},aa;function Cl(){return aa||(aa=1,function(){var e;e=new RegExp(/(?!xmlns)^.*:/),gt.normalize=function(t){return t.toLowerCase()},gt.firstCharLowerCase=function(t){return t.charAt(0).toLowerCase()+t.slice(1)},gt.stripPrefix=function(t){return t.replace(e,"")},gt.parseNumbers=function(t){return isNaN(t)||(t=t%1===0?parseInt(t,10):parseFloat(t)),t},gt.parseBooleans=function(t){return/^(?:true|false)$/i.test(t)&&(t=t.toLowerCase()==="true"),t}}.call(q)),gt}var _e={},mn=1,ds={},yn=!1,Ji=_e.document,ni;function Il(e){typeof e!="function"&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),i=0;i<t.length;i++)t[i]=arguments[i+1];var r={callback:e,args:t};return ds[mn]=r,ni(mn),mn++}function ps(e){delete ds[e]}function Id(e){var t=e.callback,i=e.args;switch(i.length){case 0:t();break;case 1:t(i[0]);break;case 2:t(i[0],i[1]);break;case 3:t(i[0],i[1],i[2]);break;default:t.apply(void 0,i);break}}function si(e){if(yn)setTimeout(si,0,e);else{var t=ds[e];if(t){yn=!0;try{Id(t)}finally{ps(e),yn=!1}}}}function Ld(){ni=function(e){process.nextTick(function(){si(e)})}}function Rd(){if(_e.postMessage&&!_e.importScripts){var e=!0,t=_e.onmessage;return _e.onmessage=function(){e=!1},_e.postMessage("","*"),_e.onmessage=t,e}}function Nd(){var e="setImmediate$"+Math.random()+"$",t=function(i){i.source===_e&&typeof i.data=="string"&&i.data.indexOf(e)===0&&si(+i.data.slice(e.length))};_e.addEventListener?_e.addEventListener("message",t,!1):_e.attachEvent("onmessage",t),ni=function(i){_e.postMessage(e+i,"*")}}function Md(){var e=new MessageChannel;e.port1.onmessage=function(t){var i=t.data;si(i)},ni=function(t){e.port2.postMessage(t)}}function Pd(){var e=Ji.documentElement;ni=function(t){var i=Ji.createElement("script");i.onreadystatechange=function(){si(t),i.onreadystatechange=null,e.removeChild(i),i=null},e.appendChild(i)}}function kd(){ni=function(e){setTimeout(si,0,e)}}var Bi=Object.getPrototypeOf&&Object.getPrototypeOf(_e);Bi=Bi&&Bi.setTimeout?Bi:_e;({}).toString.call(_e.process)==="[object process]"?Ld():Rd()?Nd():_e.MessageChannel?Md():Ji&&"onreadystatechange"in Ji.createElement("script")?Pd():kd();var Qt={},Ll=Function.prototype.apply;function Rl(e){typeof e=="number"&&typeof Qt.clearInterval=="function"?Qt.clearInterval(e):_s(e)}function Ii(e){typeof e=="number"&&typeof Qt.clearTimeout=="function"?Qt.clearTimeout(e):_s(e)}function _s(e){e&&typeof e.close=="function"&&e.close()}function gs(){return new Ei(Ll.call(Qt.setTimeout,window,arguments))}function Nl(){return new Ei(Ll.call(Qt.setInterval,window,arguments))}function Ei(e){this._id=e}Ei.prototype.unref=Ei.prototype.ref=function(){};Ei.prototype.close=function(){_s(this._id)};function Ml(e,t){Ii(e._idleTimeoutId),e._idleTimeout=t}function Pl(e){Ii(e._idleTimeoutId),e._idleTimeout=-1}var kl=ms;function ms(e){Ii(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=gs(function(){e._onTimeout&&e._onTimeout()},t))}const Fd={setImmediate:Il,clearImmediate:ps,setTimeout:gs,clearTimeout:Ii,setInterval:Nl,clearInterval:Rl,active:ms,unenroll:Pl,_unrefActive:kl,enroll:Ml},Bd=Object.freeze(Object.defineProperty({__proto__:null,_unrefActive:kl,active:ms,clearImmediate:ps,clearInterval:Rl,clearTimeout:Ii,default:Fd,enroll:Ml,setImmediate:Il,setInterval:Nl,setTimeout:gs,unenroll:Pl},Symbol.toStringTag,{value:"Module"})),Ud=ir(Bd);var la;function zd(){return la||(la=1,function(e){(function(){var t,i,r,o,n,s,l,f,h,c=function(u,d){return function(){return u.apply(d,arguments)}},g=function(u,d){for(var y in d)a.call(d,y)&&(u[y]=d[y]);function b(){this.constructor=u}return b.prototype=d.prototype,u.prototype=new b,u.__super__=d.prototype,u},a={}.hasOwnProperty;f=Dd(),o=Od,t=Cd(),l=Cl(),h=Ud.setImmediate,i=Qn().defaults,n=function(u){return typeof u=="object"&&u!=null&&Object.keys(u).length===0},s=function(u,d,y){var b,E,v;for(b=0,E=u.length;b<E;b++)v=u[b],d=v(d,y);return d},r=function(u,d,y){var b;return b=Object.create(null),b.value=y,b.writable=!0,b.enumerable=!0,b.configurable=!0,Object.defineProperty(u,d,b)},e.Parser=function(u){g(d,u);function d(y){this.parseStringPromise=c(this.parseStringPromise,this),this.parseString=c(this.parseString,this),this.reset=c(this.reset,this),this.assignOrPush=c(this.assignOrPush,this),this.processAsync=c(this.processAsync,this);var b,E,v;if(!(this instanceof e.Parser))return new e.Parser(y);this.options={},E=i["0.2"];for(b in E)a.call(E,b)&&(v=E[b],this.options[b]=v);for(b in y)a.call(y,b)&&(v=y[b],this.options[b]=v);this.options.xmlns&&(this.options.xmlnskey=this.options.attrkey+"ns"),this.options.normalizeTags&&(this.options.tagNameProcessors||(this.options.tagNameProcessors=[]),this.options.tagNameProcessors.unshift(l.normalize)),this.reset()}return d.prototype.processAsync=function(){var y,b;try{return this.remaining.length<=this.options.chunkSize?(y=this.remaining,this.remaining="",this.saxParser=this.saxParser.write(y),this.saxParser.close()):(y=this.remaining.substr(0,this.options.chunkSize),this.remaining=this.remaining.substr(this.options.chunkSize,this.remaining.length),this.saxParser=this.saxParser.write(y),h(this.processAsync))}catch(E){if(b=E,!this.saxParser.errThrown)return this.saxParser.errThrown=!0,this.emit(b)}},d.prototype.assignOrPush=function(y,b,E){return b in y?(y[b]instanceof Array||r(y,b,[y[b]]),y[b].push(E)):this.options.explicitArray?r(y,b,[E]):r(y,b,E)},d.prototype.reset=function(){var y,b,E,v;return this.removeAllListeners(),this.saxParser=f.parser(this.options.strict,{trim:!1,normalize:!1,xmlns:this.options.xmlns}),this.saxParser.errThrown=!1,this.saxParser.onerror=function(_){return function(x){if(_.saxParser.resume(),!_.saxParser.errThrown)return _.saxParser.errThrown=!0,_.emit("error",x)}}(this),this.saxParser.onend=function(_){return function(){if(!_.saxParser.ended)return _.saxParser.ended=!0,_.emit("end",_.resultObject)}}(this),this.saxParser.ended=!1,this.EXPLICIT_CHARKEY=this.options.explicitCharkey,this.resultObject=null,v=[],y=this.options.attrkey,b=this.options.charkey,this.saxParser.onopentag=function(_){return function(x){var A,C,O,I,p;if(O={},O[b]="",!_.options.ignoreAttrs){p=x.attributes;for(A in p)a.call(p,A)&&(!(y in O)&&!_.options.mergeAttrs&&(O[y]={}),C=_.options.attrValueProcessors?s(_.options.attrValueProcessors,x.attributes[A],A):x.attributes[A],I=_.options.attrNameProcessors?s(_.options.attrNameProcessors,A):A,_.options.mergeAttrs?_.assignOrPush(O,I,C):r(O[y],I,C))}return O["#name"]=_.options.tagNameProcessors?s(_.options.tagNameProcessors,x.name):x.name,_.options.xmlns&&(O[_.options.xmlnskey]={uri:x.uri,local:x.local}),v.push(O)}}(this),this.saxParser.onclosetag=function(_){return function(){var x,A,C,O,I,p,S,R,F,X;if(p=v.pop(),I=p["#name"],(!_.options.explicitChildren||!_.options.preserveChildrenOrder)&&delete p["#name"],p.cdata===!0&&(x=p.cdata,delete p.cdata),F=v[v.length-1],p[b].match(/^\s*$/)&&!x?(A=p[b],delete p[b]):(_.options.trim&&(p[b]=p[b].trim()),_.options.normalize&&(p[b]=p[b].replace(/\s{2,}/g," ").trim()),p[b]=_.options.valueProcessors?s(_.options.valueProcessors,p[b],I):p[b],Object.keys(p).length===1&&b in p&&!_.EXPLICIT_CHARKEY&&(p=p[b])),n(p)&&(typeof _.options.emptyTag=="function"?p=_.options.emptyTag():p=_.options.emptyTag!==""?_.options.emptyTag:A),_.options.validator!=null&&(X="/"+function(){var j,Y,V;for(V=[],j=0,Y=v.length;j<Y;j++)O=v[j],V.push(O["#name"]);return V}().concat(I).join("/"),function(){var j;try{return p=_.options.validator(X,F&&F[I],p)}catch(Y){return j=Y,_.emit("error",j)}}()),_.options.explicitChildren&&!_.options.mergeAttrs&&typeof p=="object"){if(!_.options.preserveChildrenOrder)O={},_.options.attrkey in p&&(O[_.options.attrkey]=p[_.options.attrkey],delete p[_.options.attrkey]),!_.options.charsAsChildren&&_.options.charkey in p&&(O[_.options.charkey]=p[_.options.charkey],delete p[_.options.charkey]),Object.getOwnPropertyNames(p).length>0&&(O[_.options.childkey]=p),p=O;else if(F){F[_.options.childkey]=F[_.options.childkey]||[],S={};for(C in p)a.call(p,C)&&r(S,C,p[C]);F[_.options.childkey].push(S),delete p["#name"],Object.keys(p).length===1&&b in p&&!_.EXPLICIT_CHARKEY&&(p=p[b])}}return v.length>0?_.assignOrPush(F,I,p):(_.options.explicitRoot&&(R=p,p={},r(p,I,R)),_.resultObject=p,_.saxParser.ended=!0,_.emit("end",_.resultObject))}}(this),E=function(_){return function(x){var A,C;if(C=v[v.length-1],C)return C[b]+=x,_.options.explicitChildren&&_.options.preserveChildrenOrder&&_.options.charsAsChildren&&(_.options.includeWhiteChars||x.replace(/\\n/g,"").trim()!=="")&&(C[_.options.childkey]=C[_.options.childkey]||[],A={"#name":"__text__"},A[b]=x,_.options.normalize&&(A[b]=A[b].replace(/\s{2,}/g," ").trim()),C[_.options.childkey].push(A)),C}}(this),this.saxParser.ontext=E,this.saxParser.oncdata=function(_){return function(x){var A;if(A=E(x),A)return A.cdata=!0}}()},d.prototype.parseString=function(y,b){var E;b!=null&&typeof b=="function"&&(this.on("end",function(v){return this.reset(),b(null,v)}),this.on("error",function(v){return this.reset(),b(v)}));try{return y=y.toString(),y.trim()===""?(this.emit("end",null),!0):(y=t.stripBOM(y),this.options.async?(this.remaining=y,h(this.processAsync),this.saxParser):this.saxParser.write(y).close())}catch(v){if(E=v,this.saxParser.errThrown||this.saxParser.ended){if(this.saxParser.ended)throw E}else return this.emit("error",E),this.saxParser.errThrown=!0}},d.prototype.parseStringPromise=function(y){return new Promise(function(b){return function(E,v){return b.parseString(y,function(_,x){return _?v(_):E(x)})}}(this))},d}(o),e.parseString=function(u,d,y){var b,E,v;return y!=null?(typeof y=="function"&&(b=y),typeof d=="object"&&(E=d)):(typeof d=="function"&&(b=d),E={}),v=new e.Parser(E),v.parseString(u,b)},e.parseStringPromise=function(u,d){var y,b;return typeof d=="object"&&(y=d),b=new e.Parser(y),b.parseStringPromise(u)}}).call(q)}(pn)),pn}var Fl;(function(){var e,t,i,r=function(n,s){for(var l in s)o.call(s,l)&&(n[l]=s[l]);function f(){this.constructor=n}return f.prototype=s.prototype,n.prototype=new f,n.__super__=s.prototype,n},o={}.hasOwnProperty;t=Qn(),e=Td(),i=zd(),Cl(),t.defaults,function(n){r(s,n);function s(l){this.message=l}return s}(Error),e.Builder,i.Parser,Fl=i.parseString,i.parseStringPromise}).call(q);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function dt(e,t,i,r){function o(n){return n instanceof i?n:new i(function(s){s(n)})}return new(i||(i=Promise))(function(n,s){function l(c){try{h(r.next(c))}catch(g){s(g)}}function f(c){try{h(r.throw(c))}catch(g){s(g)}}function h(c){c.done?n(c.value):o(c.value).then(l,f)}h((r=r.apply(e,[])).next())})}var Wt;(function(e){e.ELLIPSE="ellipse",e.POINT="point",e.POLYGON="polygon",e.RECTANGLE="rectangle"})(Wt||(Wt={}));var ve;(function(e){e.EDITOR_SETTINGS="editorsettings",e.GROUP="group",e.IMAGE_LAYER="imagelayer",e.LAYER="layer",e.OBJECT_GROUP="objectgroup",e.PROPERTIES="properties",e.TILESET="tileset"})(ve||(ve={}));var er;(function(e){e.BASE64="base64",e.CSV="csv"})(er||(er={}));var ci;(function(e){e.GZIP="gzip",e.ZLIB="zlib"})(ci||(ci={}));var ft;(function(e){e[e.DIAGONALLY=536870912]="DIAGONALLY",e[e.HORIZONTALLY=2147483648]="HORIZONTALLY",e[e.VERTICALLY=1073741824]="VERTICALLY"})(ft||(ft={}));const Ze=e=>!!(e&&e.length>0),Xd=e=>!!e.match(/^\s*data:([a-z]+\/[a-z]+(;[a-z-]+=[a-z-]+)?)?(;base64)?,[a-z0-9!$&',()*+,;=\-._~:@/?%\s]*\s*$/i),jd=e=>dt(void 0,void 0,void 0,function*(){return new Promise(t=>{fetch(e).then(i=>i.text()).then(i=>t(i))})}),ua=(e,t)=>{const i=[];if(e.length!==t)throw new Error(`Expected ${t} bytes of tile data; received ${e.length}`);for(let r=0;r<t;r+=4)i.push(e.readUInt32LE(r));return i},Be=e=>e&&Object.entries(e).map(([t,i])=>({[t]:i})),cr=e=>({properties:e&&Object.assign({},...e.map(({property:t})=>Object.assign({},...t.map(({$:{name:i,value:r},_:o})=>({[i]:r||o})))))||null}),tr=e=>({H:!!(e&ft.HORIZONTALLY),V:!!(e&ft.VERTICALLY),D:!!(e&ft.DIAGONALLY)}),Bl=e=>e&=~(ft.HORIZONTALLY|ft.VERTICALLY|ft.DIAGONALLY),Hd=e=>e.point&&Wt.POINT||e.ellipse&&Wt.ELLIPSE||e.polygon&&Wt.POLYGON||Wt.RECTANGLE,Vd=e=>{if(e==="true")return!0;if(e==="false")return!1;if(`${e}`.match(/^[+-]?\d+(\.\d+)?$/g)){const t=parseFloat(e);return isNaN(t)?e:t}return e},Gd=e=>dt(void 0,void 0,void 0,function*(){const t=Xd(e)?yield jd(e):e;return new Promise(i=>Fl(t,{explicitChildren:!0,preserveChildrenOrder:!0,attrValueProcessors:[r=>Vd(r)]},(r,o)=>{if(r)throw r;i(o)}))}),Ul=e=>{const{$:t,properties:i,polygon:r,text:o}=e,n=Object.assign(Object.assign(Object.assign({shape:Hd(e)},Ze(r)&&{points:r[0].$.points.split(" ").map(s=>{const[l,f]=s.split(",");return[parseFloat(l),parseFloat(f)]})}),cr(i)),...Be(t));return o&&(n.text=o[0]._,n.properties=Object.assign({},n.properties,o[0].$)),n.gid&&(n.flips=tr(n.gid),n.gid=Bl(n.gid)),n},Wd=e=>{const{$:t,image:i,object:r,properties:o}=e;return Object.assign(Object.assign(Object.assign(Object.assign({type:e["#name"],visible:1},Ze(i)&&{image:Object.assign({},...Be(i[0].$))}),Ze(r)&&{objects:r.map(n=>Ul(n))}),cr(o)),...Be(t))},qd=e=>{const{$:t,animation:i,objectgroup:r}=e,o=Ze(r)&&r[0].object;return Object.assign(Object.assign(Object.assign({},Ze(i)&&{animation:{frames:i[0].frame.map(({$:n})=>Object.assign({},...Be(n)))}}),Ze(o)&&{objects:o.map(n=>Ul(n))}),...Be(t))},Zd=(e,t,i)=>dt(void 0,void 0,void 0,function*(){return Object.assign(Object.assign({type:e["#name"],layers:Ze(e.$$)?yield Promise.all(e.$$.map(r=>zl(r,t,i))):[]},cr(e.properties)),...Be(e.$))}),Yd=e=>{const{$:t,$$:i,tile:r}=e,o=i&&Object.assign({},...Be(i[0].$));if(o){const n=Ze(r)&&r.map(s=>qd(s));return Object.assign({},...Be(t),{image:o,tiles:n})}else throw new Error("Tilesets should be embeded in a map file.")};function Kd(e,t,i){return dt(this,void 0,void 0,function*(){const{data:r,properties:o}=e;if(!Ze(r))throw new Error("TMXLayer data corrupted!");const n=Object.assign(Object.assign(Object.assign(Object.assign({},i?{flips:[]}:{}),{type:e["#name"],visible:1}),cr(o)),...Be(e.$)),{_:s,$:l,tile:f}=r[0];if(f)n.data=f.map(({$:h})=>h&&h.gid||0);else{const{encoding:h,compression:c}=l,g=s.trim();switch(h){case er.CSV:n.data=g.split(",");break;case er.BASE64:const a=new Buffer(g,h);switch(c){case null:case void 0:n.data=ua(a,t);break;case ci.GZIP:case ci.ZLIB:const u=c===ci.GZIP?Eo.gunzip:Eo.inflate;n.data=yield new Promise((d,y)=>u(a,(b,E)=>{b&&y(b),d(ua(E,t))}));break;default:throw new Error(`unsupported compression: ${c}`)}}}return n.data.map((h,c)=>{i?(n.flips[c]=tr(h),n.data[c]=Bl(h)):n.data[c]=h}),n})}const zl=(e,t,i)=>dt(void 0,void 0,void 0,function*(){switch(e["#name"]){case ve.GROUP:return yield Zd(e,t,i);case ve.LAYER:return yield Kd(e,t,i);case ve.IMAGE_LAYER:case ve.OBJECT_GROUP:return Wd(e)}});function $d(e,t){return dt(this,void 0,void 0,function*(){const{map:{$:i,$$:r}}=yield Gd(e),o=Object.assign({layers:[],tilesets:[],backgroundcolor:"",height:0,infinite:0,nextlayerid:0,nextobjectid:0,orientation:"",renderorder:"",tiledversion:"",tileheight:0,tilewidth:0,version:0,width:0,properties:void 0},...Be(i)),n=o.width*o.height*4;return yield Promise.all(r.map((s,l)=>dt(this,void 0,void 0,function*(){switch(s["#name"]){case ve.PROPERTIES:o.properties=Object.assign({},...s.$$.map(({$:{name:f,value:h}})=>({[f]:h})));break;case ve.EDITOR_SETTINGS:o.editorsettings=Object.assign({},...s.$$.map(f=>({[f["#name"]]:f.$})));break;case ve.TILESET:o.tilesets.push(Yd(s));break;case ve.GROUP:case ve.IMAGE_LAYER:case ve.LAYER:case ve.OBJECT_GROUP:o.layers[l]=yield zl(s,n,t);break}}))),Object.assign(Object.assign({},o),{layers:Object.values(o.layers)})})}const Qd=(e,t=!1)=>dt(void 0,void 0,void 0,function*(){return yield $d(e,t)}),Jd=e=>e*Math.PI/180,ke=(e,t=0,i=1)=>Math.max(t,Math.min(i,e)),Et=(e,t,i)=>t+ke(e)*(i-t),yt=(e=1,t=0)=>t+Math.random()*(e-t),Ln=(e,t,i)=>i-t?ke((e-t)/(i-t)):0;function Xl(e,t,i){const r=i-t;return((e-t)%r+r)%r+t}let pt=class Ht{constructor(t,i){this.pos=t,this.size=i,this.overlaps=(r,o)=>Math.abs(this.pos.x-r.x)*2<this.size.x+o.x&&Math.abs(this.pos.y-r.y)*2<this.size.y+o.y}move(t){return new Ht(this.pos.add(t),this.size)}scale(t){return new Ht(this.pos.scale(t),this.size.scale(t))}multiply(t){return new Ht(this.pos.multiply(t),this.size.multiply(t))}divide(t){return new Ht(this.pos.divide(t),this.size.divide(t))}floor(){return new Ht(this.pos.floor(),this.size.floor())}};class oe{constructor(t=0,i=0){this.x=t,this.y=i}add(t){return new oe(this.x+t.x,this.y+t.y)}subtract(t){return new oe(this.x-t.x,this.y-t.y)}multiply(t){return new oe(this.x*t.x,this.y*t.y)}divide(t){return typeof t=="number"?new oe(this.x/t,this.y/t):new oe(this.x/t.x,this.y/t.y)}clone(){return new oe(this.x,this.y)}scale(t){return new oe(this.x*t,this.y*t)}length(){return Math.pow(this.lengthSquared(),.5)}lengthSquared(){return Math.pow(this.x,2)+Math.pow(this.y,2)}distance(t){return Math.pow(this.distanceSquared(t),.5)}distanceSquared(t){return Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2)}normalize(t=1){const i=this.length();return i?this.scale(t/i):new oe(0,t)}clampLength(t=1){const i=this.length();return i>t?this.scale(t/i):this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}angle(){return Math.atan2(this.x,this.y)}setAngle(t=0,i=1){return this.x=i*Math.sin(t),this.y=i*Math.cos(t),this}rotate(t){const i=Math.cos(t),r=Math.sin(t);return new oe(this.x*i-this.y*r,this.x*r+this.y*i)}direction(){return Math.abs(this.x)>Math.abs(this.y)?this.x<0?3:1:this.y<0?2:0}reverse(){return new oe(-this.y,-this.x)}invert(){return new oe(-this.x,-this.y)}floor(){return new oe(Math.floor(this.x),Math.floor(this.y))}area(){return Math.abs(this.x*this.y)}lerp(t,i){return this.add(t.subtract(this).scale(ke(i)))}inRange(t){return this.x>=0&&this.y>=0&&this.x<t.x&&this.y<t.y}}const ui=(e=0,t=0,i=0,r=0)=>new pt(k(e,t),k(i,r)),k=(e=0,t)=>new oe(e,t===void 0?e:t),jl=(e=1)=>new oe().setAngle(yt(2*Math.PI),e),ep=(e=1,t=0)=>e>0?jl(e*Math.pow(yt(t/e,1),.5)):new oe;class tp{constructor(t){this.scene=t,this.pos=k(),this.offset=k(),this.scale=1,this.speed=k(1),this.scrolling=!0,this.isShaking=!1,this.bounded=!0,this.shakeIntensity=k(),this.shakeDuration=0,this.shakeElapsed=0}setPos(t){this.followEntity=void 0,this.pos=t}setScale(t){this.scale=t}setSpeed(t){this.speed=typeof t=="number"?k(t):t}setScrolling(t){this.scrolling=t}follow(t){this.followEntity=t}unfollow(){this.followEntity=void 0}toggleBounds(t){this.bounded=t}shake(t,i){this.isShaking=!0,this.shakeDuration=t,this.shakeIntensity=k(i.x,i.y),this.offset=k(0),this.shakeElapsed=0}update(){const{game:t,size:i,tileSize:r}=this.scene,o=k(t.width,t.height);if(this.followEntity){const n=this.followEntity.getTranslatedBoundingRect();if(this.scrolling){const s=n.pos.invert().add(o.divide(k(2))).subtract(n.size.divide(k(2)));this.pos.x=Math.ceil(Et(this.speed.x,this.pos.x,s.x)),this.pos.y=Math.ceil(Et(this.speed.y,this.pos.y,s.y))}else{const s=n.pos.divide(o).floor();this.pos=k(-s.x*o.x,-s.y*o.y)}}if(this.bounded){const n=i.multiply(r).scale(this.scale).subtract(o);this.pos.x<-n.x+this.scale&&(this.pos.x=-n.x+this.scale),this.pos.y<-n.y+this.scale&&(this.pos.y=-n.y+this.scale),this.pos.x>0&&(this.pos.x=0),this.pos.y>0&&(this.pos.y=0)}this.isShaking&&(this.shakeElapsed+=t.delta,this.shakeElapsed<this.shakeDuration?this.offset=k(Math.random()*this.shakeIntensity.x*o.x*2-this.shakeIntensity.x*o.x,Math.random()*this.shakeIntensity.y*o.y*2-this.shakeIntensity.y*o.y).scale(this.scale):(this.isShaking=!1,this.offset=k()),this.pos=this.pos.add(this.offset))}}class K{constructor(t=255,i=255,r=255,o=1){this.r=255,this.g=255,this.b=255,this.a=1,typeof t=="string"?this.setHex(t):(this.r=t,this.g=i,this.b=r,this.a=o)}copy(){return new K(this.r,this.g,this.b,this.a)}add(t){return new K(this.r+t.r,this.g+t.g,this.b+t.b,this.a+t.a)}subtract(t){return new K(this.r-t.r,this.g-t.g,this.b-t.b,this.a-t.a)}setAlpha(t){return this.a=t,this}setHex(t){const i=t.replace("#","");return this.r=parseInt(i.substring(0,2),16),this.g=parseInt(i.substring(2,4),16),this.b=parseInt(i.substring(4,6),16),this.a=i.length===8?parseInt(i.substring(6,8),16)/255:1,this}brightness(t){let{r:i,g:r,b:o}=this;return i=i+t,r=r+t,o=o+t,i>255?i=255:i<0&&(i=0),r>255?r=255:r<0&&(r=0),o>255?o=255:o<0&&(o=0),new K(i,r,o,this.a)}rgbaInt(){const t=ke(this.r/255)*255|0,i=ke(this.g/255)*255<<8,r=ke(this.b/255)*255<<16,o=ke(this.a)*255<<24;return t+i+r+o}toString(t=!0){const i=r=>((r=r|0)<16?"0":"")+r.toString(16);return"#"+i(this.r)+i(this.g)+i(this.b)+(t?i(this.a*255):"")}}const Ae={Black:new K("#140C1C"),DarkRed:new K("#442434"),DarkBlue:new K("#30346D"),DarkGray:new K("#4E4A4F"),Brown:new K("#854C30"),DarkGreen:new K("#346524"),Red:new K("#D04648"),LightGray:new K("#757161"),LightBlue:new K("#597DCE"),Orange:new K("#D27D2C"),BlueGray:new K("#8595A1"),LightGreen:new K("#6DAA2C"),Peach:new K("#D2AA99"),Cyan:new K("#6DC2CA"),Yellow:new K("#DAD45E"),White:new K("#DEEED6")};var qt;(function(e){e.Custom="custom",e.ImageLayer="imagelayer",e.Layer="layer",e.ObjectGroup="objectgroup",e.Properties="properties",e.TileSet="tileset"})(qt||(qt={}));var di;(function(e){e[e.Diagonally=536870912]="Diagonally",e[e.Horizontally=2147483648]="Horizontally",e[e.Vertically=1073741824]="Vertically"})(di||(di={}));var Jt;(function(e){e.Rectangle="rectangle",e.Ellipse="ellipse",e.Polygon="polygon"})(Jt||(Jt={}));const ip=`
    margin: 0;
    overflow: hidden;
    touch-action: none; 
    user-select: none; 
    -webkit-user-select: none;
    -webkit-touch-callout: none;
`,rp=`
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%,-50%);
`,np=`data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3gUeDiMvgyAfEQAADFFJREFUeNrtHVdu6zAsCnw0+9Tx3fx+ngpG4R4eiQUUbaNokRSXKOrxUJZtKFT96/XaXq/X9nAUqR02rqWeaoYsb+ufW+Eiwels5alFPvcZVg+RCYHBEdA8zyQR9DbeemF9j3Vd334w3HFIXdf10f6XdV1VBENtIA+Rw37HTYjBvv9+QoTBn7Fxa+1vsP63ROWv12vDCGVd1wc2BsUJtm3bOmCXZWkY8DSchAD8oyNsWZa2LEvrc4Rf3bZtA8SxjchflqV12C3LQhJB+w88WN/X11prvR8PEcA+xs/H+fd5vHEACABsl2B/R8u4mHme35AId/Y8zx87nQIGRkQcgcB1jzDowOvwGYmgI22e50fnYlgfvTS4mxylI5QTw9z8IQwmzYAUNXdkjRwC7qxxsnC3YYvB6jtAO/AggHv7/rsjgyLkIwpEegc8nB+EQUeUhgi4z7SicJJYJ0T+siz9e391nQi2bYOi4a3diGSKRVH10v8jMDAAdsKh6iHRjHDo8+ufz/P8AWzIujVsnNrVDAfeqM3Ydzj1f+/bSmQPSj+AegKmOVPWgAQUrl5SkrRKFNV0XBtYj6RDfIzb24/6T3R9lIU1tsP+h3h80+28JhqkoFFR7BzgTGxYMAM/9BqwwVvE9LTI+wz9IKyERdpxJgr22zNmxL6O+hGq66MF4w7/P/v4+fuuFaiSHcsRBkUAGgdKFHhaEcKNI81hNHs5Nm1dm2bzUP2PRAC/99Q6OqS6zrooE0Vie7B9NbeizCRg/7vGwUzE0QyLWhGcCcg50syuzN4RVGi8u5TjANjfGi4ScVVTOxMqS3A8qZ6Dj8ZNbK3zeBI7F/iopxBPsTdqkhKL14oADZI54pCAyJ1VSOwb/raIAad1Qs5LEqGcLkASgHaCmImToaBp5ZxEAJyZitVrRYxmfV4dIAobyyY22d5WjTNqBWg5hGQne5WtK1oBkgjPwPVd7nJun0Tm7oqYgVc4/z8FgqwBJRolSGunS+7YiANMmsdZWLBLH5FkCzQbMQRCDZryVUc9kJp+Is4YDQFHOMheyE8ngBGwkoJosdOz2LO0A70EMCIeU0RHE9oK/Gj7MPIlIEnI1xCA18KwsOAs8UYRcFTEROIpy5GfNTglArgJanWAPRTJah0ggiDOv5GC/EolMKP/6Gnj0VZAFEHaeIG73OUuZza1MZ2K+p22y6NmjOYkTjuGN14gMr40N+1ZAIcEjZIYPS+wxjs8e2UDhUIANzDXHtb1/7l+sLo2FG58S1vt+rn6rJ2PxQxoOUBfJxYTIM7felgTUaI0fUscQNrhnvlZ4hyyCSBbSTNHH2URgCWszCsirGah5/MokXlEgHSCp+EALuRnANBal43gPQhA6xCLhr5X6QAhJVAbjhRRsiw7cG8lNlMJPNIK+PrTyrvc5S7G0jD2QJlKVD1m9nnbS22x70n1mvHH/qz9c2No+pfC4aP9sTDOVroi/3suhWTXR88qKtbHJdigorQ1/09aR4xl0VIfXD287u3hEtLY1PeqFSTt/DRwoTiSB3+T11SSWHL2JccIUWGAsoqUrPlHYKOBgXXuT85lq62LcAtJ3l2hWICuQVKEAF0cYJyUBwFce03/EovUKJqZO0OS4XD8bPhVcJ/o/O5yl+8sFdFJlwRCxBWa3f5MZqn2/2i8gsaNWxZ2vjfAoruxYj6aq+laJdaj+GoPcjQ3mE9HAFEKzkJg5Ljbe3PZ6uzxHOhg+RxSRYA1xUu23N2DAPZAsBYPlrsF2PfNRGCZvIdF7nVe793B2fOLyGdNLqNM/U+VKRTakR6XY9QOrbRjsbV41mg5ENO4wjMRz+UWvu3Au9TZ0nv3543Xs8hnz3ey+i8tmUmMjiCAMySXyJD/h+5kTS5bTUygx5GRcXHD4kjhUrFVcwDLGjQp5qzwNRPB2T1xGk9bpZWiNVE9pqSUU7HSMbebJzDL1Vo1/wwC8F5aqSaA6XGREjFZqq5zeeZ/tniHyQNAzE62xAOM35EQJPkBRrkuvaZhJQYpHsBDjNR8ov1b4fczjoDKgIg72OIuKX4KrwVylTcKz28HH7y2qJIopd5jL4d67fQMO7QyIMR7HX1PKyVCAJgZz42P+nq+OSDE2mdFQEimJzDDS4qmjK9G8JUDQqqvz2dyAG2bj4cjrWZcxI4/Y+w/vHXjWf8V7zO8EYDl5k3EjubGGuMOLH4I7gx/vFbFXQ7liMAiPjgishJK1DeAvcwaYi2/mGjgSk/Cl5ox3hMxrYzkrISonR0h7Oj8IjGHlf2r8wNE2RTHgjPGgP16xqieX8b4XP9Qs8eep6P6RwHmSUAgTYB7elajJ0jt+/PtXc5x/XsBmNG+QlHU4osksr2zdv3a/1lmXoWfZMqkwqvoM9o0NNU2eoWOZq2fsuTgFWxgKRVtZH1Hr9+S0+hNnGllXCQewNO+sh6bYyRJllQfTXKlqU9JSvXtNu6dKLHQhq62syP9Z9jR0fqvJgTLcWjWE/BeR0g00bPmSdbsp2utx9Fm/GpzAWMdWEKes+4NVHOmI67HRzhM2Az1sFjqgsXtR/C9bKrdPNkXc54aCrVkqqzUJb715SuJQMbXVrg0fpKZaNb+LbkBrsoBpF20pwjwcgDvGM1ih2Jn2uMhzBF2doafQHIYRefH2d+WZNSegzD2vsRtAOsR+PP+gGgOIK4P6eXPrJdBz+iAOsV6MhDvdcZk6RlRH0AVIva8nGotjdKwsTPts7JQjQyMBotw8llTXzk/qR+u/wn7kKNASgmBwYaWwwgsB76kxFRF4HpPC7UHN1zQqmZdWsWVC5hVBYR44uY7B6lM9RrREaIvlkXlveQn0XgCqfRxngQU/e/nnspOWF4x8fnS07ScowQzEbW732q+cfVe+GFp/Kxi0pRDJ+Ndvz3v5mXkMKpWADOSQXuyidzlRNbWYQiiZCyU69Jv7DxAk9c2qx6OOV6TjhSpf229ljCq5k+VJ5RL4+9lWRoVUjzKrdEdfAVvGnpNylD/DfN/SrteQj6F+CxWViWbtcDLuG00FmyHH0W8T2zXY7ZpFQeIItjStrX2aK2RwJHqjy6e+XPE9+cIer1em5bdU79HjqFFCpxsv9nj2Qmetr9QJPhO2K7HrkprOABGCNIEocsZ+760gN5emT7FXB8lMKm9hdt45i/BdxoROnKDag4QJZBqmWkhME977ZlLlcJ6uA5wa/snmn/UTo/2Xzm/o+z4s7d/Pu7y02X6tgXN8xyOTYB9ePwa4xwE065F2ofHH9lIge3ajuwfQyDUzCUEZzu29u7fxAGiysQ8z6UKi6b/TOXq50SANQwMU0Q0/XjH0fSvRerYh4UYPIQD/QAVm8TS/1frAF4Cs7aJxExWbBJr/7cVcJdcO1TT7xHFsr4KP0j0vD76fakcygGisvDbPXzV31/XVdYBJKrzunzPgvxxfRl+hEtZARiCLY4Ei/3aYUmdalXUc+nSNSd8GSHhZ+Y0k7RTJCBhx53RM/6KxWPzWNdVvT4vsKX+9wilZzmAZC5ISg913Il97jnPjtZL89Ouz2siRo+wqzfQZFlMB5YHKGdV+EZkYXmGv1oHsHqbPIC+tf1911fmCdRekMywEvaWhRmyWHqxFI5VBRdzil+rhutJcRKt39MZprk/iM1Pazoe9baQGKnF3a61JHCQvhNN8MC9XSiNr7k9LN2+1cAk++oX5tHk4GOZ6xNSpSd5Uhbb587F4fzYdGeKXefNAWB1yXI70JqIc5z72AcGHwpnY9tnhBqvUkYAeNa2ruvbT6ZoGTdfj862rM+Ll6cVkBlvCLpk1E5E4jEBIUyyZfwYZt//ljKwuBCQpQNwCPa8HczJOMv9eo0M1UQVezKlSmuDdzI9yaa1SS6vysXvUsX5rjRZgr1uxFr+Pr/ClfWMTKQene05sg8uL36GeRN5eFIi5IF9fmjO47XsMyqrlI4FNXxNihzN+swe1OqXtZy6Btcn+riDxxcBiccbMaVNSG2dH5eDgCKOvsmncUBIFdhJGpt4mPEjVHvA+rz6/Cltnvpc8hUsy9Kkw7B+sTbbR4LhwOlr6fP8+2zSsibNwJKTxTJxa1JIjX1frQN0IsFeLbU8O6c9U8goU1bn2kVWcgLsOBeOB5HDeciop2FhDIGFw1T5TqwFi5doVhGAUWTWYY+UT58gHNEKGBEJr4SdwIpJI3yMGEfReGoz0AkgaWf99JsIFHH08g+xCUH4e1s+1AAAAABJRU5ErkJggg==
`,st=()=>typeof performance<"u"&&performance.now()||0,ha=(e,t)=>e.renderOrder-t.renderOrder,sp=e=>new Promise(t=>setTimeout(t,e));class op{constructor(t){this.entity=t,this.then=st(),this.frameStart=st(),this.animFrame=0}animate(){const{animation:t}=this.entity;if(t){this.animFrame=this.animFrame||0,this.frameStart=st(),this.animation!==t&&(this.animation=t,this.animFrame=0);const i=t.strip?t.strip.duration:t.frames&&t.frames[this.animFrame][2]||0,r=t.strip?t.strip.frames:t.frames&&t.frames.length||0;this.frameStart-this.then>i&&(this.animFrame<=r&&t.loop?this.animFrame=Xl(this.animFrame+1,0,r):this.animFrame<r-1&&!t.loop&&(this.animFrame+=1),this.then=st())}}draw(){if(!this.entity.onScreen())return;const{animation:t,animFrame:i}=this,{angle:r,color:o,scene:n,shape:s,flipH:l,flipV:f}=this.entity,{game:h,camera:c}=n,g=k(c.scale),a=this.entity.image&&n.game.getImage(this.entity.image),u=this.entity.getRelativeBoundingRect();if(a)if(t){const{frames:d,strip:y,width:b,height:E}=t,v=d&&d[i]||[0,0],_=y?k(y.x+i*b,y.y):k(v[0],v[1]),x=t?.offset?k(...t.offset).scale(c.scale):k(0,0),A=new pt(u.pos.add(x),k(b,E));h.draw.draw2d(a,A,g,r,l,f,_)}else h.draw.draw2d(a,u,g,r,l,f);else o&&(s===Jt.Ellipse?h.draw.fillEllipse(u,o,r):h.draw.fillRect(u,o,r))}}class Re{constructor(t,i){if(this.scene=t,this.obj=i,this.id=Date.now(),this.bounded=!1,this.flipH=!1,this.flipV=!1,this.solid=!0,this.visible=!0,this.active=!0,this.dead=!1,this.collideTiles=!0,this.collideObjects=!0,this.onGround=!1,this.shape=Jt.Rectangle,this.pos=k(),this.lastPos=k(),this.size=k(),this.force=k(),this.mass=1,this.damping=1,this.elasticity=0,this.friction=.8,this.gravityScale=1,this.angleVelocity=0,this.angleDamping=1,this.angle=0,this.maxSpeed=1,this.spawnTime=0,this.renderOrder=0,this.properties={},this.sprite=new op(this),i)if(this.id=i.id,this.gid=i.gid,this.type=i.type,this.name=i.name,this.layerId=i.layerId,this.properties=i.properties,i.x&&i.y){const{tileSize:r}=t,o=ui(i.x,i.y,i.width,i.height);this.size=k(o.size.x/r.x,o.size.y/r.y),this.pos=k(o.pos.x/r.x+this.size.x/2,o.pos.y/r.y+this.size.y/2-(this.gid?this.size.y:0))}else this.size=i.size||this.size,this.pos=i.pos||this.pos;this.spawnTime=t.game.time,this.angle=i?.rotation?Jd(i.rotation):this.angle,this.visible=i?.visible!==void 0?i.visible:!0,this.force=i?.force||this.force,this.flipH=i?.flipH||this.flipH,this.flipV=i?.flipV||this.flipV,this.animation=i?.animation||this.animation,this.family=i?.family||this.family,this.shape=i?.shape||this.shape}destroy(){this.dead=!0}getAliveTime(){return this.scene.game.time-this.spawnTime}applyForce(t){this.mass&&(this.force=this.force.add(t.scale(1/this.mass)))}collideWithTile(t,i){return t>0}collideWithTileRaycast(t,i){return t>0}collideWithObject(t){return!0}onScreen(){return this.scene.getCameraVisibleArea().overlaps(this.pos,this.size)}draw(){if(this.visible&&this.onScreen()){if(this.gid){const t=this.scene.getTileObject(this.gid),i=this.size.multiply(this.scene.tileSize).divide(t.size).scale(this.scene.camera.scale);t.draw(this.scene.getScreenPos(this.pos,this.size),this.flipH,this.flipV,this.angle,i)}else this.sprite.draw();this.scene.game.debug&&this.displayDebug()}}setAnimation(t,i=!1,r=!1){this.flipH=i,this.flipV=r,this.animation=t}getAnimationFrame(){var t;return((t=this.sprite)===null||t===void 0?void 0:t.animFrame)||0}setAnimationFrame(t){this.sprite.animFrame=t}getTranslatedBoundingRect(){return new pt(this.scene.getScreenPos(this.pos,this.size),this.size.multiply(this.scene.tileSize).scale(this.scene.camera.scale))}getRelativeBoundingRect(){return this.getTranslatedBoundingRect().move(this.scene.camera.pos)}isOverlapping(t,i=k()){return Math.abs(this.pos.x-t.x)*2<this.size.x+i.x&&Math.abs(this.pos.y-t.y)*2<this.size.y+i.y}update(){const{scene:t}=this;if(this.sprite.animate(),this.ttl&&Math.min(this.getAliveTime()/this.ttl,1)===1&&this.destroy(),this.force.x=ke(this.force.x,-this.maxSpeed,this.maxSpeed),this.force.y=ke(this.force.y,-this.maxSpeed,this.maxSpeed),!this.mass)return;this.lastPos=this.pos.clone(),this.force.y+=t.gravity*this.gravityScale,this.pos.x+=this.force.x*=this.damping,this.pos.y+=this.force.y*=this.damping,this.angle+=this.angleVelocity*=this.angleDamping,this.bounded&&(this.pos.x<0&&(this.pos.x=0),this.pos.y<0&&(this.pos.y=0),this.pos.x>t.size.x&&(this.pos.x=t.size.x),this.pos.y>t.size.y&&(this.pos.y=t.size.y));const i=this.force.y>0;if(this.onGround){const r=this.onGround instanceof Re?this.onGround.force.x:0;this.force.x=r+(this.force.x-r)*this.friction,this.onGround=!1}if(this.collideObjects){const o=t.objects.filter(n=>n.visible&&n.collideObjects);for(const n of o){if(!this.solid&&!n.solid||n.dead||n==this||!n.isOverlapping(this.pos,this.size))continue;const s=this.collideWithObject(n),l=n.collideWithObject(this);if(!s||!l)continue;if(n.isOverlapping(this.lastPos,this.size)){const u=this.lastPos.subtract(n.pos),d=u.length(),y=.001,b=d<.01?jl(y):u.scale(y/d);this.force=this.force.add(b),n.mass&&(n.force=n.force.subtract(b));continue}const f=this.size.add(n.size),h=(this.lastPos.y-n.pos.y)*2>f.y+t.gravity,c=Math.abs(this.lastPos.y-n.pos.y)*2<f.y,g=Math.abs(this.lastPos.x-n.pos.x)*2<f.x,a=Math.max(this.elasticity,n.elasticity);if(h||g||!c){if(this.pos.y=n.pos.y+(f.y/2+.001)*Math.sign(this.lastPos.y-n.pos.y),n.onGround&&i||!n.mass)i&&(this.onGround=n),this.force.y*=-a;else if(n.mass){const u=(this.mass*this.force.y+n.mass*n.force.y)/(this.mass+n.mass),d=this.force.y*(this.mass-n.mass)/(this.mass+n.mass)+n.force.y*2*n.mass/(this.mass+n.mass),y=n.force.y*(n.mass-this.mass)/(this.mass+n.mass)+this.force.y*2*this.mass/(this.mass+n.mass);this.force.y=Et(a,u,d),n.force.y=Et(a,u,y)}}if(!h&&c)if(this.pos.x=n.pos.x+(f.x/2+.001)*Math.sign(this.lastPos.x-n.pos.x),n.mass){const u=(this.mass*this.force.x+n.mass*n.force.x)/(this.mass+n.mass),d=this.force.x*(this.mass-n.mass)/(this.mass+n.mass)+n.force.x*2*n.mass/(this.mass+n.mass),y=n.force.x*(n.mass-this.mass)/(this.mass+n.mass)+this.force.x*2*this.mass/(this.mass+n.mass);this.force.x=Et(a,u,d),n.force.x=Et(a,u,y)}else this.force.x*=-a}}if(this.collideTiles&&t.testTileCollision(this.pos,this.size,this)&&!t.testTileCollision(this.lastPos,this.size,this)){const r=t.testTileCollision(k(this.lastPos.x,this.pos.y),this.size,this),o=t.testTileCollision(k(this.pos.x,this.lastPos.y),this.size,this);if(r||!o){this.onGround=i,this.force.y*=-this.elasticity;const n=(this.lastPos.y-this.size.y/2|0)-(this.lastPos.y-this.size.y/2);n<0&&n>this.damping*this.force.y+t.gravity*this.gravityScale&&(this.force.y=this.damping?(n-t.gravity*this.gravityScale)/this.damping:0),this.pos.y=this.onGround?Math.floor(this.pos.y+this.size.y/2)-this.size.y/2:this.lastPos.y}o&&(this.pos.x=this.lastPos.x,this.force.x*=-this.elasticity)}}displayDebug(){const t=this.getRelativeBoundingRect(),{draw:i,primaryColor:r}=this.scene.game,{angle:o,id:n,type:s,visible:l,force:f,pos:h}=this,{Cyan:c,LightGreen:g,Red:a}=Ae,{pos:{x:u,y:d},size:y}=t,b=y.x/2,E=u+b,v="1em";i.outline(t,l?g:c,1),i.text(`${s||n||""}[${o.toFixed(2)}]`,k(E,d-14),r,v,"center","top",!0),i.text(`x:${h.x.toFixed(1)}`,k(E-b-2,d),r,v,"right","top",!0),i.text(`y:${h.y.toFixed(1)}`,k(E-b-2,d+14),r,v,"right","top",!0),Math.abs(f.x)>.012&&i.text(`x:${f.x.toFixed(3)}`,k(E+b+2,d),a,v,"left","top",!0),Math.abs(f.y)>.012&&i.text(`y:${f.y.toFixed(3)}`,k(E+b+2,d+14),a,v,"left","top",!0)}}class ap extends Re{constructor(t,i){super(t,i),this.scene=t,this.type="Platfuse.Particle",this.shape=Jt.Rectangle,this.colorStart=new K,this.colorEnd=new K,this.ttl=0,this.sizeStart=.1,this.sizeDelta=0,this.fadeRate=.1,this.stretchScale=0,this.pos=i?.pos||k()}draw(){const{time:t}=this.scene.game,i=Math.min((t-this.spawnTime)/this.ttl,1),r=this.sizeStart+i*this.sizeDelta,o=this.fadeRate/2;if(this.size=k(r),this.color=new K(this.colorStart.r+i*this.colorEnd.r,this.colorStart.g+i*this.colorEnd.g,this.colorStart.b+i*this.colorEnd.b,(this.colorStart.a+i*this.colorEnd.a)*(i<o?i/o:i>1-o?(1-i)/o:1)),this.stretchScale){const n=this.force.length();if(n){const s=this.force.scale(1/n),l=n*this.stretchScale;this.size.y=Math.max(this.size.x,l),this.angle=s.angle()}}i===1&&this.destroy(),super.draw()}displayDebug(){}}class lp extends Re{constructor(t,i){super(t,i),this.scene=t,this.obj=i,this.type="Platfuse.Emitter",this.shape=Jt.Rectangle,this.angle=0,this.emitTime=0,this.emitRate=100,this.emitConeAngle=Math.PI,this.colorStart=new K,this.colorEnd=new K,this.ttl=.5,this.sizeStart=.1,this.sizeEnd=1,this.speed=.1,this.damping=1,this.angleDamping=1,this.gravityScale=0,this.particleConeAngle=Math.PI,this.fadeRate=.1,this.randomness=.2,this.collideTiles=!1,this.collideObjects=!1,this.renderOrder=0,this.stretchScale=0,this.timeBuffer=0,this.pos=i?.pos||k(),this.angle=i?.angle||0,this.emitSize=i?.emitSize||0,this.emitTime=i?.emitTime||0,this.emitRate=i?.emitRate||this.emitRate,this.elasticity=i?.elasticity||this.elasticity,this.emitConeAngle=i?.emitConeAngle||this.emitConeAngle,this.colorStart=i?.colorStart||this.colorStart,this.colorEnd=i?.colorEnd||this.colorEnd,this.ttl=i?.ttl||this.ttl,this.sizeStart=i?.sizeStart||this.sizeStart,this.sizeEnd=i?.sizeEnd||this.sizeEnd,this.speed=i?.speed||this.speed,this.damping=i?.damping||this.damping,this.angleDamping=i?.angleDamping||this.angleDamping,this.gravityScale=i?.gravityScale||this.gravityScale,this.particleConeAngle=i?.particleConeAngle||this.particleConeAngle,this.fadeRate=i?.fadeRate||this.fadeRate,this.randomness=i?.randomness||this.randomness,this.collideTiles=!!i?.collideTiles,this.collideObjects=!!i?.collideObjects,this.stretchScale=i?.stretchScale||this.stretchScale,this.elasticity=i?.elasticity||this.elasticity,this.shape=i?.shape||this.shape}update(){const{delta:t}=this.scene.game;if(!this.emitTime||this.getAliveTime()<=this.emitTime){if(this.emitRate){const i=1/this.emitRate;for(this.timeBuffer+=t;this.timeBuffer>0;this.timeBuffer-=i)this.emitParticle()}}else this.destroy()}randomize(t){return t+t*yt(this.randomness,-this.randomness)}emitParticle(){const t=this.pos.add(this.emitSize instanceof oe?k(yt(-.5,.5),yt(-.5,.5)).multiply(this.emitSize).rotate(this.angle):ep(this.emitSize/2)),i=this.angle+yt(this.particleConeAngle,-this.particleConeAngle),r=new ap(this.scene,Object.assign(Object.assign({},this.obj),{angle:i,pos:t})),o=this.randomize(this.ttl),n=this.randomize(this.sizeStart),s=this.randomize(this.sizeEnd),l=this.randomize(this.speed),f=yt(this.emitConeAngle,-this.emitConeAngle),h=this.angle+f;r.shape=this.shape,r.colorStart=this.colorStart,r.colorEnd=this.colorEnd.subtract(this.colorStart),r.renderOrder=this.renderOrder,r.damping=this.damping,r.angleDamping=this.angleDamping,r.elasticity=this.elasticity,r.friction=this.friction,r.gravityScale=this.gravityScale,r.collideTiles=this.collideTiles,r.collideObjects=this.collideObjects,r.force=k().setAngle(h,l),r.ttl=o,r.sizeStart=n,r.sizeDelta=s-n,r.fadeRate=this.fadeRate,r.stretchScale=this.stretchScale,r.layerId=this.layerId,this.scene.objects.push(r)}draw(){}}function Ti(e,t,i,r){function o(n){return n instanceof i?n:new i(function(s){s(n)})}return new(i||(i=Promise))(function(n,s){function l(c){try{h(r.next(c))}catch(g){s(g)}}function f(c){try{h(r.throw(c))}catch(g){s(g)}}function h(c){c.done?n(c.value):o(c.value).then(l,f)}h((r=r.apply(e,[])).next())})}function Je(e,t,i,r){if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?r:i==="a"?r.call(e):r?r.value:t.get(e)}function up(e,t){return Ti(this,void 0,void 0,function*(){const i=Object.keys(e).length;let r=0;const o=n=>{const s=e[n];return new Promise(l=>{if(/\.(gif|jpe?g|png|webp|bmp)$/i.test(s)||/(data:image\/[^;]+;base64[^"]+)$/i.test(s)){const f=new Image;f.src=s,f.onload=()=>(t(++r/i),l(f))}else if(/\.(webm|mp3|wav)$/i.test(s)||/(data:audio\/[^;]+;base64[^"]+)$/i.test(s)){const f=new Pn.Howl({src:s});f.once("load",()=>(t(++r/i),l(f)))}else return Promise.resolve()})};return Promise.resolve(Object.assign({},...yield Promise.all(Object.keys(e).map(n=>Ti(this,void 0,void 0,function*(){return{[n]:yield o(n)}})))))})}class hp{constructor(t,i){this.game=t,this.glCanvas=document.createElement("canvas"),this.glUniforms={};const r=this.gl=this.glCanvas.getContext("webgl2"),o=new Float32Array([0,0,1,0,0,1,1,1]);this.glPostShader=this.createProgram(i.vertexShader,i.fragmentShader),this.glUniforms=i.uniforms||{},this.glGeometryBuffer=r.createBuffer(),this.glPostTexture=this.createTexture(),this.glCanvas.style.cssText=this.game.canvas.style.cssText,this.game.canvas.style.visibility="hidden",r.bindBuffer(r.ARRAY_BUFFER,this.glGeometryBuffer),r.bufferData(r.ARRAY_BUFFER,o,r.STATIC_DRAW),document.body.appendChild(this.glCanvas)}compileShader(t,i){const{gl:r}=this,o=r.createShader(i);return r.shaderSource(o,t),r.compileShader(o),o}createProgram(t,i){const{gl:r}=this,o=r.createProgram();return r.attachShader(o,this.compileShader(t,r.VERTEX_SHADER)),r.attachShader(o,this.compileShader(i,r.FRAGMENT_SHADER)),r.linkProgram(o),o}createTexture(t){const{gl:i}=this,r=i.createTexture(),o=this.game.pixelPerfect?i.NEAREST:i.LINEAR;return i.bindTexture(i.TEXTURE_2D,r),t&&i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,t),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,o),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,o),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),r}render(){const{game:t,gl:i,glCanvas:r,glPostShader:o,glGeometryBuffer:n,glPostTexture:s}=this,{canvas:l}=t,f=i.getAttribLocation(o,"p"),h=c=>i.getUniformLocation(o,c);i.viewport(0,0,r.width=l.width,r.height=l.height),i.useProgram(o),i.bindBuffer(i.ARRAY_BUFFER,n),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,1),i.disable(i.BLEND),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,s),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,l),i.enableVertexAttribArray(f),i.vertexAttribPointer(f,2,i.FLOAT,!1,8,0),Object.keys(this.glUniforms).forEach(c=>{const{value:g,type:a}=this.glUniforms[c],u=typeof g=="function"?g(t):g,d=h(c);d&&(typeof u=="number"?a==="i"?i.uniform1i(d,u):i.uniform1f(d,u):typeof u=="boolean"?i.uniform1i(d,u?1:0):u instanceof Array&&(u.length===2?i.uniform2f(d,u[0],u[1]):u.length===3?i.uniform3f(d,u[0],u[1],u[2]):u.length===4&&i.uniform4f(d,u[0],u[1],u[2],u[3])))}),i.drawArrays(i.TRIANGLE_STRIP,0,4)}}class fp{constructor(t){this.game=t,this.pixelFont=new Image,this.pixelText=()=>{},this.pixelFont.src=np,this.pixelFont.onload=()=>this.pixelText=this.createPixelFontRenderer(this.pixelFont,8)}fillRect(t,i,r=0){const{ctx:o}=this.game,{pos:n,size:s}=t;o.save(),this.rotate(t,r),o.fillStyle=i.toString(),o.fillRect(n.x,n.y,s.x,s.y),o.restore()}fillEllipse(t,i,r=0){const{ctx:o}=this.game,{pos:n,size:s}=t;o.save(),this.rotate(t,r),o.beginPath(),o.ellipse(n.x+s.x/2,n.y+s.y/2,s.x/2,s.y/2,r,0,Math.PI*2),o.fillStyle=i.toString(),o.fill(),o.restore()}stroke(t,i,r,o=1){const{ctx:n}=this.game;n.lineWidth=o,n.lineJoin="miter",n.beginPath(),n.moveTo(r[0].x+t,r[0].y+i),r.map(s=>n.lineTo(t+s.x,i+s.y)),n.lineTo(r[0].x+t,r[0].y+i),n.stroke()}outline(t,i,r=1,o=0){const{ctx:n}=this.game,{pos:s,size:l}=t;n.save(),this.rotate(t,o),n.strokeStyle=i.toString(),n.lineWidth=r,n.beginPath(),n.rect(s.x,s.y,l.x,l.y),n.stroke(),n.restore()}text(t,i,r,o="1em",n="left",s="top",l=!1){const{ctx:f}=this.game;f.font=`${o} monospace`,f.textBaseline=s,f.textAlign=n,l&&(f.strokeStyle=Ae.Black.setAlpha(.9).toString(),f.lineJoin="round",f.lineWidth=4,f.strokeText(t,i.x,i.y)),f.fillStyle=(r||Ae.White).toString(),f.fillText(t,i.x,i.y)}draw2d(t,i,r=k(1),o=0,n=!1,s=!1,l,f){const h=f||this.game.ctx,{pos:c,size:g}=i,a=n||s,u=k(n?-1:1,s?-1:1),d=k(n?-g.x*r.x:0,s?-g.y*r.y:0),y=c.subtract(d).multiply(u);h.save(),this.rotate(i,o,l?r:k(1)),a&&h.scale(u.x,u.y),h.translate(.5,.5),l?h.drawImage(t,l.x,l.y,g.x,g.y,y.x-.5,y.y-.5,g.x*r.x,g.y*r.y):h.drawImage(t,c.x-.5,c.y-.5,g.x,g.y),h.translate(-.5,-.5),h.restore()}rotate(t,i=0,r=k(1)){const{pos:o,size:n}=t,s=this.game.ctx;s.translate(o.x+n.x*r.x/2,o.y+n.y*r.y/2),s.rotate(i),s.translate(-(o.x+n.x*r.x/2),-(o.y+n.y*r.y/2))}setBlending(t,i=this.game.ctx){i.globalCompositeOperation=t?"lighter":"source-over"}copyToMainContext(t,i,r){const{ctx:o}=this.game;o.drawImage(t,i.x,i.y,r.x,r.y)}createPixelFontRenderer(t,i,r="white"){const{ctx:o}=this.game,n=t.width/i|0,s=document.createElement("canvas"),l=s.getContext("2d");return s.width=t.width,s.height=t.height,l.drawImage(t,0,0),l.fillStyle=r,l.globalCompositeOperation="source-in",l.fillRect(0,0,t.width,t.height),(f,h,c=1,g="left",a="top")=>{let{x:u,y:d}=h.clone();g==="center"&&(u-=f.length*i*c/2),g==="right"&&(u-=f.length*i*c),a==="middle"&&(d-=i*c/2),a==="bottom"&&(d-=i*c),f.split(`
`).reverse().forEach((y,b)=>{for(let E=0;E<y.length;E++){const v=y.charCodeAt(E);o.drawImage(s,v%n*i,Math.ceil((v+1)/n-1)*i,i,i,Math.floor(u+E*i*c),Math.floor(d-b*(i+1)),i*c,i*c)}})}}preloader(t){const{ctx:i,canvas:r,backgroundColor:o,secondaryColor:n}=this.game,{width:s,height:l}=r,f=k(l/4).floor(),h=k(s/2-f.x/2,l/2-f.y/2).floor(),c=f.x/8,g=i.createRadialGradient(s/2,l/2,f.y,s/2,l/2,l);i.save(),g.addColorStop(0,o.brightness(15).toString()),g.addColorStop(.7,o.toString()),i.fillStyle=g,i.fillRect(0,0,s,l),i.shadowColor="rgba(0, 0, 0, 0.3)",i.shadowBlur=6,i.shadowOffsetX=3,i.shadowOffsetY=3,this.fillRect(ui(h.x,h.y,f.x,f.y),Ae.LightBlue),this.fillRect(ui(h.x+c*.8,h.y+c*.8,f.x-c*1.6,f.y-c*1.6),Ae.DarkBlue),i.fillStyle=Ae.White.toString(),this.stroke(h.x+c*2,h.y+c*7,[k(0,c*.2),k(0,-c*5),k(c*4,-c*5),k(c*4,-c),k(c*1.25,-c),k(c*1.25,c*.2)],0),i.fill(),this.fillRect(ui(-c*1.5/2+h.x+f.x/2,-c*1.5/2+h.y+f.y/2,c*1.5,c*1.5),Ae.LightBlue),this.text(t<1?"Loading assets...":"Ready!",k(s/2,l-l*.05),Ae.White,"1em","center","bottom"),this.fillRect(ui(0,l-l*.015,s*t,l*.015),n),i.restore()}}var tt,Rn,Nn,Hl,Vl,Mn,Gl,fa;const cp=window.ontouchstart!==void 0;class dp{constructor(t){tt.add(this),this.game=t,this.mouseWheel=0,this.mouseScreenPos=k(),this.keyboardData={},this.pointerData={},Rn.set(this,i=>{i.repeat||(this.keyboardData[i.code]=3)}),Nn.set(this,i=>{this.keyboardData[i.code]=4}),document.addEventListener("keydown",i=>Je(this,Rn,"f").call(this,i),!1),document.addEventListener("keyup",i=>Je(this,Nn,"f").call(this,i),!1),document.addEventListener("mousedown",i=>Je(this,tt,"m",Hl).call(this,i)),document.addEventListener("mousemove",i=>Je(this,tt,"m",Mn).call(this,i)),document.addEventListener("mouseup",i=>Je(this,tt,"m",Vl).call(this,i)),document.addEventListener("wheel",i=>Je(this,tt,"m",Gl).call(this,i))}keyIsDown(t){return this.keyboardData[t]&1}keyWasPressed(t){return this.keyboardData[t]&2?1:0}keyWasReleased(t){return this.keyboardData[t]&4?1:0}mouseIsDown(t){return this.pointerData[t]&1}mouseWasPressed(t){return this.pointerData[t]&2?1:0}mouseWasReleased(t){return this.pointerData[t]&4?1:0}clearInput(){this.keyboardData={},this.pointerData={}}update(){cp||document.hasFocus()||this.clearInput()}postUpdate(){for(const t in this.keyboardData)this.keyboardData[t]&=1;for(const t in this.pointerData)this.pointerData[t]&=1;this.mouseWheel=0}}Rn=new WeakMap,Nn=new WeakMap,tt=new WeakSet,Hl=function(t){this.pointerData[t.button]=3,Je(this,tt,"m",Mn).call(this,t),t.button&&t.preventDefault()},Vl=function(t){this.pointerData[t.button]=this.pointerData[t.button]&2|4},Mn=function(t){this.mouseScreenPos=Je(this,tt,"m",fa).call(this,k(t.x,t.y))},Gl=function(t){t.ctrlKey||(this.mouseWheel=Math.sign(t.deltaY))},fa=function(t){const{canvas:i}=this.game,r=i.getBoundingClientRect();return k(i.width,i.height).multiply(k(Ln(t.x,r.left,r.right),Ln(t.y,r.top,r.bottom)))};class pp{constructor(t,i){this.game=t,this.time=i===void 0?void 0:t.time+i,this.ts=i}set(t=0){this.time=this.game.time+t,this.ts=t}unset(){this.time=void 0}isSet(){return this.time!==void 0}isActive(){return this.time!==void 0&&this.game.time<=this.time}isDone(){return this.time!==void 0&&this.game.time>this.time}getTime(){return this.time!==void 0?this.game.time-this.time:0}getPercent(){return this.time!==void 0&&this.ts!==void 0?Ln(this.time-this.game.time,this.ts,0):0}}class Vt{constructor(t,i){this.scene=t,this.id=Date.now(),this.type=qt.Custom,this.size=k(),this.renderOrder=0,this.visible=!0,this.properties={},i?(this.id=i.id,this.name=i.name,this.type=i.type,this.size=k(i.width,i.height),this.visible=i.visible===void 0?!0:!!i.visible,this.properties=i?.properties||{},i.type===qt.Layer&&(this.data=i?.data,this.renderTilesToLayerCanvas())):this.type=qt.Custom}renderTilesToLayerCanvas(){this.data&&(this.layerCanvas=document.createElement("canvas"),this.layerCanvas.width=this.size.x*this.scene.tileSize.x,this.layerCanvas.height=this.size.y*this.scene.tileSize.y,this.layerContext=this.layerCanvas.getContext("2d"),this.data.forEach((t,i)=>t&&this.drawTileAt(t,i)))}update(){}postUpdate(){}drawTileAt(t,i){if(t){const{game:r,tileSize:o}=this.scene,n=this.scene.getTileObject(t),{image:s,tilewidth:l,tileheight:f}=n.tileset,{H:h,V:c}=tr(t)||{H:!1,V:!1},g=n.getSpriteClip(),a=new pt(k(i%this.size.x,Math.floor(i/this.size.x)).multiply(o),k(l,f));n.animated||r.draw.draw2d(r.getImage(s.source),a,k(1),0,h,c,g,this.layerContext)}}getTile(t){return t.inRange(this.size)&&this.data&&this.data[t.x+this.size.x*t.y]||null}setTile(t,i){if(this.data&&t.inRange(this.size)){const r=t.x+this.size.x*t.y;this.data[r]=i,this.drawTileAt(i,r)}}clearTile(t){var i;this.data&&t.inRange(this.size)&&(this.data[t.x+this.size.x*t.y]=null,(i=this.layerContext)===null||i===void 0||i.clearRect(t.x*this.scene.tileSize.x,t.y*this.scene.tileSize.y,this.scene.tileSize.x,this.scene.tileSize.y))}toggleVisibility(t=!this.visible){this.visible=t}forEachVisibleTile(t){const{pos:i,size:r}=this.scene.getCameraVisibleGrid();for(let o=i.y;o<i.y+r.y;o++)for(let n=i.x;n<i.x+r.x;n++){const s=this.getTile(k(n,o));if(s){const l=this.scene.getTileObject(s),f=this.scene.getScreenPos(k(n,o)),h=tr(s),{H:c,V:g}=h||{H:!1,V:!1};t(l,f,c,g)}}}forEachVisibleObject(t){const i=this.scene.objects.filter(({layerId:r})=>r===this.id);i.sort((r,o)=>r.renderOrder-o.renderOrder);for(const r of i)r.visible&&t(r)}draw(){const{camera:t}=this.scene,{draw:i}=this.scene.game;if(this.visible)switch(this.type){case qt.Layer:if(this.layerCanvas){const r=new pt(k(),this.scene.game.getResolution().divide(t.scale)),o=t.pos.divide(t.scale).scale(-1);i.draw2d(this.layerCanvas,r,k(t.scale),0,!1,!1,o)}this.forEachVisibleTile((r,o,n,s)=>{r.animated&&r.draw(o,n,s)});break;default:this.forEachVisibleObject(r=>r.draw());break}}}class _p{constructor(t,i,r){this.scene=t,this.id=i,this.tileset=r,this.size=k(),this.animated=!1,this.animFrame=0,this.then=st(),this.frameStart=st(),this.properties=this.getTileProperties(i,this.tileset),this.type=this.properties&&this.properties.type||null,this.size=k(this.tileset.tilewidth,this.tileset.tileheight),this.animated=this.properties&&this.properties.animation}getTileProperties(t,i){const{firstgid:r,tiles:o}=i;return o.length&&o.filter(n=>n.id===t-r)[0]||{}}getNextGid(){if(this.animated){this.frameStart=st();const{frames:t}=this.properties.animation;return this.frameStart-this.then>t[this.animFrame].duration&&(this.animFrame<=t.length&&(this.animFrame=Xl(this.animFrame+1,0,t.length)),this.then=st()),t[this.animFrame].tileid+this.tileset.firstgid}else return this.id}getSpriteClip(){const{columns:t,firstgid:i,tilewidth:r,tileheight:o}=this.tileset,n=this.getNextGid();return k((n-i)%t*r,(Math.ceil((n-i+1)/t)-1)*o)}draw(t,i=!1,r=!1,o=0,n=k(this.scene.camera.scale)){const{image:s,tilewidth:l,tileheight:f}=this.tileset,{game:h,camera:c}=this.scene,g=h.getImage(s.source),a=this.getSpriteClip();h.draw.draw2d(g,new pt(t.add(c.pos),k(l,f)),n,o,i,r,a)}}class Wl{constructor(t,i){this.game=t,this.name=i,this.camera=new tp(this),this.size=this.game.getResolution(),this.tileSize=k(1),this.tiles={},this.tileCollisionData=[],this.objects=[],this.layers=[],this.data={},this.gravity=0,this.nextRenderOrder=0}destroy(){this.data={},this.tiles={},this.layers=[],this.objects=[],this.tileCollisionData=[],this.nextRenderOrder=0,this.camera.pos=k()}preInit(){return Ti(this,void 0,void 0,function*(){this.tmxMap&&typeof this.tmxMap=="string"&&(this.tmxMap=yield Qd(this.tmxMap))})}createFromTmxMap(){if(typeof this.tmxMap=="object"){const{layers:t,tilesets:i,tilewidth:r,tileheight:o,width:n,height:s}=this.tmxMap;this.setDimensions(k(n,s),k(r,o)),this.createTilesets(i),this.createLayers(t)}}init(){}update(){}updateCamera(){this.camera.update()}updateLayers(){for(const t of this.layers)t instanceof Vt&&t.update()}updateObjects(){for(const t of this.objects)t.active&&(t.update(),t.dead&&this.removeObject(t))}postUpdate(){}postUpdateLayers(){for(const t of this.layers)t instanceof Vt&&t.postUpdate()}draw(){const{ctx:t,width:i,height:r,pixelPerfect:o}=this.game,n=this.layers.filter(l=>l instanceof Vt&&l.visible),s=this.objects.filter(l=>l.visible&&!l.layerId);n.sort(ha),s.sort(ha),t.imageSmoothingEnabled=!o,t.clearRect(0,0,i,r);for(const l of n)l.draw();for(const l of s)l.draw();this.game.debug&&this.displayDebug()}setDimensions(t,i){this.size=t,this.tileSize=i}setScale(t){this.camera.setScale(t)}setTileCollisionLayer(t,i=[]){var r;const o=this.layers[t];o&&(this.tileCollisionData=((r=o?.data)===null||r===void 0?void 0:r.map(n=>n&&!i.includes(n)?n:0))||[])}testTileCollision(t,i,r){const o=Math.max(t.x-i.x/2|0,0),n=Math.max(t.y-i.y/2|0,0),s=Math.min(t.x+i.x/2,this.size.x),l=Math.min(t.y+i.y/2,this.size.y);for(let f=n;f<l;++f)for(let h=o;h<s;++h){const c=this.tileCollisionData[h+this.size.x*f];if(c&&(!r||r.collideWithTile(c,k(h,f))))return!0}return!1}raycastTileCollision(t,i,r){const o=t.floor(),n=i.subtract(t),s=n.length(),l=n.normalize(),f=k(Math.abs(1/l.x),Math.abs(1/l.y));let h=f.x*(n.x<0?t.x-o.x:o.x-t.x+1),c=f.y*(n.y<0?t.y-o.y:o.y-t.y+1);for(;;){const g=this.getTileCollisionData(o);if(g&&(!r||r.collideWithTileRaycast(g,o)))return o.add(k(.5));if(h>s&&c>s)break;h>c?(o.y+=Math.sign(n.y),c+=f.y):(o.x+=Math.sign(n.x),h+=f.x)}}createLayers(t){this.layers=[],t.forEach(i=>this.addLayer(i))}addLayer(t,i){const r=typeof t=="function"?new t(this):new Vt(this,t);return typeof t!="function"&&t.objects&&t.objects.forEach(o=>this.addObjectFromLayer(o.type,Object.assign(Object.assign({},o),{layerId:t.id}))),r.renderOrder=i||this.nextRenderOrder++,this.layers.push(r),r}addObjectFromLayer(t,i){const r=this.game.objectClasses[t],o=r?new r(this,i):new Re(this,i);return this.objects.push(o),o}addObject(t,i){if(i){const r=this.getLayerById(i);r instanceof Vt?t.layerId=r.id:console.warn(`Layer with ID:${i} not found or is not an object layer!`)}return this.objects.push(t),t}removeObject(t){this.objects.splice(this.objects.indexOf(t),1)}addTileset(t,i){const r=Object.assign(Object.assign({},t),{image:Object.assign(Object.assign({},t.image),{source:i})});for(let o=0;o<r.tilecount;o++)this.tiles[o+r.firstgid]=new _p(this,o+r.firstgid,r);return r}createTilesets(t){t.map(i=>{const r=i.image.source.replace(/^.*[\\\/]/,"");Object.keys(this.game.images).includes(r)&&this.addTileset(i,r)})}setTileCollisionData(t,i=0){t.inRange(this.size)&&(this.tileCollisionData[(t.y|0)*this.size.x+t.x|0]=i)}getTileCollisionData(t){return t.inRange(this.size)?this.tileCollisionData[(t.y|0)*this.size.x+t.x|0]:0}getCameraVisibleGrid(){return new pt(this.camera.pos.divide(this.tileSize).invert().divide(this.camera.scale).floor(),this.game.getResolution().divide(this.tileSize).divide(this.camera.scale).add(k(1)))}getCameraVisibleArea(){const t=this.game.getResolution();return new pt(this.camera.pos.invert().add(t.divide(2)).divide(this.camera.scale),t.divide(this.camera.scale)).divide(this.tileSize)}getGridPos(t){return k(Math.ceil(t.x/this.tileSize.x),Math.ceil(t.y/this.tileSize.y))}getScreenPos(t,i){return t.multiply(this.tileSize).subtract(i?i.multiply(this.tileSize).divide(2):k()).scale(this.camera.scale)}getPointerPos(){const{pos:t,scale:i}=this.camera,{mouseScreenPos:r}=this.game.input;return r.subtract(t).divide(i)}getPointerRelativeGridPos(){return this.getPointerPos().divide(this.tileSize)}getLayerById(t){return this.layers.find(i=>i.id===t)||{}}getLayerByIndex(t){return this.layers[t]||{}}getObjectById(t){return this.objects.find(i=>i.id===t)}getObjectByType(t){return this.objects.find(i=>i.type===t)}getObjectsByType(t){return this.objects.filter(i=>i.type===t)}getObjectLayers(){return this.layers.filter(t=>{var i;return(i=t.objects)===null||i===void 0?void 0:i.length})}getTile(t,i){return this.getTileObject(this.getLayerById(i).getTile(t)||0)}getTileObject(t){const i=t&=~(di.Horizontally|di.Vertically|di.Diagonally);return this.tiles[i]}removeLayer(t){this.layers.splice(t,1)}setData(t,i){this.data=Object.assign(Object.assign({},this.data),{[t]:i})}getData(t){return this.data[t]}displayDebug(){const{avgFPS:t,canvas:i,draw:r,primaryColor:o}=this.game,{pos:n,scale:s}=this.camera,{width:l,height:f}=i,h=this.getCameraVisibleGrid(),c=this.getPointerPos(),g=(a,u="left")=>{const d=u==="left"&&4||u==="right"&&l-4||l/2;r.text(a,k(d,f-4),o,"1em",u,"bottom",!0)};g(`[${h.pos.x},${h.pos.y}][${n.x.toFixed(2)},${n.y.toFixed(2)}][x${s.toFixed(1)}]`),g(`[${c.x.toFixed(2)},${c.y.toFixed(2)}]`,"center"),g(`[${this.objects.length}][${t.toFixed(1)} FPS]`,"right")}}class gp{constructor(t,i){this.config=t,this.preload=i,this.draw=new fp(this),this.pixelPerfect=!0,this.input=new dp(this),this.backgroundColor=Ae.DarkBlue,this.primaryColor=Ae.White,this.secondaryColor=Ae.LightBlue,this.images={},this.sounds={},this.objectClasses={},this.sceneClasses={},this.currentScene=null,this.scenes={},this.settings={},this.width=window.innerWidth,this.height=window.innerHeight,this.debug=!1,this.paused=!1,this.frameRate=60,this.delta=1/60,this.avgFPS=0,this.frame=0,this.time=0,this.timeReal=0,this.frameTimeLast=0,this.frameTimeBuffer=0,this.preloadPercent=0,this.audioVolume=1,this.canvas=document.createElement("canvas"),this.objectClasses=t?.entities||{},this.sceneClasses=t?.scenes||{},this.debug=!!t.debug,this.pixelPerfect=t?.pixelPerfect!==void 0?t.pixelPerfect:this.pixelPerfect,this.backgroundColor=t?.backgroundColor?new K(t.backgroundColor):this.backgroundColor,this.primaryColor=t?.primaryColor?new K(t.primaryColor):this.primaryColor,this.secondaryColor=t?.secondaryColor?new K(t.secondaryColor):this.secondaryColor,this.canvas.setAttribute("style",`${rp} ${this.pixelPerfect?"image-rendering: pixelated;":""}`),this.canvas.style.backgroundColor=this.backgroundColor.toString(),this.ctx=this.canvas.getContext("2d"),document.body.style.cssText=`${ip} background: ${this.backgroundColor.toString()};`,document.body.appendChild(this.canvas),window.addEventListener("resize",this.onResize.bind(this)),this.onResize(),t?.postProcessShader&&(this.postProcess=new hp(this,t.postProcessShader)),t.global&&(window.Platfuse=this)}start(t){return Ti(this,void 0,void 0,function*(){this.update();const i=yield up(this.preload,r=>this.preloadPercent=r);Object.keys(i).forEach(r=>{i[r]instanceof HTMLImageElement?this.images[r]=i[r]:i[r]instanceof Pn.Howl&&(this.sounds[r]=i[r])}),yield Promise.all(Object.keys(this.sceneClasses).map(r=>Ti(this,void 0,void 0,function*(){const o=this.sceneClasses[r],n=new o(this,r);yield n.preInit(),this.scenes[r]=n}))),yield sp(1e3),t&&this.playScene(t)})}playScene(t,i=!1){if(this.currentScene&&this.currentScene.name===t&&!i)return;if(!this.scenes[t])throw new Error(`Scene '${t}' not found!`);this.currentScene&&this.currentScene.destroy();const r=this.scenes[t];r.tmxMap&&r.createFromTmxMap(),r.init(),this.currentScene=r}restartScene(){this.currentScene&&this.playScene(this.currentScene.name,!0)}onResize(){var t;if(this.width=window.innerWidth,this.height=window.innerHeight,((t=this.config)===null||t===void 0?void 0:t.fixedSize)instanceof oe){const{fixedSize:i}=this.config,r=innerWidth/innerHeight,o=i.x/i.y;this.canvas.width=i.x,this.canvas.height=i.y,this.canvas.style.width=r<o?"100%":"",this.canvas.style.height=r<o?"":"100%"}else this.canvas.width=this.width,this.canvas.height=this.height;this.width=this.canvas.width,this.height=this.canvas.height}update(t=0){var i;const r=this.currentScene,o=t-this.frameTimeLast;if(this.frameTimeLast=t,this.avgFPS=Et(.05,this.avgFPS,1e3/(o||1)),this.timeReal+=o/1e3,this.frameTimeBuffer+=(this.paused?0:1)*o,r instanceof Wl){if(this.paused)r.postUpdate(),this.input.postUpdate();else{let n=0;for(this.frameTimeBuffer<0&&this.frameTimeBuffer>-9&&(n=this.frameTimeBuffer,this.frameTimeBuffer=0);this.frameTimeBuffer>=0;this.frameTimeBuffer-=1e3/this.frameRate)this.time=this.frame++/this.frameRate,this.delta=1/this.avgFPS,this.input.update(),r.updateLayers(),r.updateObjects(),r.update(),r.updateCamera(),r.postUpdate(),r.postUpdateLayers(),this.input.postUpdate();this.frameTimeBuffer+=n}r.draw()}else this.time=this.frame++/this.frameRate,this.draw.preloader(this.preloadPercent);(i=this===null||this===void 0?void 0:this.postProcess)===null||i===void 0||i.render(),this.animationFrame=requestAnimationFrame(n=>this.update(n))}togglePause(t=!this.paused){this.paused=t}getResolution(){return new oe(this.width,this.height)}setSettings(t){this.settings=t}setSetting(t,i){this.settings=Object.assign(Object.assign({},this.settings),{[t]:i})}getSetting(t){return this.settings[t]}timer(t){return new pp(this,t)}getImage(t){if(this.images[t])return this.images[t];throw new Error(`'${t}' is not a valid image!`)}playSound(t){this.sounds[t]&&(this.sounds[t].volume(this.audioVolume),this.sounds[t].play())}setAudioVolume(t){this.audioVolume=t}toggleFullscreen(){document.fullscreenElement?document.exitFullscreen&&document.exitFullscreen():document.body.requestFullscreen&&document.body.requestFullscreen()}}var ql=(e=>(e[e.BACKGROUND=1]="BACKGROUND",e[e.MAIN=2]="MAIN",e[e.OBJECTS=5]="OBJECTS",e[e.SHADOWS=4]="SHADOWS",e[e.DARKNESS=8]="DARKNESS",e[e.CUSTOM_OVERLAY=9]="CUSTOM_OVERLAY",e))(ql||{}),ys=(e=>(e.UP="up",e.RIGHT="right",e.DOWN="down",e.LEFT="left",e))(ys||{}),we=(e=>(e.BOX="box",e.COIN="coin",e.DUST="dust",e.PARTICLE="particle",e.PLAYER="player",e.SLIME="slime",e.SPIKES="spikes",e.WATER="water",e))(we||{}),pi=(e=>(e[e.LADDER=30]="LADDER",e))(pi||{});const mp={angle:Math.PI,emitSize:1,emitTime:1,emitRate:25,colorStart:new K(255,128,0,1),colorEnd:new K(255,0,0,0),ttl:2.2,sizeStart:.15,sizeEnd:.2,speed:.1,angleSpeed:.1,damping:1,angleDamping:.95,gravityScale:.5,fadeRate:.1,randomness:.5,collideTiles:!0,collideObjects:!0,renderOrder:1,elasticity:.5,stretchScale:.5},yp={uniforms:{iChannel0:{type:"i",value:0},iTime:{value:e=>e.time},iResolution:{value:e=>[e.width,e.height,1]}},vertexShader:`#version 300 es
            precision highp float;
            in vec2 p;
            void main(){
                gl_Position=vec4(p+p-1.,1,1);
            }`,fragmentShader:`#version 300 es
            precision highp float;
            uniform sampler2D iChannel0;
            uniform vec3 iResolution;
            uniform float iTime;
            out vec4 c;

            float hash(vec2 p){
                p=fract(p*.3197);
                return fract(1.+sin(51.*p.x+73.*p.y)*13753.3);
            }

            float noise(vec2 p){
                vec2 i=floor(p),f=fract(p),u=f*f*(3.-2.*f);
                return mix(mix(hash(i),hash(i+vec2(1,0)),u.x),mix(hash(i+vec2(0,1)),hash(i+1.),u.x),u.y);
            }

            void mainImage(out vec4 c, vec2 p){
                // put uv in texture pixel space
                p /= iResolution.xy;

                // apply fuzz as horizontal offset
                const float fuzz = .0005;
                const float fuzzScale = 800.;
                const float fuzzSpeed = 9.;
                p.x += fuzz*(noise(vec2(p.y*fuzzScale, iTime*fuzzSpeed))*2.-1.);

                // init output color
                c = texture(iChannel0, p);

                // chromatic aberration
                const float chromatic = .002;
                c.r = texture(iChannel0, p - vec2(chromatic,0)).r;
                c.b = texture(iChannel0, p + vec2(chromatic,0)).b;

                // tv static noise
                const float staticNoise = .1;
                c += staticNoise * hash(p + mod(iTime, 1e3));

                // scan lines
                const float scanlineScale = 1e3;
                const float scanlineAlpha = .1;
                c *= 1. + scanlineAlpha*sin(p.y*scanlineScale);

                // black vignette around edges
                const float vignette = 2.;
                const float vignettePow = 6.;
                float dx = 2.*p.x-1., dy = 2.*p.y-1.;
                c *= 1.-pow((dx*dx + dy*dy)/vignette, vignettePow);
            }

            void main(){
                mainImage(c,gl_FragCoord.xy);
                c.a=1.;
            }`};class vp extends Re{elasticity=.3;friction=.9;angleDamping=.96;color=new K("#ff0000");collideWithObject(t){switch(t.type){case we.COIN:return!1}return!0}collideWithTile(t){return t===pi.LADDER?!1:t>0}}class wp extends Re{mass=0}const bp={DUST:{strip:{x:0,y:0,frames:9,duration:60},width:16,height:16,loop:!1}};class xp extends Re{image="dust.png";type=we.DUST;animation=bp.DUST;size=k(1);collideObjects=!1;collideTiles=!1;solid=!1;mass=0;ttl=.5}const Ce={IDLE:{strip:{x:0,y:32*5,frames:4,duration:200},width:32,height:32,offset:[-9,-6],loop:!0},WALK:{strip:{x:0,y:32,frames:6,duration:80},width:32,height:32,offset:[-9,-6],loop:!0},RUN:{strip:{x:0,y:64,frames:6,duration:80},width:32,height:32,offset:[-9,-6],loop:!0},JUMP:{strip:{x:32*7,y:32,frames:8,duration:100},width:32,height:32,offset:[-9,-6],loop:!1},FALL:{strip:{x:320,y:32,frames:1,duration:0},width:32,height:32,offset:[-9,-6],loop:!1},PUSH:{strip:{x:0,y:32*6,frames:6,duration:200},width:32,height:32,offset:[-9,-6],loop:!0},ON_LADDER:{strip:{x:0,y:128,frames:1,duration:0},width:32,height:32,offset:[-10.5,-6],loop:!1},CLIMB:{strip:{x:0,y:128,frames:4,duration:80},width:32,height:32,offset:[-10.5,-6],loop:!0},HURT:{strip:{x:32*7,y:96,frames:4,duration:80},width:32,height:32,offset:[-9,-6],loop:!0},DEAD:{strip:{x:32*7,y:128,frames:9,duration:80},width:32,height:32,offset:[-9,-6],loop:!1}},{LEFT:vn,RIGHT:wn}=ys;class Ep extends Re{image="monster2.png";animation=Ce.IDLE;facing=wn;energy=[100,100];renderOrder=10;damping=.88;friction=.9;maxSpeed=.5;startPos=k();moveInput=k();pushing=!1;holdingJump=!1;wasHoldingJump=!1;onLadder=!1;climbingLadder=!1;climbingWall=!1;invincible=!1;isDying=!1;isHurting=!1;deadTimer;groundTimer;hurtTimer;jumpPressedTimer;jumpTimer;constructor(t,i){super(t,i),this.deadTimer=t.game.timer(),this.groundTimer=t.game.timer(),this.hurtTimer=t.game.timer(),this.jumpPressedTimer=t.game.timer(),this.jumpTimer=t.game.timer(),this.startPos=this.pos.clone(),t.camera.follow(this),t.camera.setSpeed(.1)}setImage(t){this.image=t}collideWithObject(t){const{camera:i}=this.scene;switch(t.type){case we.COIN:return t.destroy(),this.scene.game.playSound("powerup.mp3"),!1;case we.BOX:return this.pushing=Math.abs(this.moveInput.x)>0&&this.pos.y+.5>=t.pos.y,!0;case we.SPIKES:return this.isDying||(this.isDying=!0,this.deadTimer.set(1),i.shake(.5,k(.003))),!0;case we.SLIME:return this.isHurting||(this.isHurting=!0,this.hurtTimer.set(.3),this.applyForce(t.force.scale(.1)),i.shake(.5,k(.003))),!0}return!0}collideWithTile(t){return t===pi.LADDER?!1:t>0}collideWithTileRaycast(t){return t===pi.LADDER?!1:t>0}handleInput(){const{game:t}=this.scene,{input:i}=t;if(this.holdingJump=!!(i.keyIsDown("ArrowUp")||i.keyIsDown("KeyW")),this.moveInput=k((i.keyIsDown("ArrowRight")||i.keyIsDown("KeyD"))-(i.keyIsDown("ArrowLeft")||i.keyIsDown("KeyA")),(i.keyIsDown("ArrowUp")||i.keyIsDown("KeyW"))-(i.keyIsDown("ArrowDown")|i.keyIsDown("KeyS"))),i.mouseWasPressed(0)){console.info("Mouse pressed",this.scene.getPointerRelativeGridPos());const r=new lp(this.scene,{...mp,pos:this.scene.getPointerRelativeGridPos()});this.scene.addObject(r,5)}this.facing=this.moveInput.x===1?wn:this.moveInput.x===-1?vn:this.facing}update(){if(this.deadTimer.isDone()&&(this.deadTimer.unset(),this.pos=this.startPos.clone(),this.isDying=!1),this.hurtTimer.isDone()&&(this.hurtTimer.unset(),this.isHurting=!1),this.isDying)return super.update();this.handleInput();const t=this.moveInput.clone(),{gravity:i}=this.scene;this.climbingWall=!1,this.onLadder=!1,this.holdingJump?(!this.wasHoldingJump||this.climbingWall)&&this.jumpPressedTimer.set(.3):this.jumpPressedTimer.unset(),this.wasHoldingJump=this.holdingJump,t.x&&!this.force.x&&this.force.y>0&&(this.force.y*=.8,this.climbingWall=!0);for(let o=2;o--;){const n=this.pos.add(k(0,o+.1*t.y-this.size.y/2)),s=this.scene.getTileCollisionData(n);this.onLadder||=s===pi.LADDER}if(this.onLadder?t.y&&(this.climbingLadder=!0):this.climbingLadder=!1,this.climbingLadder){const o=(this.pos.x|0)+.5-this.pos.x;this.climbingWall=!1,this.onGround=!1,this.jumpTimer.unset(),this.groundTimer.unset(),this.force=this.force.multiply(k(.85)).add(k(0,-.02*t.y)),this.force.x+=.22*o*Math.abs(t.x?0:t.y),t.x*=.2,this.climbingLadder=t.y!==0||this.scene.getTileCollisionData(this.pos.subtract(k(0,1)))<=0}else(this.onGround||this.climbingWall)&&this.groundTimer.set(.1);this.gravityScale=this.onLadder?0:1,this.groundTimer.isActive()&&this.jumpPressedTimer.isActive()&&!this.jumpTimer.isActive()&&(this.climbingWall?this.force.y=-.25:(this.force.y=-.15,this.jumpTimer.set(.5))),this.jumpTimer.isActive()&&!this.climbingWall&&(this.groundTimer.unset(),this.holdingJump&&this.force.y<0&&this.jumpTimer.isActive()&&(this.force.y-=.07)),this.onGround||(Math.sign(t.x)===Math.sign(this.force.x)?t.x*=.4:t.x*=.8,this.force.y>0&&!this.climbingLadder&&(this.force.y-=i*.2)),!this.onLadder&&!this.climbingLadder&&Math.sign(this.moveInput.x)!==Math.sign(this.force.x)&&Math.abs(this.force.x)>.1&&this.dust(),this.force.x=ke(this.force.x+t.x*.032,-this.maxSpeed,this.maxSpeed),this.lastPos=this.pos.clone(),super.update();let r=Ce.IDLE;this.isDying?r=Ce.DEAD:this.isHurting?r=Ce.HURT:this.climbingLadder?r=t.y?Ce.CLIMB:Ce.ON_LADDER:this.jumpTimer.isActive()&&!this.onGround?r=this.force.y<=0?Ce.JUMP:Ce.FALL:this.pushing?r=Ce.PUSH:t.x&&Math.abs(this.force.x)>.01&&Math.abs(this.force.x)<.12?r=Ce.WALK:t.x&&Math.abs(this.force.x)>=.12&&(r=Ce.RUN),this.setAnimation(r,this.facing===vn||this.climbingLadder),this.pushing=!1}dust(t=this.facing){const i=k(t===vn?-1:1,.4),r=new xp(this.scene,{pos:this.pos.add(i),flipH:t===wn});this.scene.addObject(r,5)}}const bn={BOUNCE:{strip:{x:0,y:0,frames:9,duration:80},width:48,height:16,offset:[-17,-5],loop:!0},RUN_LEFT:{strip:{x:0,y:16,frames:14,duration:80},width:48,height:16,offset:[-17,-5],loop:!0},RUN_RIGHT:{strip:{x:0,y:32,frames:14,duration:80},width:48,height:16,offset:[-17,-5],loop:!0}};class Tp extends Re{image="slime.png";animation=bn.BOUNCE;direction=ys.LEFT;distance=0;damage=20;running=!1;initialPos=k();constructor(t,i){super(t,i),this.distance=this.size.y,this.initialPos=this.pos.clone().subtract(this.size.divide(2)),this.size=k(.8,.6)}update(){this.setAnimation(this.running?bn.RUN_RIGHT:bn.BOUNCE),super.update()}displayDebug(){const{draw:t}=this.scene.game,i=this.getTranslatedBoundingRect().move(this.scene.camera.pos),{pos:{x:r,y:o}}=i;t.outline(i,Ae.Cyan,1),t.text(`Slime ${this.running?"running":"idle"}`,k(r,o))}}class Ap extends Re{mass=0}const Sp=""+new URL("assets/images/coin-B1fE3OGC.png",import.meta.url).href,Dp=""+new URL("assets/images/dither-Drb8mVyP.png",import.meta.url).href,Op=""+new URL("assets/images/dust-DBPrgoov.png",import.meta.url).href,Cp=""+new URL("assets/images/energy-L5u_PMtK.png",import.meta.url).href,Ip=""+new URL("assets/images/energy_strip-jyFj3VSn.png",import.meta.url).href,Lp=""+new URL("assets/images/monster1-B2PCVu7b.png",import.meta.url).href,Rp=""+new URL("assets/images/monster2-B5DDNV_0.png",import.meta.url).href,Np=""+new URL("assets/images/monster3-Bdt-iviK.png",import.meta.url).href,Mp="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAICAYAAACLUr1bAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4QwcFAAbX7ml4QAAADdJREFUOMtjYBgFqOD/////SVHPRG0LSHUAIcBIruMYGRkZCTkMWQ0hebpFEb1DeMDT4CigFAAA+Uon6PQAbmgAAAAASUVORK5CYII=",Pp=""+new URL("assets/images/slime-B2IFLdA6.png",import.meta.url).href,kp=""+new URL("assets/images/tileset-ByQy_yBn.png",import.meta.url).href,Fp=""+new URL("assets/images/water-BQMY6fYy.png",import.meta.url).href,Bp=""+new URL("assets/powerup-BchoSk5p.mp3",import.meta.url).href,Up={"coin.png":Sp,"dither.png":Dp,"dust.png":Op,"energy.png":Cp,"estrip.png":Ip,"monster1.png":Lp,"monster2.png":Rp,"monster3.png":Np,"shine.png":Mp,"slime.png":Pp,"tileset.png":kp,"water.png":Fp,"powerup.mp3":Bp};var vs={exports:{}},Zl={exports:{}},B=Zl.exports=B||{};B.gui=B.gui||{};B.utils=B.utils||{};B.controllers=B.controllers||{};B.dom=B.dom||{};B.color=B.color||{};B.utils.css=function(){return{load:function(e,t){t=t||document;var i=t.createElement("link");i.type="text/css",i.rel="stylesheet",i.href=e,t.getElementsByTagName("head")[0].appendChild(i)},inject:function(e,t){t=t||document;var i=document.createElement("style");i.type="text/css",i.innerHTML=e,t.getElementsByTagName("head")[0].appendChild(i)}}}();B.utils.common=function(){var e=Array.prototype.forEach,t=Array.prototype.slice;return{BREAK:{},extend:function(i){return this.each(t.call(arguments,1),function(r){for(var o in r)this.isUndefined(r[o])||(i[o]=r[o])},this),i},defaults:function(i){return this.each(t.call(arguments,1),function(r){for(var o in r)this.isUndefined(i[o])&&(i[o]=r[o])},this),i},compose:function(){var i=t.call(arguments);return function(){for(var r=t.call(arguments),o=i.length-1;o>=0;o--)r=[i[o].apply(this,r)];return r[0]}},each:function(i,r,o){if(e&&i.forEach===e)i.forEach(r,o);else if(i.length===i.length+0){for(var n=0,s=i.length;n<s;n++)if(n in i&&r.call(o,i[n],n)===this.BREAK)return}else for(var n in i)if(r.call(o,i[n],n)===this.BREAK)return},defer:function(i){setTimeout(i,0)},toArray:function(i){return i.toArray?i.toArray():t.call(i)},isUndefined:function(i){return i===void 0},isNull:function(i){return i===null},isNaN:function(i){return i!==i},isArray:Array.isArray||function(i){return i.constructor===Array},isObject:function(i){return i===Object(i)},isNumber:function(i){return i===i+0},isString:function(i){return i===i+""},isBoolean:function(i){return i===!1||i===!0},isFunction:function(i){return Object.prototype.toString.call(i)==="[object Function]"}}}();B.controllers.Controller=function(e){var t=function(i,r){this.initialValue=i[r],this.domElement=document.createElement("div"),this.object=i,this.property=r,this.__onChange=void 0,this.__onFinishChange=void 0};return e.extend(t.prototype,{onChange:function(i){return this.__onChange=i,this},onFinishChange:function(i){return this.__onFinishChange=i,this},setValue:function(i){return this.object[this.property]=i,this.__onChange&&this.__onChange.call(this,i),this.updateDisplay(),this},getValue:function(){return this.object[this.property]},updateDisplay:function(){return this},isModified:function(){return this.initialValue!==this.getValue()}}),t}(B.utils.common);B.dom.dom=function(e){var t={HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},i={};e.each(t,function(s,l){e.each(s,function(f){i[f]=l})});var r=/(\d+(\.\d+)?)px/;function o(s){if(s==="0"||e.isUndefined(s))return 0;var l=s.match(r);return e.isNull(l)?0:parseFloat(l[1])}var n={makeSelectable:function(s,l){s===void 0||s.style===void 0||(s.onselectstart=l?function(){return!1}:function(){},s.style.MozUserSelect=l?"auto":"none",s.style.KhtmlUserSelect=l?"auto":"none",s.unselectable=l?"on":"off")},makeFullscreen:function(s,l,f){e.isUndefined(l)&&(l=!0),e.isUndefined(f)&&(f=!0),s.style.position="absolute",l&&(s.style.left=0,s.style.right=0),f&&(s.style.top=0,s.style.bottom=0)},fakeEvent:function(s,l,f,h){f=f||{};var c=i[l];if(!c)throw new Error("Event type "+l+" not supported.");var g=document.createEvent(c);switch(c){case"MouseEvents":var a=f.x||f.clientX||0,u=f.y||f.clientY||0;g.initMouseEvent(l,f.bubbles||!1,f.cancelable||!0,window,f.clickCount||1,0,0,a,u,!1,!1,!1,!1,0,null);break;case"KeyboardEvents":var d=g.initKeyboardEvent||g.initKeyEvent;e.defaults(f,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),d(l,f.bubbles||!1,f.cancelable,window,f.ctrlKey,f.altKey,f.shiftKey,f.metaKey,f.keyCode,f.charCode);break;default:g.initEvent(l,f.bubbles||!1,f.cancelable||!0);break}e.defaults(g,h),s.dispatchEvent(g)},bind:function(s,l,f,h){return h=h||!1,s.addEventListener?s.addEventListener(l,f,h):s.attachEvent&&s.attachEvent("on"+l,f),n},unbind:function(s,l,f,h){return h=h||!1,s.removeEventListener?s.removeEventListener(l,f,h):s.detachEvent&&s.detachEvent("on"+l,f),n},addClass:function(s,l){if(s.className===void 0)s.className=l;else if(s.className!==l){var f=s.className.split(/ +/);f.indexOf(l)==-1&&(f.push(l),s.className=f.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return n},removeClass:function(s,l){if(l){if(s.className!==void 0)if(s.className===l)s.removeAttribute("class");else{var f=s.className.split(/ +/),h=f.indexOf(l);h!=-1&&(f.splice(h,1),s.className=f.join(" "))}}else s.className=void 0;return n},hasClass:function(s,l){return new RegExp("(?:^|\\s+)"+l+"(?:\\s+|$)").test(s.className)||!1},getWidth:function(s){var l=getComputedStyle(s);return o(l["border-left-width"])+o(l["border-right-width"])+o(l["padding-left"])+o(l["padding-right"])+o(l.width)},getHeight:function(s){var l=getComputedStyle(s);return o(l["border-top-width"])+o(l["border-bottom-width"])+o(l["padding-top"])+o(l["padding-bottom"])+o(l.height)},getOffset:function(s){var l={left:0,top:0};if(s.offsetParent)do l.left+=s.offsetLeft,l.top+=s.offsetTop;while(s=s.offsetParent);return l},isActive:function(s){return s===document.activeElement&&(s.type||s.href)}};return n}(B.utils.common);B.controllers.OptionController=function(e,t,i){var r=function(o,n,s){r.superclass.call(this,o,n);var l=this;if(this.__select=document.createElement("select"),i.isArray(s)){var f={};i.each(s,function(h){f[h]=h}),s=f}i.each(s,function(h,c){var g=document.createElement("option");g.innerHTML=c,g.setAttribute("value",h),l.__select.appendChild(g)}),this.updateDisplay(),t.bind(this.__select,"change",function(){var h=this.options[this.selectedIndex].value;l.setValue(h)}),this.domElement.appendChild(this.__select)};return r.superclass=e,i.extend(r.prototype,e.prototype,{setValue:function(o){var n=r.superclass.prototype.setValue.call(this,o);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),n},updateDisplay:function(){return this.__select.value=this.getValue(),r.superclass.prototype.updateDisplay.call(this)}}),r}(B.controllers.Controller,B.dom.dom,B.utils.common);B.controllers.NumberController=function(e,t){var i=function(o,n,s){i.superclass.call(this,o,n),s=s||{},this.__min=s.min,this.__max=s.max,this.__step=s.step,t.isUndefined(this.__step)?this.initialValue==0?this.__impliedStep=1:this.__impliedStep=Math.pow(10,Math.floor(Math.log(this.initialValue)/Math.LN10))/10:this.__impliedStep=this.__step,this.__precision=r(this.__impliedStep)};i.superclass=e,t.extend(i.prototype,e.prototype,{setValue:function(o){return this.__min!==void 0&&o<this.__min?o=this.__min:this.__max!==void 0&&o>this.__max&&(o=this.__max),this.__step!==void 0&&o%this.__step!=0&&(o=Math.round(o/this.__step)*this.__step),i.superclass.prototype.setValue.call(this,o)},min:function(o){return this.__min=o,this},max:function(o){return this.__max=o,this},step:function(o){return this.__step=o,this}});function r(o){return o=o.toString(),o.indexOf(".")>-1?o.length-o.indexOf(".")-1:0}return i}(B.controllers.Controller,B.utils.common);B.controllers.NumberControllerBox=function(e,t,i){var r=function(n,s,l){this.__truncationSuspended=!1,r.superclass.call(this,n,s,l);var f=this,h;this.__input=document.createElement("input"),this.__input.setAttribute("type","text"),t.bind(this.__input,"change",c),t.bind(this.__input,"blur",g),t.bind(this.__input,"mousedown",a),t.bind(this.__input,"keydown",function(y){y.keyCode===13&&(f.__truncationSuspended=!0,this.blur(),f.__truncationSuspended=!1)});function c(){var y=parseFloat(f.__input.value);i.isNaN(y)||f.setValue(y)}function g(){c(),f.__onFinishChange&&f.__onFinishChange.call(f,f.getValue())}function a(y){t.bind(window,"mousemove",u),t.bind(window,"mouseup",d),h=y.clientY}function u(y){var b=h-y.clientY;f.setValue(f.getValue()+b*f.__impliedStep),h=y.clientY}function d(){t.unbind(window,"mousemove",u),t.unbind(window,"mouseup",d)}this.updateDisplay(),this.domElement.appendChild(this.__input)};r.superclass=e,i.extend(r.prototype,e.prototype,{updateDisplay:function(){return this.__input.value=this.__truncationSuspended?this.getValue():o(this.getValue(),this.__precision),r.superclass.prototype.updateDisplay.call(this)}});function o(n,s){var l=Math.pow(10,s);return Math.round(n*l)/l}return r}(B.controllers.NumberController,B.dom.dom,B.utils.common);B.controllers.NumberControllerSlider=function(e,t,i,r,o){var n=function(l,f,h,c,g){n.superclass.call(this,l,f,{min:h,max:c,step:g});var a=this;this.__background=document.createElement("div"),this.__foreground=document.createElement("div"),t.bind(this.__background,"mousedown",u),t.addClass(this.__background,"slider"),t.addClass(this.__foreground,"slider-fg");function u(b){t.bind(window,"mousemove",d),t.bind(window,"mouseup",y),d(b)}function d(b){b.preventDefault();var E=t.getOffset(a.__background),v=t.getWidth(a.__background);return a.setValue(s(b.clientX,E.left,E.left+v,a.__min,a.__max)),!1}function y(){t.unbind(window,"mousemove",d),t.unbind(window,"mouseup",y),a.__onFinishChange&&a.__onFinishChange.call(a,a.getValue())}this.updateDisplay(),this.__background.appendChild(this.__foreground),this.domElement.appendChild(this.__background)};n.superclass=e,n.useDefaultStyles=function(){i.inject(o)},r.extend(n.prototype,e.prototype,{updateDisplay:function(){var l=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=l*100+"%",n.superclass.prototype.updateDisplay.call(this)}});function s(l,f,h,c,g){return c+(g-c)*((l-f)/(h-f))}return n}(B.controllers.NumberController,B.dom.dom,B.utils.css,B.utils.common,`.slider {
  box-shadow: inset 0 2px 4px rgba(0,0,0,0.15);
  height: 1em;
  border-radius: 1em;
  background-color: #eee;
  padding: 0 0.5em;
  overflow: hidden;
}

.slider-fg {
  padding: 1px 0 2px 0;
  background-color: #aaa;
  height: 1em;
  margin-left: -0.5em;
  padding-right: 0.5em;
  border-radius: 1em 0 0 1em;
}

.slider-fg:after {
  display: inline-block;
  border-radius: 1em;
  background-color: #fff;
  border:  1px solid #aaa;
  content: '';
  float: right;
  margin-right: -1em;
  margin-top: -1px;
  height: 0.9em;
  width: 0.9em;
}`);B.controllers.FunctionController=function(e,t,i){var r=function(o,n,s){r.superclass.call(this,o,n);var l=this;this.__button=document.createElement("div"),this.__button.innerHTML=s===void 0?"Fire":s,t.bind(this.__button,"click",function(f){return f.preventDefault(),l.fire(),!1}),t.addClass(this.__button,"button"),this.domElement.appendChild(this.__button)};return r.superclass=e,i.extend(r.prototype,e.prototype,{fire:function(){this.__onChange&&this.__onChange.call(this),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.getValue().call(this.object)}}),r}(B.controllers.Controller,B.dom.dom,B.utils.common);B.controllers.BooleanController=function(e,t,i){var r=function(o,n){r.superclass.call(this,o,n);var s=this;this.__prev=this.getValue(),this.__checkbox=document.createElement("input"),this.__checkbox.setAttribute("type","checkbox"),t.bind(this.__checkbox,"change",l,!1),this.domElement.appendChild(this.__checkbox),this.updateDisplay();function l(){s.setValue(!s.__prev)}};return r.superclass=e,i.extend(r.prototype,e.prototype,{setValue:function(o){var n=r.superclass.prototype.setValue.call(this,o);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),n},updateDisplay:function(){return this.getValue()===!0?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0):this.__checkbox.checked=!1,r.superclass.prototype.updateDisplay.call(this)}}),r}(B.controllers.Controller,B.dom.dom,B.utils.common);B.color.toString=function(e){return function(t){if(t.a==1||e.isUndefined(t.a)){for(var i=t.hex.toString(16);i.length<6;)i="0"+i;return"#"+i}else return"rgba("+Math.round(t.r)+","+Math.round(t.g)+","+Math.round(t.b)+","+t.a+")"}}(B.utils.common);B.color.interpret=function(e,t){var i,r,o=function(){r=!1;var s=arguments.length>1?t.toArray(arguments):arguments[0];return t.each(n,function(l){if(l.litmus(s))return t.each(l.conversions,function(f,h){if(i=f.read(s),r===!1&&i!==!1)return r=i,i.conversionName=h,i.conversion=f,t.BREAK}),t.BREAK}),r},n=[{litmus:t.isString,conversions:{THREE_CHAR_HEX:{read:function(s){var l=s.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return l===null?!1:{space:"HEX",hex:parseInt("0x"+l[1].toString()+l[1].toString()+l[2].toString()+l[2].toString()+l[3].toString()+l[3].toString())}},write:e},SIX_CHAR_HEX:{read:function(s){var l=s.match(/^#([A-F0-9]{6})$/i);return l===null?!1:{space:"HEX",hex:parseInt("0x"+l[1].toString())}},write:e},CSS_RGB:{read:function(s){var l=s.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return l===null?!1:{space:"RGB",r:parseFloat(l[1]),g:parseFloat(l[2]),b:parseFloat(l[3])}},write:e},CSS_RGBA:{read:function(s){var l=s.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\,\s*(.+)\s*\)/);return l===null?!1:{space:"RGB",r:parseFloat(l[1]),g:parseFloat(l[2]),b:parseFloat(l[3]),a:parseFloat(l[4])}},write:e}}},{litmus:t.isNumber,conversions:{HEX:{read:function(s){return{space:"HEX",hex:s,conversionName:"HEX"}},write:function(s){return s.hex}}}},{litmus:t.isArray,conversions:{RGB_ARRAY:{read:function(s){return s.length!=3?!1:{space:"RGB",r:s[0],g:s[1],b:s[2]}},write:function(s){return[s.r,s.g,s.b]}},RGBA_ARRAY:{read:function(s){return s.length!=4?!1:{space:"RGB",r:s[0],g:s[1],b:s[2],a:s[3]}},write:function(s){return[s.r,s.g,s.b,s.a]}}}},{litmus:t.isObject,conversions:{RGBA_OBJ:{read:function(s){return t.isNumber(s.r)&&t.isNumber(s.g)&&t.isNumber(s.b)&&t.isNumber(s.a)?{space:"RGB",r:s.r,g:s.g,b:s.b,a:s.a}:!1},write:function(s){return{r:s.r,g:s.g,b:s.b,a:s.a}}},RGB_OBJ:{read:function(s){return t.isNumber(s.r)&&t.isNumber(s.g)&&t.isNumber(s.b)?{space:"RGB",r:s.r,g:s.g,b:s.b}:!1},write:function(s){return{r:s.r,g:s.g,b:s.b}}},HSVA_OBJ:{read:function(s){return t.isNumber(s.h)&&t.isNumber(s.s)&&t.isNumber(s.v)&&t.isNumber(s.a)?{space:"HSV",h:s.h,s:s.s,v:s.v,a:s.a}:!1},write:function(s){return{h:s.h,s:s.s,v:s.v,a:s.a}}},HSV_OBJ:{read:function(s){return t.isNumber(s.h)&&t.isNumber(s.s)&&t.isNumber(s.v)?{space:"HSV",h:s.h,s:s.s,v:s.v}:!1},write:function(s){return{h:s.h,s:s.s,v:s.v}}}}}];return o}(B.color.toString,B.utils.common);B.GUI=B.gui.GUI=function(e,t,i,r,o,n,s,l,f,h,c,g,a,u,d){e.inject(i);var y="dg",b=72,E=20,v="Default",_=function(){try{return"localStorage"in window&&window.localStorage!==null}catch{return!1}}(),x,A=!0,C,O=!1,I=[],p=function(T){var N=this;this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),u.addClass(this.domElement,y),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],T=T||{},T=d.defaults(T,{autoPlace:!0,width:p.DEFAULT_WIDTH}),T=d.defaults(T,{resizable:T.autoPlace,hideable:T.autoPlace}),d.isUndefined(T.load)?T.load={preset:v}:T.preset&&(T.load.preset=T.preset),d.isUndefined(T.parent)&&T.hideable&&I.push(this),T.resizable=d.isUndefined(T.parent)&&T.resizable,T.autoPlace&&d.isUndefined(T.scrollable)&&(T.scrollable=!0);var P=_&&localStorage.getItem(j(this,"isLocal"))==="true";if(Object.defineProperties(this,{parent:{get:function(){return T.parent}},scrollable:{get:function(){return T.scrollable}},autoPlace:{get:function(){return T.autoPlace}},preset:{get:function(){return N.parent?N.getRoot().preset:T.load.preset},set:function(W){N.parent?N.getRoot().preset=W:T.load.preset=W,oi(this),N.revert()}},width:{get:function(){return T.width},set:function(W){T.width=W,H(N,W)}},name:{get:function(){return T.name},set:function(W){T.name=W,w&&(w.innerHTML=T.name)}},closed:{get:function(){return T.closed},set:function(W){T.closed=W,T.closed?u.addClass(N.__ul,p.CLASS_CLOSED):u.removeClass(N.__ul,p.CLASS_CLOSED),this.onResize(),N.__closeButton&&(N.__closeButton.innerHTML=W?p.TEXT_OPEN:p.TEXT_CLOSED)}},load:{get:function(){return T.load}},useLocalStorage:{get:function(){return P},set:function(W){_&&(P=W,W?u.bind(window,"unload",D):u.unbind(window,"unload",D),localStorage.setItem(j(N,"isLocal"),W))}}}),d.isUndefined(T.parent)){if(T.closed=!1,u.addClass(this.domElement,p.CLASS_MAIN),u.makeSelectable(this.domElement,!1),_&&P){N.useLocalStorage=!0;var z=localStorage.getItem(j(this,"gui"));z&&(T.load=JSON.parse(z))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=p.TEXT_CLOSED,u.addClass(this.__closeButton,p.CLASS_CLOSE_BUTTON),this.domElement.appendChild(this.__closeButton),u.bind(this.__closeButton,"click",function(){N.closed=!N.closed})}else{T.closed===void 0&&(T.closed=!0);var w=document.createTextNode(T.name);u.addClass(w,"controller-name");var m=R(N,w),L=function(W){return W.preventDefault(),N.closed=!N.closed,!1};u.addClass(this.__ul,p.CLASS_CLOSED),u.addClass(m,"title"),u.bind(m,"click",L),T.closed||(this.closed=!1)}T.autoPlace&&(d.isUndefined(T.parent)&&(A&&(C=document.createElement("div"),u.addClass(C,y),u.addClass(C,p.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(C),A=!1),C.appendChild(this.domElement),u.addClass(this.domElement,p.CLASS_AUTO_PLACE)),this.parent||H(N,T.width)),u.bind(window,"resize",function(){N.onResize()}),u.bind(this.__ul,"webkitTransitionEnd",function(){N.onResize()}),u.bind(this.__ul,"transitionend",function(){N.onResize()}),u.bind(this.__ul,"oTransitionEnd",function(){N.onResize()}),this.onResize(),T.resizable&&V(this);function D(){localStorage.setItem(j(N,"gui"),JSON.stringify(N.getSaveObject()))}N.getRoot();function G(){var W=N.getRoot();W.width+=1,d.defer(function(){W.width-=1})}T.parent||G()};p.toggleHide=function(){O=!O,d.each(I,function(T){T.domElement.style.zIndex=O?-999:999,T.domElement.style.opacity=O?0:1})},p.CLASS_AUTO_PLACE="a",p.CLASS_AUTO_PLACE_CONTAINER="ac",p.CLASS_MAIN="main",p.CLASS_CONTROLLER_ROW="cr",p.CLASS_TOO_TALL="taller-than-window",p.CLASS_CLOSED="closed",p.CLASS_CLOSE_BUTTON="close-button",p.CLASS_DRAG="drag",p.DEFAULT_WIDTH=245,p.TEXT_CLOSED="Close Controls",p.TEXT_OPEN="Open Controls",u.bind(window,"keydown",function(T){document.activeElement.type!=="text"&&(T.which===b||T.keyCode==b)&&p.toggleHide()},!1),d.extend(p.prototype,{add:function(T,N){return S(this,T,N,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(T,N){return S(this,T,N,{color:!0})},remove:function(T){this.__ul.removeChild(T.__li),this.__controllers.slice(this.__controllers.indexOf(T),1);var N=this;d.defer(function(){N.onResize()})},destroy:function(){this.autoPlace&&C.removeChild(this.domElement)},addFolder:function(T){if(this.__folders[T]!==void 0)throw new Error('You already have a folder in this GUI by the name "'+T+'"');var N={name:T,parent:this};N.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[T]&&(N.closed=this.load.folders[T].closed,N.load=this.load.folders[T]);var P=new p(N);this.__folders[T]=P;var z=R(this,P.domElement);return u.addClass(z,"folder"),P},open:function(){this.closed=!1},close:function(){this.closed=!0},onResize:function(){var T=this.getRoot();if(T.scrollable){var N=u.getOffset(T.__ul).top,P=0;d.each(T.__ul.childNodes,function(z){T.autoPlace&&z===T.__save_row||(P+=u.getHeight(z))}),window.innerHeight-N-E<P?(u.addClass(T.domElement,p.CLASS_TOO_TALL),T.__ul.style.height=window.innerHeight-N-E+"px"):(u.removeClass(T.domElement,p.CLASS_TOO_TALL),T.__ul.style.height="auto")}T.__resize_handle&&d.defer(function(){T.__resize_handle.style.height=T.__ul.offsetHeight+"px"}),T.__closeButton&&(T.__closeButton.style.width=T.width+"px")},remember:function(){if(d.isUndefined(x)&&(x=new a,x.domElement.innerHTML=t),this.parent)throw new Error("You can only call remember on a top level GUI.");var T=this;d.each(Array.prototype.slice.call(arguments),function(N){T.__rememberedObjects.length==0&&Y(T),T.__rememberedObjects.indexOf(N)==-1&&T.__rememberedObjects.push(N)}),this.autoPlace&&H(this,this.width)},getRoot:function(){for(var T=this;T.parent;)T=T.parent;return T},getSaveObject:function(){var T=this.load;return T.closed=this.closed,this.__rememberedObjects.length>0&&(T.preset=this.preset,T.remembered||(T.remembered={}),T.remembered[this.preset]=Ft(this)),T.folders={},d.each(this.__folders,function(N,P){T.folders[P]=N.getSaveObject()}),T},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=Ft(this),Oe(this,!1)},saveAs:function(T){this.load.remembered||(this.load.remembered={},this.load.remembered[v]=Ft(this,!0)),this.load.remembered[T]=Ft(this),this.preset=T,_t(this,T,!0)},revert:function(T){d.each(this.__controllers,function(N){this.getRoot().load.remembered?X(T||this.getRoot(),N):N.setValue(N.initialValue)},this),d.each(this.__folders,function(N){N.revert(N)}),T||Oe(this.getRoot(),!1)},listen:function(T){var N=this.__listening.length==0;this.__listening.push(T),N&&Bt(this.__listening)}});function S(T,N,P,z){if(N[P]===void 0)throw new Error("Object "+N+' has no property "'+P+'"');var w;if(z.color)w=new c(N,P);else{var m=[N,P].concat(z.factoryArgs);w=r.apply(T,m)}z.before instanceof o&&(z.before=z.before.__li),X(T,w),u.addClass(w.domElement,"c");var L=document.createElement("span");u.addClass(L,"property-name"),L.innerHTML=w.property;var D=document.createElement("div");D.appendChild(L),D.appendChild(w.domElement);var G=R(T,D,z.before);return u.addClass(G,p.CLASS_CONTROLLER_ROW),u.addClass(G,typeof w.getValue()),F(T,G,w),T.__controllers.push(w),w}function R(T,N,P){var z=document.createElement("li");return N&&z.appendChild(N),P?T.__ul.insertBefore(z,params.before):T.__ul.appendChild(z),T.onResize(),z}function F(T,N,P){if(P.__li=N,P.__gui=T,d.extend(P,{options:function(m){if(arguments.length>1)return P.remove(),S(T,P.object,P.property,{before:P.__li.nextElementSibling,factoryArgs:[d.toArray(arguments)]});if(d.isArray(m)||d.isObject(m))return P.remove(),S(T,P.object,P.property,{before:P.__li.nextElementSibling,factoryArgs:[m]})},name:function(m){return P.__li.firstElementChild.firstElementChild.innerHTML=m,P},listen:function(){return P.__gui.listen(P),P},remove:function(){return P.__gui.remove(P),P}}),P instanceof f){var z=new l(P.object,P.property,{min:P.__min,max:P.__max,step:P.__step});d.each(["updateDisplay","onChange","onFinishChange"],function(m){var L=P[m],D=z[m];P[m]=z[m]=function(){var G=Array.prototype.slice.call(arguments);return L.apply(P,G),D.apply(z,G)}}),u.addClass(N,"has-slider"),P.domElement.insertBefore(z.domElement,P.domElement.firstElementChild)}else if(P instanceof l){var w=function(m){return d.isNumber(P.__min)&&d.isNumber(P.__max)?(P.remove(),S(T,P.object,P.property,{before:P.__li.nextElementSibling,factoryArgs:[P.__min,P.__max,P.__step]})):m};P.min=d.compose(w,P.min),P.max=d.compose(w,P.max)}else P instanceof n?(u.bind(N,"click",function(){u.fakeEvent(P.__checkbox,"click")}),u.bind(P.__checkbox,"click",function(m){m.stopPropagation()})):P instanceof s?(u.bind(N,"click",function(){u.fakeEvent(P.__button,"click")}),u.bind(N,"mouseover",function(){u.addClass(P.__button,"hover")}),u.bind(N,"mouseout",function(){u.removeClass(P.__button,"hover")})):P instanceof c&&(u.addClass(N,"color"),P.updateDisplay=d.compose(function(m){return N.style.borderLeftColor=P.__color.toString(),m},P.updateDisplay),P.updateDisplay());P.setValue=d.compose(function(m){return T.getRoot().__preset_select&&P.isModified()&&Oe(T.getRoot(),!0),m},P.setValue)}function X(T,N){var P=T.getRoot(),z=P.__rememberedObjects.indexOf(N.object);if(z!=-1){var w=P.__rememberedObjectIndecesToControllers[z];if(w===void 0&&(w={},P.__rememberedObjectIndecesToControllers[z]=w),w[N.property]=N,P.load&&P.load.remembered){var m=P.load.remembered,L;if(m[T.preset])L=m[T.preset];else if(m[v])L=m[v];else return;if(L[z]&&L[z][N.property]!==void 0){var D=L[z][N.property];N.initialValue=D,N.setValue(D)}}}}function j(T,N){return document.location.href+"."+N}function Y(T){var N=T.__save_row=document.createElement("li");u.addClass(T.domElement,"has-save"),T.__ul.insertBefore(N,T.__ul.firstChild),u.addClass(N,"save-row");var P=document.createElement("span");P.innerHTML="&nbsp;",u.addClass(P,"button gears");var z=document.createElement("span");z.innerHTML="Save",u.addClass(z,"button"),u.addClass(z,"save");var w=document.createElement("span");w.innerHTML="New",u.addClass(w,"button"),u.addClass(w,"save-as");var m=document.createElement("span");m.innerHTML="Revert",u.addClass(m,"button"),u.addClass(m,"revert");var L=T.__preset_select=document.createElement("select");if(T.load&&T.load.remembered?d.each(T.load.remembered,function(Q,he){_t(T,he,he==T.preset)}):_t(T,v,!1),u.bind(L,"change",function(){for(var Q=0;Q<T.__preset_select.length;Q++)T.__preset_select[Q].innerHTML=T.__preset_select[Q].value;T.preset=this.value}),N.appendChild(L),N.appendChild(P),N.appendChild(z),N.appendChild(w),N.appendChild(m),_){let Q=function(){G.style.display=T.useLocalStorage?"block":"none"};var D=document.getElementById("dg-save-locally"),G=document.getElementById("dg-local-explain");D.style.display="block";var W=document.getElementById("dg-local-storage");localStorage.getItem(j(T,"isLocal"))==="true"&&W.setAttribute("checked","checked"),Q(),u.bind(W,"change",function(){T.useLocalStorage=!T.useLocalStorage,Q()})}var te=document.getElementById("dg-new-constructor");u.bind(te,"keydown",function(Q){Q.metaKey&&(Q.which===67||Q.keyCode==67)&&x.hide()}),u.bind(P,"click",function(){te.innerHTML=JSON.stringify(T.getSaveObject(),void 0,2),x.show(),te.focus(),te.select()}),u.bind(z,"click",function(){T.save()}),u.bind(w,"click",function(){var Q=prompt("Enter a new preset name.");Q&&T.saveAs(Q)}),u.bind(m,"click",function(){T.revert()})}function V(T){T.__resize_handle=document.createElement("div"),d.extend(T.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"});var N;u.bind(T.__resize_handle,"mousedown",P),u.bind(T.__closeButton,"mousedown",P),T.domElement.insertBefore(T.__resize_handle,T.domElement.firstElementChild);function P(m){return m.preventDefault(),N=m.clientX,u.addClass(T.__closeButton,p.CLASS_DRAG),u.bind(window,"mousemove",z),u.bind(window,"mouseup",w),!1}function z(m){return m.preventDefault(),T.width+=N-m.clientX,T.onResize(),N=m.clientX,!1}function w(){u.removeClass(T.__closeButton,p.CLASS_DRAG),u.unbind(window,"mousemove",z),u.unbind(window,"mouseup",w)}}function H(T,N){T.domElement.style.width=N+"px",T.__save_row&&T.autoPlace&&(T.__save_row.style.width=N+"px"),T.__closeButton&&(T.__closeButton.style.width=N+"px")}function Ft(T,N){var P={};return d.each(T.__rememberedObjects,function(z,w){var m={},L=T.__rememberedObjectIndecesToControllers[w];d.each(L,function(D,G){m[G]=N?D.initialValue:D.getValue()}),P[w]=m}),P}function _t(T,N,P){var z=document.createElement("option");z.innerHTML=N,z.value=N,T.__preset_select.appendChild(z),P&&(T.__preset_select.selectedIndex=T.__preset_select.length-1)}function oi(T){for(var N=0;N<T.__preset_select.length;N++)T.__preset_select[N].value==T.preset&&(T.__preset_select.selectedIndex=N)}function Oe(T,N){var P=T.__preset_select[T.__preset_select.selectedIndex];N?P.innerHTML=P.value+"*":P.innerHTML=P.value}function Bt(T){T.length!=0&&g(function(){Bt(T)}),d.each(T,function(N){N.updateDisplay()})}return p}(B.utils.css,`<div id="dg-save" class="dg dialogue">

  Here's the new load parameter for your <code>GUI</code>'s constructor:

  <textarea id="dg-new-constructor"></textarea>

  <div id="dg-save-locally">

    <input id="dg-local-storage" type="checkbox"/> Automatically save
    values to <code>localStorage</code> on exit.

    <div id="dg-local-explain">The values saved to <code>localStorage</code> will
      override those passed to <code>dat.GUI</code>'s constructor. This makes it
      easier to work incrementally, but <code>localStorage</code> is fragile,
      and your friends may not see the same values you do.
      
    </div>
    
  </div>

</div>`,`.dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity 0.1s linear;-o-transition:opacity 0.1s linear;-moz-transition:opacity 0.1s linear;transition:opacity 0.1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity 0.1s linear;-o-transition:opacity 0.1s linear;-moz-transition:opacity 0.1s linear;transition:opacity 0.1s linear;border:0;position:absolute;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-x:hidden}.dg.a.has-save ul{margin-top:27px}.dg.a.has-save ul.closed{margin-top:0}.dg.a .save-row{position:fixed;top:0;z-index:1002}.dg li{-webkit-transition:height 0.1s ease-out;-o-transition:height 0.1s ease-out;-moz-transition:height 0.1s ease-out;transition:height 0.1s ease-out}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;overflow:hidden;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li > *{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .c{float:left;width:60%}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:9px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2fa1d6}.dg .cr.number input[type=text]{color:#2fa1d6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2fa1d6}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}
`,B.controllers.factory=function(e,t,i,r,o,n,s){return function(l,f){var h=l[f];if(s.isArray(arguments[2])||s.isObject(arguments[2]))return new e(l,f,arguments[2]);if(s.isNumber(h))return s.isNumber(arguments[2])&&s.isNumber(arguments[3])?new i(l,f,arguments[2],arguments[3]):new t(l,f,{min:arguments[2],max:arguments[3]});if(s.isString(h))return new r(l,f);if(s.isFunction(h))return new o(l,f,"");if(s.isBoolean(h))return new n(l,f)}}(B.controllers.OptionController,B.controllers.NumberControllerBox,B.controllers.NumberControllerSlider,B.controllers.StringController=function(e,t,i){var r=function(o,n){r.superclass.call(this,o,n);var s=this;this.__input=document.createElement("input"),this.__input.setAttribute("type","text"),t.bind(this.__input,"keyup",l),t.bind(this.__input,"change",l),t.bind(this.__input,"blur",f),t.bind(this.__input,"keydown",function(h){h.keyCode===13&&this.blur()});function l(){s.setValue(s.__input.value)}function f(){s.__onFinishChange&&s.__onFinishChange.call(s,s.getValue())}this.updateDisplay(),this.domElement.appendChild(this.__input)};return r.superclass=e,i.extend(r.prototype,e.prototype,{updateDisplay:function(){return t.isActive(this.__input)||(this.__input.value=this.getValue()),r.superclass.prototype.updateDisplay.call(this)}}),r}(B.controllers.Controller,B.dom.dom,B.utils.common),B.controllers.FunctionController,B.controllers.BooleanController,B.utils.common),B.controllers.Controller,B.controllers.BooleanController,B.controllers.FunctionController,B.controllers.NumberControllerBox,B.controllers.NumberControllerSlider,B.controllers.OptionController,B.controllers.ColorController=function(e,t,i,r,o){var n=function(h,c){n.superclass.call(this,h,c),this.__color=new i(this.getValue()),this.__temp=new i(0);var g=this;this.domElement=document.createElement("div"),t.makeSelectable(this.domElement,!1),this.__selector=document.createElement("div"),this.__selector.className="selector",this.__saturation_field=document.createElement("div"),this.__saturation_field.className="saturation-field",this.__field_knob=document.createElement("div"),this.__field_knob.className="field-knob",this.__field_knob_border="2px solid ",this.__hue_knob=document.createElement("div"),this.__hue_knob.className="hue-knob",this.__hue_field=document.createElement("div"),this.__hue_field.className="hue-field",this.__input=document.createElement("input"),this.__input.type="text",this.__input_textShadow="0 1px 1px ",t.bind(this.__input,"keydown",function(_){_.keyCode===13&&y.call(this)}),t.bind(this.__input,"blur",y),t.bind(this.__selector,"mousedown",function(_){t.addClass(this,"drag").bind(window,"mouseup",function(x){t.removeClass(g.__selector,"drag")})});var a=document.createElement("div");o.extend(this.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),o.extend(this.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:this.__field_knob_border+(this.__color.v<.5?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),o.extend(this.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),o.extend(this.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),o.extend(a.style,{width:"100%",height:"100%",background:"none"}),l(a,"top","rgba(0,0,0,0)","#000"),o.extend(this.__hue_field.style,{width:"15px",height:"100px",display:"inline-block",border:"1px solid #555",cursor:"ns-resize"}),f(this.__hue_field),o.extend(this.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:this.__input_textShadow+"rgba(0,0,0,0.7)"}),t.bind(this.__saturation_field,"mousedown",u),t.bind(this.__field_knob,"mousedown",u),t.bind(this.__hue_field,"mousedown",function(_){v(_),t.bind(window,"mousemove",v),t.bind(window,"mouseup",b)});function u(_){E(_),t.bind(window,"mousemove",E),t.bind(window,"mouseup",d)}function d(){t.unbind(window,"mousemove",E),t.unbind(window,"mouseup",d)}function y(){var _=r(this.value);_!==!1?(g.__color.__state=_,g.setValue(g.__color.toOriginal())):this.value=g.__color.toString()}function b(){t.unbind(window,"mousemove",v),t.unbind(window,"mouseup",b)}this.__saturation_field.appendChild(a),this.__selector.appendChild(this.__field_knob),this.__selector.appendChild(this.__saturation_field),this.__selector.appendChild(this.__hue_field),this.__hue_field.appendChild(this.__hue_knob),this.domElement.appendChild(this.__input),this.domElement.appendChild(this.__selector),this.updateDisplay();function E(_){_.preventDefault();var x=t.getWidth(g.__saturation_field),A=t.getOffset(g.__saturation_field),C=(_.clientX-A.left+document.body.scrollLeft)/x,O=1-(_.clientY-A.top+document.body.scrollTop)/x;return O>1?O=1:O<0&&(O=0),C>1?C=1:C<0&&(C=0),g.__color.v=O,g.__color.s=C,g.setValue(g.__color.toOriginal()),!1}function v(_){_.preventDefault();var x=t.getHeight(g.__hue_field),A=t.getOffset(g.__hue_field),C=1-(_.clientY-A.top+document.body.scrollTop)/x;return C>1?C=1:C<0&&(C=0),g.__color.h=C*360,g.setValue(g.__color.toOriginal()),!1}};n.superclass=e,o.extend(n.prototype,e.prototype,{updateDisplay:function(){var h=r(this.getValue());if(h!==!1){var c=!1;o.each(i.COMPONENTS,function(u){if(!o.isUndefined(h[u])&&!o.isUndefined(this.__color.__state[u])&&h[u]!==this.__color.__state[u])return c=!0,{}},this),c&&o.extend(this.__color.__state,h)}o.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var g=this.__color.v<.5||this.__color.s>.5?255:0,a=255-g;o.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toString(),border:this.__field_knob_border+"rgb("+g+","+g+","+g+")"}),this.__hue_knob.style.marginTop=(1-this.__color.h/360)*100+"px",this.__temp.s=1,this.__temp.v=1,l(this.__saturation_field,"left","#fff",this.__temp.toString()),o.extend(this.__input.style,{backgroundColor:this.__input.value=this.__color.toString(),color:"rgb("+g+","+g+","+g+")",textShadow:this.__input_textShadow+"rgba("+a+","+a+","+a+",.7)"})}});var s=["-moz-","-o-","-webkit-","-ms-",""];function l(h,c,g,a){h.style.background="",o.each(s,function(u){h.style.cssText+="background: "+u+"linear-gradient("+c+", "+g+" 0%, "+a+" 100%); "})}function f(h){h.style.background="",h.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",h.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",h.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",h.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",h.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);"}return n}(B.controllers.Controller,B.dom.dom,B.color.Color=function(e,t,i,r){var o=function(){if(this.__state=e.apply(this,arguments),this.__state===!1)throw"Failed to interpret color arguments";this.__state.a=this.__state.a||1};o.COMPONENTS=["r","g","b","h","s","v","hex","a"],r.extend(o.prototype,{toString:function(){return i(this)},toOriginal:function(){return this.__state.conversion.write(this)}}),n(o.prototype,"r",2),n(o.prototype,"g",1),n(o.prototype,"b",0),s(o.prototype,"h"),s(o.prototype,"s"),s(o.prototype,"v"),Object.defineProperty(o.prototype,"a",{get:function(){return this.__state.a},set:function(h){this.__state.a=h}}),Object.defineProperty(o.prototype,"hex",{get:function(){return!this.__state.space!=="HEX"&&(this.__state.hex=t.rgb_to_hex(this.r,this.g,this.b)),this.__state.hex},set:function(h){this.__state.space="HEX",this.__state.hex=h}});function n(h,c,g){Object.defineProperty(h,c,{get:function(){return this.__state.space==="RGB"?this.__state[c]:(l(this,c,g),this.__state[c])},set:function(a){this.__state.space!=="RGB"&&(l(this,c,g),this.__state.space="RGB"),this.__state[c]=a}})}function s(h,c){Object.defineProperty(h,c,{get:function(){return this.__state.space==="HSV"?this.__state[c]:(f(this),this.__state[c])},set:function(g){this.__state.space!=="HSV"&&(f(this),this.__state.space="HSV"),this.__state[c]=g}})}function l(h,c,g){if(h.__state.space==="HEX")h.__state[c]=t.component_from_hex(h.__state.hex,g);else if(h.__state.space==="HSV")r.extend(h.__state,t.hsv_to_rgb(h.__state.h,h.__state.s,h.__state.v));else throw"Corrupted color state"}function f(h){var c=t.rgb_to_hsv(h.r,h.g,h.b);r.extend(h.__state,{s:c.s,v:c.v}),r.isNaN(c.h)?r.isUndefined(h.__state.h)&&(h.__state.h=0):h.__state.h=c.h}return o}(B.color.interpret,B.color.math=function(){var e;return{hsv_to_rgb:function(t,i,r){var o=Math.floor(t/60)%6,n=t/60-Math.floor(t/60),s=r*(1-i),l=r*(1-n*i),f=r*(1-(1-n)*i),h=[[r,f,s],[l,r,s],[s,r,f],[s,l,r],[f,s,r],[r,s,l]][o];return{r:h[0]*255,g:h[1]*255,b:h[2]*255}},rgb_to_hsv:function(t,i,r){var o=Math.min(t,i,r),n=Math.max(t,i,r),s=n-o,l,f;if(n!=0)f=s/n;else return{h:NaN,s:0,v:0};return t==n?l=(i-r)/s:i==n?l=2+(r-t)/s:l=4+(t-i)/s,l/=6,l<0&&(l+=1),{h:l*360,s:f,v:n/255}},rgb_to_hex:function(t,i,r){var o=this.hex_with_component(0,2,t);return o=this.hex_with_component(o,1,i),o=this.hex_with_component(o,0,r),o},component_from_hex:function(t,i){return t>>i*8&255},hex_with_component:function(t,i,r){return r<<(e=i*8)|t&~(255<<e)}}}(),B.color.toString,B.utils.common),B.color.interpret,B.utils.common),B.utils.requestAnimationFrame=function(){return window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,t){window.setTimeout(e,1e3/60)}}(),B.dom.CenteredDiv=function(e,t){var i=function(){this.backgroundElement=document.createElement("div"),t.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear"}),e.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),t.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var r=this;e.bind(this.backgroundElement,"click",function(){r.hide()})};return i.prototype.show=function(){var r=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),t.defer(function(){r.backgroundElement.style.opacity=1,r.domElement.style.opacity=1,r.domElement.style.webkitTransform="scale(1)"})},i.prototype.hide=function(){var r=this,o=function(){r.domElement.style.display="none",r.backgroundElement.style.display="none",e.unbind(r.domElement,"webkitTransitionEnd",o),e.unbind(r.domElement,"transitionend",o),e.unbind(r.domElement,"oTransitionEnd",o)};e.bind(this.domElement,"webkitTransitionEnd",o),e.bind(this.domElement,"transitionend",o),e.bind(this.domElement,"oTransitionEnd",o),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"},i.prototype.layout=function(){this.domElement.style.left=window.innerWidth/2-e.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-e.getHeight(this.domElement)/2+"px"},i}(B.dom.dom,B.utils.common),B.dom.dom,B.utils.common);var zp=Zl.exports,Yl={exports:{}},pe=Yl.exports=pe||{};pe.color=pe.color||{};pe.utils=pe.utils||{};pe.utils.common=function(){var e=Array.prototype.forEach,t=Array.prototype.slice;return{BREAK:{},extend:function(i){return this.each(t.call(arguments,1),function(r){for(var o in r)this.isUndefined(r[o])||(i[o]=r[o])},this),i},defaults:function(i){return this.each(t.call(arguments,1),function(r){for(var o in r)this.isUndefined(i[o])&&(i[o]=r[o])},this),i},compose:function(){var i=t.call(arguments);return function(){for(var r=t.call(arguments),o=i.length-1;o>=0;o--)r=[i[o].apply(this,r)];return r[0]}},each:function(i,r,o){if(e&&i.forEach===e)i.forEach(r,o);else if(i.length===i.length+0){for(var n=0,s=i.length;n<s;n++)if(n in i&&r.call(o,i[n],n)===this.BREAK)return}else for(var n in i)if(r.call(o,i[n],n)===this.BREAK)return},defer:function(i){setTimeout(i,0)},toArray:function(i){return i.toArray?i.toArray():t.call(i)},isUndefined:function(i){return i===void 0},isNull:function(i){return i===null},isNaN:function(i){return i!==i},isArray:Array.isArray||function(i){return i.constructor===Array},isObject:function(i){return i===Object(i)},isNumber:function(i){return i===i+0},isString:function(i){return i===i+""},isBoolean:function(i){return i===!1||i===!0},isFunction:function(i){return Object.prototype.toString.call(i)==="[object Function]"}}}();pe.color.toString=function(e){return function(t){if(t.a==1||e.isUndefined(t.a)){for(var i=t.hex.toString(16);i.length<6;)i="0"+i;return"#"+i}else return"rgba("+Math.round(t.r)+","+Math.round(t.g)+","+Math.round(t.b)+","+t.a+")"}}(pe.utils.common);pe.Color=pe.color.Color=function(e,t,i,r){var o=function(){if(this.__state=e.apply(this,arguments),this.__state===!1)throw"Failed to interpret color arguments";this.__state.a=this.__state.a||1};o.COMPONENTS=["r","g","b","h","s","v","hex","a"],r.extend(o.prototype,{toString:function(){return i(this)},toOriginal:function(){return this.__state.conversion.write(this)}}),n(o.prototype,"r",2),n(o.prototype,"g",1),n(o.prototype,"b",0),s(o.prototype,"h"),s(o.prototype,"s"),s(o.prototype,"v"),Object.defineProperty(o.prototype,"a",{get:function(){return this.__state.a},set:function(h){this.__state.a=h}}),Object.defineProperty(o.prototype,"hex",{get:function(){return!this.__state.space!=="HEX"&&(this.__state.hex=t.rgb_to_hex(this.r,this.g,this.b)),this.__state.hex},set:function(h){this.__state.space="HEX",this.__state.hex=h}});function n(h,c,g){Object.defineProperty(h,c,{get:function(){return this.__state.space==="RGB"?this.__state[c]:(l(this,c,g),this.__state[c])},set:function(a){this.__state.space!=="RGB"&&(l(this,c,g),this.__state.space="RGB"),this.__state[c]=a}})}function s(h,c){Object.defineProperty(h,c,{get:function(){return this.__state.space==="HSV"?this.__state[c]:(f(this),this.__state[c])},set:function(g){this.__state.space!=="HSV"&&(f(this),this.__state.space="HSV"),this.__state[c]=g}})}function l(h,c,g){if(h.__state.space==="HEX")h.__state[c]=t.component_from_hex(h.__state.hex,g);else if(h.__state.space==="HSV")r.extend(h.__state,t.hsv_to_rgb(h.__state.h,h.__state.s,h.__state.v));else throw"Corrupted color state"}function f(h){var c=t.rgb_to_hsv(h.r,h.g,h.b);r.extend(h.__state,{s:c.s,v:c.v}),r.isNaN(c.h)?r.isUndefined(h.__state.h)&&(h.__state.h=0):h.__state.h=c.h}return o}(pe.color.interpret=function(e,t){var i,r,o=function(){r=!1;var s=arguments.length>1?t.toArray(arguments):arguments[0];return t.each(n,function(l){if(l.litmus(s))return t.each(l.conversions,function(f,h){if(i=f.read(s),r===!1&&i!==!1)return r=i,i.conversionName=h,i.conversion=f,t.BREAK}),t.BREAK}),r},n=[{litmus:t.isString,conversions:{THREE_CHAR_HEX:{read:function(s){var l=s.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return l===null?!1:{space:"HEX",hex:parseInt("0x"+l[1].toString()+l[1].toString()+l[2].toString()+l[2].toString()+l[3].toString()+l[3].toString())}},write:e},SIX_CHAR_HEX:{read:function(s){var l=s.match(/^#([A-F0-9]{6})$/i);return l===null?!1:{space:"HEX",hex:parseInt("0x"+l[1].toString())}},write:e},CSS_RGB:{read:function(s){var l=s.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return l===null?!1:{space:"RGB",r:parseFloat(l[1]),g:parseFloat(l[2]),b:parseFloat(l[3])}},write:e},CSS_RGBA:{read:function(s){var l=s.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\,\s*(.+)\s*\)/);return l===null?!1:{space:"RGB",r:parseFloat(l[1]),g:parseFloat(l[2]),b:parseFloat(l[3]),a:parseFloat(l[4])}},write:e}}},{litmus:t.isNumber,conversions:{HEX:{read:function(s){return{space:"HEX",hex:s,conversionName:"HEX"}},write:function(s){return s.hex}}}},{litmus:t.isArray,conversions:{RGB_ARRAY:{read:function(s){return s.length!=3?!1:{space:"RGB",r:s[0],g:s[1],b:s[2]}},write:function(s){return[s.r,s.g,s.b]}},RGBA_ARRAY:{read:function(s){return s.length!=4?!1:{space:"RGB",r:s[0],g:s[1],b:s[2],a:s[3]}},write:function(s){return[s.r,s.g,s.b,s.a]}}}},{litmus:t.isObject,conversions:{RGBA_OBJ:{read:function(s){return t.isNumber(s.r)&&t.isNumber(s.g)&&t.isNumber(s.b)&&t.isNumber(s.a)?{space:"RGB",r:s.r,g:s.g,b:s.b,a:s.a}:!1},write:function(s){return{r:s.r,g:s.g,b:s.b,a:s.a}}},RGB_OBJ:{read:function(s){return t.isNumber(s.r)&&t.isNumber(s.g)&&t.isNumber(s.b)?{space:"RGB",r:s.r,g:s.g,b:s.b}:!1},write:function(s){return{r:s.r,g:s.g,b:s.b}}},HSVA_OBJ:{read:function(s){return t.isNumber(s.h)&&t.isNumber(s.s)&&t.isNumber(s.v)&&t.isNumber(s.a)?{space:"HSV",h:s.h,s:s.s,v:s.v,a:s.a}:!1},write:function(s){return{h:s.h,s:s.s,v:s.v,a:s.a}}},HSV_OBJ:{read:function(s){return t.isNumber(s.h)&&t.isNumber(s.s)&&t.isNumber(s.v)?{space:"HSV",h:s.h,s:s.s,v:s.v}:!1},write:function(s){return{h:s.h,s:s.s,v:s.v}}}}}];return o}(pe.color.toString,pe.utils.common),pe.color.math=function(){var e;return{hsv_to_rgb:function(t,i,r){var o=Math.floor(t/60)%6,n=t/60-Math.floor(t/60),s=r*(1-i),l=r*(1-n*i),f=r*(1-(1-n)*i),h=[[r,f,s],[l,r,s],[s,r,f],[s,l,r],[f,s,r],[r,s,l]][o];return{r:h[0]*255,g:h[1]*255,b:h[2]*255}},rgb_to_hsv:function(t,i,r){var o=Math.min(t,i,r),n=Math.max(t,i,r),s=n-o,l,f;if(n!=0)f=s/n;else return{h:NaN,s:0,v:0};return t==n?l=(i-r)/s:i==n?l=2+(r-t)/s:l=4+(t-i)/s,l/=6,l<0&&(l+=1),{h:l*360,s:f,v:n/255}},rgb_to_hex:function(t,i,r){var o=this.hex_with_component(0,2,t);return o=this.hex_with_component(o,1,i),o=this.hex_with_component(o,0,r),o},component_from_hex:function(t,i){return t>>i*8&255},hex_with_component:function(t,i,r){return r<<(e=i*8)|t&~(255<<e)}}}(),pe.color.toString,pe.utils.common);var Xp=Yl.exports;vs.exports=zp;vs.exports.color=Xp;var jp=vs.exports;const Hp=`<?xml version="1.0" encoding="UTF-8"?>
<map version="1.10" tiledversion="1.11.0" orientation="orthogonal" renderorder="right-down" width="80" height="40" tilewidth="16" tileheight="16" infinite="0" nextlayerid="9" nextobjectid="114">
 <tileset firstgid="1" name="Tileset" tilewidth="16" tileheight="16" tilecount="256" columns="16">
  <image source="../images/tileset.png" width="256" height="256"/>
  <tile id="29" type="ladder"/>
  <tile id="34" type="noCollide"/>
  <tile id="35" type="noCollide"/>
  <tile id="36" type="noCollide"/>
  <tile id="37" type="noCollide"/>
  <tile id="151">
   <animation>
    <frame tileid="151" duration="100"/>
    <frame tileid="152" duration="100"/>
    <frame tileid="153" duration="100"/>
    <frame tileid="154" duration="100"/>
   </animation>
  </tile>
 </tileset>
 <tileset firstgid="257" name="coin" tilewidth="8" tileheight="8" tilecount="11" columns="11">
  <image source="../images/coin.png" width="88" height="8"/>
  <tile id="0">
   <animation>
    <frame tileid="0" duration="50"/>
    <frame tileid="1" duration="50"/>
    <frame tileid="2" duration="50"/>
    <frame tileid="3" duration="50"/>
    <frame tileid="4" duration="50"/>
    <frame tileid="5" duration="50"/>
    <frame tileid="6" duration="50"/>
    <frame tileid="7" duration="50"/>
    <frame tileid="8" duration="50"/>
    <frame tileid="9" duration="50"/>
   </animation>
  </tile>
 </tileset>
 <layer id="1" name="Background" width="80" height="40" opacity="255">
  <data encoding="base64" compression="zlib">
   eJzt2UEKwjAQBdC5jdl5BY/gETyCS3uDuHDfhfWsdmEgpEmYpGlnYn/hMWoLDp8vLWiIyChDAt9Xe0hnBWWuP8ab4WvfS8HOXKcNrh0zGfpZ9p4dN5+RcQ1HmGGY47PjLNfkUpOhoWV+j9kQmYOCfDTwc0v1zyam9O5a5H6/se65Kb23BmFu6F9ddqn779H7x7kH5Z5deu3fufDzrfTYP2524fvYM3JOeLxn0+zjXdNr/9bk3FKP/dsrG8fSsl/u3D/3r5VYv9y5Xvu3J0v5nqWm9N7SUr3iTun9NajpnZvSu7fQ4j6D/rXJ2dLx+gfQ0qWA9K4axf6PSJHeVaNbgbuCfQEAAAAAAAAA4Bi+wd020w==
  </data>
 </layer>
 <layer id="4" name="Shadows" width="80" height="40">
  <data encoding="base64" compression="zlib">
   eJztWgtuwyAM7SWaqMv977kgDcmybPAfuvZJaJkCtnnYxpA+HnviZ7UBClx3ezlaBt6Jv5mt1+Q95HK2FtfgmbJppjsDUn/qsNjK9cVrQfU77/a82/H3l5Ozgruu29ufs/2a9JHO+wTPjUOcB7CMSi69/Glt7fNv7VCMO5nnbhOWy/mqBVgf1q2Btn+EL3QZMJYhoE3YVyMwmjN+N+J6BGqcVRYlp3HI+Sv0v5FPW2sHSubFvLPWAtQ4iSwJx9iHqfiVILLO4WRJdFDriNcB+wsXS5IaBsuxrvku/ElqQMrnYY6HvGv3YIk9VP/oOhvrGOUYyg48785PdS0GeRnlwRHP1NpK8iKMK00cSGo+yf8R0MavtYbS2gH1jPppZGZgRf7zyM86b3Lr1XXNzpSzvbzqniHKjqj6b6az13+RsWgBVxNirLgvonRKauZKWPMIdaZv8N4VwnurXTgageOPq/er8k1kHsgE51dUvU/lG1xD9fcR+0wUhxExwaG6DqDqd+0YLSpyd1Vc7rIPaTE7q2j2X48/vBN/GbWYt+aSzIXLO5Y8RumUnnszz3nRcrg5UWMlPEp0VmKn/Jf9/aEC0jtkb0xw94cW7FRTRty5YmTPbyc/lOQgi59YOMQ+ygHyp/0NgXXvktjiAXd+kYDjmtuLDqOeBu98Mf87nO0r49Gryzs+Irfhu/jKNVzN34q6JRrYBzQ+EWl7xj5bUZtgDlZ9E8rwI+p7ZnSL/o2SFdn8/Xd8+fPhk+aagS9/PnwSf7/hHjMz
  </data>
 </layer>
 <layer id="2" name="Main" width="80" height="40" opacity="255">
  <data encoding="base64" compression="zlib">
   eJztWstuVDEMNQyUASra7mFo18AOIWCPxKtLqsI3wFfwB5Uov4uji1XXdRI78X20HUtHqjoZxzmJ40dmHwAeduIAcScQ+wE2TWX/A+iXVdC6aR0RNnmE7Peu4SDIVpq/V1eUntZ5vXOvnONr82/5a5M1DOf5Uaee28pflFj4e4w4QtzvwE5m3mj+Ng5dESL5e414UxjXGq+kn6yYLv7ZPbjKtfzeE8jv0ea/jty+WYXrKOmx+m+0n+fOUe18lfYx7cNGjJH7pvlS4ualwFrRzeVE2HPd+MuNIf407khq3HhkCfxtxP9L67Hwt67oiJScPfIetPKX/OOuAU8RzxC7MKyZ/Kp3H+eOH55xL2C4K1512kBrzvku35Pnih2aLq98QXxFHMPV2FHCXsUekjHzxBp/Hjsizh/PrSw9AktNueUvPye3+0NFZy9/Jd9IvnAIg5/uNtih6d6pfF7ySSt/lnhFdudyV+990dqbKvFHeQnvjR3C5ZjV06uKyHPGRq02s/hBa204pszJX4q/lOdI/r4p43l+PFUeqMlbxDvEe7jsd1G9aq0HHXH+liIfEZ8Qn8F3R1lFO9NT8lfrVXD5hThDnCN+Gr9ziviO+AHj8Cfr0IRUk+TibzR/nl7ib7hY/x8YeEw4gwtez8XfHH8hnj+v5PjT7kCLlPiTeSRf/1h3fK3mzeV0VrGcP6opJbTcb6+gh2pysr10b1vjwVxvdSQ9/uutKUp1jNRltWWM2Oep1T31uhTe77bkxCX+WvuHGn+99WZrXumtg0q+qskYfTBZw2nvDdH1nBWWO8h6Tmg9rW8nSWQ8OFLWmvaT98s9eXNrDp773UfknUL+Sf3dSJ3ae423X97zhpt7P5qzTkviycW5tNwTEfwtrX5rfXO5LvxZ33Ot3++9H0ms/PH5eSz08h+V/0XkjxE+YF2/nD/FcBm/LfsZxR/Pfyw9ai1PKOVQci3Wd8nSe2Up/lh/1xddf0hdUX3Oqe5n/nZkyYnpHLTkzzedvwi7e9e65W8Z/NX8IyJ2J7mp/E11PpfA3xzofQfu6SP8A44FMLM=
  </data>
 </layer>
 <objectgroup id="5" name="Objects">
  <object id="63" name="Player" type="player" x="144" y="80" width="14" height="26"/>
  <object id="3" name="Spikes" type="spikes" x="336" y="616" width="32" height="8"/>
  <object id="4" name="Slime" type="slime" x="224" y="224" width="160" height="16">
   <properties>
    <property name="direction" value="right"/>
    <property name="range" type="int" value="222"/>
   </properties>
  </object>
  <object id="11" name="Spikes" type="spikes" x="192" y="248" width="32" height="8"/>
  <object id="12" name="Slime" type="slime" x="368" y="512" width="96" height="16">
   <properties>
    <property name="direction" value="right"/>
    <property name="range" type="int" value="222"/>
   </properties>
  </object>
  <object id="13" name="Coin" type="coin" gid="257" x="196" y="204" width="8" height="8"/>
  <object id="15" name="Coin" type="coin" gid="257" x="220" y="176" width="8" height="8"/>
  <object id="16" name="Coin" type="coin" gid="257" x="244" y="204" width="8" height="8"/>
  <object id="17" name="Coin" type="coin" gid="257" x="156" y="212" width="8" height="8"/>
  <object id="18" name="Coin" type="coin" gid="257" x="224" y="480" width="8" height="8"/>
  <object id="20" name="Coin" type="coin" gid="257" x="256" y="480" width="8" height="8"/>
  <object id="21" name="Slime" type="slime" x="112" y="352" width="176" height="16">
   <properties>
    <property name="direction" value="right"/>
    <property name="range" type="int" value="222"/>
   </properties>
  </object>
  <object id="22" name="Coin" type="coin" gid="257" x="320" y="480" width="8" height="8"/>
  <object id="23" name="Coin" type="coin" gid="257" x="336" y="464" width="8" height="8"/>
  <object id="24" name="Coin" type="coin" gid="257" x="352" y="448" width="8" height="8"/>
  <object id="25" name="Coin" type="coin" gid="257" x="368" y="464" width="8" height="8"/>
  <object id="26" name="Coin" type="coin" gid="257" x="64" y="80" width="8" height="8"/>
  <object id="27" name="Coin" type="coin" gid="257" x="96" y="80" width="8" height="8"/>
  <object id="28" name="Coin" type="coin" gid="257" x="128" y="80" width="8" height="8"/>
  <object id="29" name="Coin" type="coin" gid="257" x="160" y="80" width="8" height="8"/>
  <object id="31" name="Coin" type="coin" gid="257" x="96" y="320" width="8" height="8"/>
  <object id="32" name="Coin" type="coin" gid="257" x="68" y="220" width="8" height="8"/>
  <object id="33" name="Coin" type="coin" gid="257" x="272" y="112" width="8" height="8"/>
  <object id="34" name="Coin" type="coin" gid="257" x="304" y="112" width="8" height="8"/>
  <object id="39" name="Coin" type="coin" gid="257" x="368" y="176" width="8" height="8"/>
  <object id="40" name="Coin" type="coin" gid="257" x="532" y="96" width="8" height="8"/>
  <object id="41" name="Coin" type="coin" gid="257" x="416" y="176" width="8" height="8"/>
  <object id="42" name="Coin" type="coin" gid="257" x="528" y="256" width="8" height="8"/>
  <object id="43" name="Coin" type="coin" gid="257" x="564" y="300" width="8" height="8"/>
  <object id="44" name="Coin" type="coin" gid="257" x="596" y="300" width="8" height="8"/>
  <object id="45" name="Coin" type="coin" gid="257" x="628" y="300" width="8" height="8"/>
  <object id="46" name="Coin" type="coin" gid="257" x="224" y="304" width="8" height="8"/>
  <object id="47" name="Coin" type="coin" gid="257" x="256" y="304" width="8" height="8"/>
  <object id="48" name="Coin" type="coin" gid="257" x="288" y="304" width="8" height="8"/>
  <object id="49" name="Coin" type="coin" gid="257" x="320" y="304" width="8" height="8"/>
  <object id="64" name="Slime" type="slime" x="240" y="112" width="160" height="16">
   <properties>
    <property name="direction" value="right"/>
    <property name="range" type="int" value="222"/>
   </properties>
  </object>
  <object id="81" type="box" gid="61" x="432" y="95" width="16" height="16"/>
  <object id="84" type="box" gid="61" x="416" y="95" width="16" height="16"/>
  <object id="85" type="box" gid="61" x="432" y="112" width="16" height="16"/>
  <object id="86" type="box" gid="61" x="416" y="112" width="16" height="16"/>
  <object id="87" type="box" gid="61" x="448" y="112" width="16" height="16"/>
  <object id="89" type="box" gid="61" x="432" y="78" width="16" height="16"/>
  <object id="91" type="box" gid="61" x="96" y="544" width="15" height="15"/>
  <object id="92" type="box" gid="61" x="80" y="544" width="15" height="15"/>
  <object id="93" type="box" gid="61" x="96" y="560" width="15" height="15"/>
  <object id="94" type="box" gid="61" x="80" y="560" width="15" height="15"/>
  <object id="95" type="box" gid="61" x="112" y="560" width="15" height="15"/>
  <object id="96" type="box" gid="61" x="112" y="544" width="15" height="15"/>
  <object id="97" type="box" gid="61" x="96" y="528" width="15" height="15"/>
  <object id="98" type="box" gid="61" x="128" y="560" width="15" height="15"/>
  <object id="99" type="box" gid="61" x="112" y="528" width="15" height="15"/>
  <object id="100" type="box" gid="61" x="112" y="512" width="15" height="15"/>
  <object id="101" type="box" x="64" y="80" width="32" height="32"/>
  <object id="106" gid="61" x="173.564" y="108.416" width="16" height="16" rotation="21.8418"/>
  <object id="111" gid="152" x="448" y="192" width="16" height="16" rotation="345.224"/>
 </objectgroup>
 <layer id="8" name="Foreground" width="80" height="40">
  <data encoding="base64" compression="zlib">
   eJzt0zENADAMA8HgyVj+4LoUQy0ld9LvXlwFAAAAwFQnPSCgX5Cw8XMAAAAAAADAHxc4ygC5
  </data>
 </layer>
</map>
`;class Vp extends Vt{id=ql.DARKNESS;name="Darkness";backgroundColor=new K("#140C1C").setAlpha(.8).toString();g_shadows={};drawRect(t,i){const{ctx:r}=this.scene.game;r.fillStyle=this.backgroundColor,r.fillRect(t.x,t.y,i.x,i.y)}draw(){const t=this.scene,i=t.getObjectByType(we.PLAYER),{camera:r,tileSize:o}=t,{scale:n}=r,s=k(0),l=o.scale(n),f=i.getTranslatedBoundingRect().pos;for(let h=0;h<t.size.x;h++){for(let c=0;c<t.size.y;c++){const g=k(h,c),a=f.clampLength(Math.min(.5,f.length())).add(g);s.x=a.x,s.y=a.y;const u=t.raycastTileCollision(i.pos,s,i);u&&!(u.x===g.x&&u.y===g.y)&&(this.g_shadows[h+"_"+c]=this.g_shadows[h+"_"+c]||{x:g.x,y:g.y,alpha:s.distance(i.pos)})}for(const c in this.g_shadows){const g=this.g_shadows[c];g.alpha<=0?delete this.g_shadows[c]:(s.x=g.x*o.y*n,s.y=g.y*o.y*n,this.drawRect(s.add(r.pos).subtract(k(r.scale)),l))}this.g_shadows={}}}}class Gp extends Wl{gui;debug=!1;gravity=.05;tmxMap=Hp;init(){const{game:t}=this;this.setScale(6),this.addLayer(Vp,1),this.setTileCollisionLayer(2),console.log("Main Scene initialized",this),this.gui=new jp.GUI;const i=this.getObjectByType("player"),r=this.gui.addFolder("Scene"),o=r.addFolder("Layers"),n=r.addFolder("Player");this.gui.add(t,"debug").listen(),r.add(this,"gravity").step(.01).min(.01).max(1),r.add(this.camera,"scale").step(.1).min(1).max(10).listen(),r.add(this.camera,"scrolling").name("camera scroll").listen(),this.layers.sort((s,l)=>s.renderOrder-l.renderOrder).map(s=>o.add(s,"visible").name(s.name||`Layer#${s.id}`)),n.add(i.pos,"x").listen(),n.add(i.pos,"y").listen(),n.add(i,"gravityScale").listen(),n.add(i,"image",{"Owlet monster":"monster1.png","Pink monster":"monster2.png","Dude monster":"monster3.png"}).name("Sprite").onChange(s=>i?.setImage(s)),n.add(i,"invincible").name("God mode").listen()}}const ca=new gp({pixelPerfect:!0,backgroundColor:"#140C1C",postProcessShader:yp,entities:{[we.BOX]:vp,[we.COIN]:wp,[we.PLAYER]:Ep,[we.SLIME]:Tp,[we.SPIKES]:Ap},scenes:{MainScene:Gp},debug:!0,global:!0},Up);async function Wp(){await ca.start("MainScene"),ca.setAudioVolume(.1)}Wp();
//# sourceMappingURL=index-Brm9j7TS.js.map
